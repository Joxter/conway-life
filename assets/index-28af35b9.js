(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const an=(e,t)=>e===t,un=Symbol("solid-track"),Xe={equals:an};let mr=wr;const fe=1,Ye=2,gr={owned:null,cleanups:null,context:null,owner:null};var A=null;let wt=null,O=null,L=null,le=null,lt=0;function Ke(e,t){const r=O,n=A,o=e.length===0,l=t===void 0?n:t,i=o?gr:{owned:null,cleanups:null,context:l?l.context:null,owner:l},s=o?e:()=>e(()=>oe(()=>st(i)));A=i,O=null;try{return Re(s,!0)}finally{O=r,A=n}}function Mt(e,t){t=t?Object.assign({},Xe,t):Xe;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),br(r,o));return[yr.bind(r),n]}function I(e,t,r){const n=zt(e,t,!1,fe);He(n)}function cn(e,t,r){mr=bn;const n=zt(e,t,!1,fe);(!r||!r.render)&&(n.user=!0),le?le.push(n):He(n)}function Pe(e,t,r){r=r?Object.assign({},Xe,r):Xe;const n=zt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,He(n),yr.bind(n)}function fn(e){return Re(e,!1)}function oe(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function dn(e){cn(()=>oe(e))}function xt(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function pn(e,t){const r=Symbol("context");return{id:r,Provider:vn(r),defaultValue:e}}function hn(e){return A&&A.context&&A.context[e.id]!==void 0?A.context[e.id]:e.defaultValue}function mn(e){const t=Pe(e),r=Pe(()=>Ct(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function yr(){if(this.sources&&this.state)if(this.state===fe)He(this);else{const e=L;L=null,Re(()=>et(this),!1),L=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function br(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Re(()=>{for(let o=0;o<e.observers.length;o+=1){const l=e.observers[o],i=wt&&wt.running;i&&wt.disposed.has(l),(i?!l.tState:!l.state)&&(l.pure?L.push(l):le.push(l),l.observers&&vr(l)),i||(l.state=fe)}if(L.length>1e6)throw L=[],new Error},!1)),t}function He(e){if(!e.fn)return;st(e);const t=A,r=O,n=lt;O=A=e,gn(e,e.value,n),O=r,A=t}function gn(e,t,r){let n;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(st),e.owned=null),e.updatedAt=r+1,$r(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?br(e,n):e.value=n,e.updatedAt=r)}function zt(e,t,r,n=fe,o){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:r};return A===null||A!==gr&&(A.owned?A.owned.push(l):A.owned=[l]),l}function Ze(e){if(e.state===0)return;if(e.state===Ye)return et(e);if(e.suspense&&oe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<lt);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===fe)He(e);else if(e.state===Ye){const n=L;L=null,Re(()=>et(e,t[0]),!1),L=n}}function Re(e,t){if(L)return e();let r=!1;t||(L=[]),le?r=!0:le=[],lt++;try{const n=e();return yn(r),n}catch(n){r||(le=null),L=null,$r(n)}}function yn(e){if(L&&(wr(L),L=null),e)return;const t=le;le=null,t.length&&Re(()=>mr(t),!1)}function wr(e){for(let t=0;t<e.length;t++)Ze(e[t])}function bn(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Ze(n)}for(t=0;t<r;t++)Ze(e[t])}function et(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const o=n.state;o===fe?n!==t&&(!n.updatedAt||n.updatedAt<lt)&&Ze(n):o===Ye&&et(n,t)}}}function vr(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ye,r.pure?L.push(r):le.push(r),r.observers&&vr(r))}}function st(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const l=o.pop(),i=r.observerSlots.pop();n<o.length&&(l.sourceSlots[i]=n,o[n]=l,r.observerSlots[n]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)st(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function wn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function $r(e,t=A){throw wn(e)}function Ct(e){if(typeof e=="function"&&!e.length)return Ct(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ct(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function vn(e,t){return function(n){let o;return I(()=>o=oe(()=>(A.context={...A.context,[e]:n.value},mn(()=>n.children))),void 0),o}}const $n=Symbol("fallback");function Gt(e){for(let t=0;t<e.length;t++)e[t]()}function Sn(e,t,r={}){let n=[],o=[],l=[],i=0,s=t.length>1?[]:null;return xt(()=>Gt(l)),()=>{let d=e()||[],f,c;return d[un],oe(()=>{let m=d.length,u,p,a,g,$,b,y,w,S;if(m===0)i!==0&&(Gt(l),l=[],n=[],o=[],i=0,s&&(s=[])),r.fallback&&(n=[$n],o[0]=Ke(_=>(l[0]=_,r.fallback())),i=1);else if(i===0){for(o=new Array(m),c=0;c<m;c++)n[c]=d[c],o[c]=Ke(h);i=m}else{for(a=new Array(m),g=new Array(m),s&&($=new Array(m)),b=0,y=Math.min(i,m);b<y&&n[b]===d[b];b++);for(y=i-1,w=m-1;y>=b&&w>=b&&n[y]===d[w];y--,w--)a[w]=o[y],g[w]=l[y],s&&($[w]=s[y]);for(u=new Map,p=new Array(w+1),c=w;c>=b;c--)S=d[c],f=u.get(S),p[c]=f===void 0?-1:f,u.set(S,c);for(f=b;f<=y;f++)S=n[f],c=u.get(S),c!==void 0&&c!==-1?(a[c]=o[f],g[c]=l[f],s&&($[c]=s[f]),c=p[c],u.set(S,c)):l[f]();for(c=b;c<m;c++)c in a?(o[c]=a[c],l[c]=g[c],s&&(s[c]=$[c],s[c](c))):o[c]=Ke(h);o=o.slice(0,i=m),n=d.slice(0)}return o});function h(m){if(l[c]=m,s){const[u,p]=Mt(c);return s[c]=p,t(d[c],u)}return t(d[c])}}}function K(e,t){return oe(()=>e(t||{}))}const _n=e=>`Stale read from <${e}>.`;function kn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Pe(Sn(()=>e.each,e.children,t||void 0))}function Jt(e){const t=e.keyed,r=Pe(()=>e.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return Pe(()=>{const n=r();if(n){const o=e.children;return typeof o=="function"&&o.length>0?oe(()=>o(t?n:()=>{if(!oe(r))throw _n("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Pn(e,t,r){let n=r.length,o=t.length,l=n,i=0,s=0,d=t[o-1].nextSibling,f=null;for(;i<o||s<l;){if(t[i]===r[s]){i++,s++;continue}for(;t[o-1]===r[l-1];)o--,l--;if(o===i){const c=l<n?s?r[s-1].nextSibling:r[l-s]:d;for(;s<l;)e.insertBefore(r[s++],c)}else if(l===s)for(;i<o;)(!f||!f.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[l-1]&&r[s]===t[o-1]){const c=t[--o].nextSibling;e.insertBefore(r[s++],t[i++].nextSibling),e.insertBefore(r[--l],c),t[o]=r[l]}else{if(!f){f=new Map;let h=s;for(;h<l;)f.set(r[h],h++)}const c=f.get(t[i]);if(c!=null)if(s<c&&c<l){let h=i,m=1,u;for(;++h<o&&h<l&&!((u=f.get(t[h]))==null||u!==c+m);)m++;if(m>c-s){const p=t[i];for(;s<c;)e.insertBefore(r[s++],p)}else e.replaceChild(r[s++],t[i++])}else i++;else t[i++].remove()}}}const Qt="_$DX_DELEGATE";function En(e,t,r,n={}){let o;return Ke(l=>{o=l,t===document?e():x(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function H(e,t,r){let n;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:i.content.firstChild},l=t?()=>oe(()=>document.importNode(n||(n=o()),!0)):()=>(n||(n=o())).cloneNode(!0);return l.cloneNode=l,l}function Ne(e,t=window.document){const r=t[Qt]||(t[Qt]=new Set);for(let n=0,o=e.length;n<o;n++){const l=e[n];r.has(l)||(r.add(l),t.addEventListener(l,Cn))}}function Xt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Le(e,t){t==null?e.removeAttribute("class"):e.className=t}function te(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=l=>o.call(e,r[1],l))}else e.addEventListener(t,r)}function Yt(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let l,i;for(l=0,i=o.length;l<i;l++){const s=o[l];!s||s==="undefined"||t[s]||(Zt(e,s,!1),delete r[s])}for(l=0,i=n.length;l<i;l++){const s=n[l],d=!!t[s];!s||s==="undefined"||r[s]===d||!d||(Zt(e,s,!0),r[s]=d)}return r}function xn(e,t,r){return oe(()=>e(t,r))}function x(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return tt(e,t,n,r);I(o=>tt(e,t(),o,r),n)}function Zt(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,l=n.length;o<l;o++)e.classList.toggle(n[o],r)}function Cn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(o!==void 0?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function tt(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const l=typeof t,i=n!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),i){let s=r[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),r=ve(e,r,n,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||l==="boolean")r=ve(e,r,n);else{if(l==="function")return I(()=>{let s=t();for(;typeof s=="function";)s=s();r=tt(e,s,r,n)}),()=>r;if(Array.isArray(t)){const s=[],d=r&&Array.isArray(r);if(At(s,t,r,o))return I(()=>r=tt(e,s,r,n,!0)),()=>r;if(s.length===0){if(r=ve(e,r,n),i)return r}else d?r.length===0?er(e,s,n):Pn(e,r,s):(r&&ve(e),er(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=ve(e,r,n,t);ve(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function At(e,t,r,n){let o=!1;for(let l=0,i=t.length;l<i;l++){let s=t[l],d=r&&r[l],f;if(!(s==null||s===!0||s===!1))if((f=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))o=At(e,s,d)||o;else if(f==="function")if(n){for(;typeof s=="function";)s=s();o=At(e,Array.isArray(s)?s:[s],Array.isArray(d)?d:[d])||o}else e.push(s),o=!0;else{const c=String(s);d&&d.nodeType===3&&d.data===c?e.push(d):e.push(document.createTextNode(c))}}return o}function er(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function ve(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let l=!1;for(let i=t.length-1;i>=0;i--){const s=t[i];if(o!==s){const d=s.parentNode===e;!l&&!i?d?e.replaceChild(o,s):e.insertBefore(o,r):d&&s.remove()}else l=!0}}else e.insertBefore(o,r);return[o]}function me(e,t){for(let r in e)t(e[r],r)}function F(e,t){e.forEach(t)}function N(e,t){if(!e)throw Error(t)}function ie({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:l,child:i=o||l,scope:s={},meta:d={},family:f={type:"regular"},regional:c}={}){let h=Fe(n),m=Fe(f.links),u=Fe(f.owners),p=[];F(e,g=>g&&G(p,g));let a={id:Mn(),seq:p,next:Fe(i),meta:d,scope:s,family:{type:f.type||"crosslink",links:m,owners:u}};return F(m,g=>G(at(g),a)),F(u,g=>G(ut(g),a)),F(h,g=>G(g.next,a)),c&&ke&&Ce(Ie(ke),[a]),a}function se(e,t,r){let n,o=ee,l=null,i=C;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(l=e.stack),i=he(e)||i,e=e.target),i&&C&&i!==C&&(C=null),Array.isArray(e))for(let p=0;p<e.length;p++)pe("pure",o,W(e[p]),l,t[p],i,n);else pe("pure",o,W(e),l,t,i,n);if(r&&!We)return;let s,d,f,c,h,m,u={isRoot:We,currentPage:ee,scope:C,isWatch:Je,isPure:Qe};We=0;e:for(;c=Bn();){let{idx:p,stack:a,type:g}=c;f=a.node,ee=h=a.page,C=he(a),h?m=h.reg:C&&(m=C.reg);let $=!!h,b=!!C,y={fail:0,scope:f.scope};s=d=0;for(let w=p;w<f.seq.length&&!s;w++){let S=f.seq[w];if(S.order){let{priority:_,barrierID:P}=S.order,T=P?h?`${h.fullID}_${P}`:P:0;if(w!==p||g!==_){P?$t.has(T)||($t.add(T),Tt(w,a,_,P)):Tt(w,a,_);continue e}P&&$t.delete(T)}switch(S.type){case"mov":{let P,T=S.data;switch(T.from){case ge:P=Ie(a);break;case"a":case"b":P=a[T.from];break;case"value":P=T.store;break;case"store":if(m&&!m[T.store.id])if($){let bt=Mr(h,T.store.id);a.page=h=bt,bt?m=bt.reg:b?(Oe(C,T.store,0,1,T.softRead),m=C.reg):m=void 0}else b&&Oe(C,T.store,0,1,T.softRead);P=Be(m&&m[T.store.id]||T.store)}switch(T.to){case ge:a.value=P;break;case"a":case"b":a[T.to]=P;break;case"store":Dn(h,C,f,T.target).current=P}break}case"compute":let _=S.data;if(_.fn){Je=M(f,"op")==="watch",Qe=_.pure;let P=_.safe?(0,_.fn)(Ie(a),y.scope,a):Un(y,_.fn,a);_.filter?d=!P:a.value=P,Je=u.isWatch,Qe=u.isPure}}s=y.fail||d}if(!s){let w=Ie(a),S=he(a);if(F(f.next,_=>{pe("child",h,_,a,w,S)}),S){M(f,"needFxCounter")&&pe("child",h,S.fxCount,a,w,S),M(f,"storeChange")&&pe("child",h,S.storeChange,a,w,S),M(f,"warnSerialize")&&pe("child",h,S.warnSerializeNode,a,w,S);let _=S.additionalLinks[f.id];_&&F(_,P=>{pe("child",h,P,a,w,S)})}}}We=u.isRoot,ee=u.currentPage,C=he(u)}function Sr(e,t="combine"){let r=t+"(",n="",o=0;return me(e,l=>{o<25&&(l!=null&&(r+=n,r+=re(l)?Ft(l).fullName:l.toString()),o+=1,n=", ")}),r+")"}function _r(e,t){let r,n,o=e;if(t){let l=Ft(t);e.length===0?(r=l.path,n=l.fullName):(r=l.path.concat([e]),n=l.fullName.length===0?e:l.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:o,fullName:n,path:r}}function Me(e,t){let r=t?e:e[0];Rr(r);let n=r.or,o=r.and;if(o){let l=t?o:o[0];if(X(l)&&"and"in l){let i=Me(o,t);e=i[0],n={...n,...i[1]}}else e=o}return[e,n]}function B(e,...t){let r=Tr();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function v(e,t){let r=Te({or:t,and:typeof e=="string"?{name:e}:e}),n=(i,...s)=>(ye(!M(n,"derived"),"call of derived event","createEvent"),ye(!Qe,"unit call from pure function","operators like sample"),ee?((d,f,c,h)=>{let m=ee,u=null;if(f)for(u=ee;u&&u.template!==f;)u=ae(u);lr(u);let p=d.create(c,h);return lr(m),p})(n,o,i,s):n.create(i,s)),o=Tr(),l=Object.assign(n,{graphite:ie({meta:Ir(r.actualOp||"event",n,r),regional:1}),create:i=>(se({target:n,params:i,scope:C}),i),watch:i=>jr(n,i),map:i=>St(n,Ee,i,[Z()]),filter:i=>St(n,"filter",i.fn?i:i.fn,[Z(It,1)]),filterMap:i=>St(n,"filterMap",i,[Z(),Q(s=>!U(s),1)]),prepend(i){let s=v("* → "+n.shortName,{parent:ae(n)});return B("eventPrepend",W(s)),de(s,n,[Z()],"prepend",i),Fr(n,s),s}});return r!=null&&r.domain&&r.domain.hooks.event(l),Y(l,"id",l.graphite.id),Or(l.graphite),l}function tr(e,t,r,n){return nt(r,t,"first argument"),N(z(n),"second argument should be a function"),ye(!M(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),F(Array.isArray(r)?r:[r],o=>{e.off(o),rt(e).set(o,zr(Br(o,e,"on",Fn,n)))}),e}function k(e,t){let r=Te(t),n=be(e),o=v({named:"updates",derived:1});B("storeBase",n);let l=n.id,i={subscribers:new Map,updates:o,defaultState:e,stateRef:n,getState(){let u,p=n;if(ee){let a=ee;for(;a&&!a.reg[l];)a=ae(a);a&&(u=a)}return!u&&C&&(Oe(C,n,1),u=C),u&&(p=u.reg[l]),Be(p)},setState:u=>se({target:i,params:u,defer:1,scope:C}),reset:(...u)=>(F(u,p=>tr(i,".reset",p,()=>i.defaultState)),i),on:(u,p)=>tr(i,".on",u,p),off(u){let p=rt(i).get(u);return p&&(p(),rt(i).delete(u)),i},map(u,p){let a,g;X(u)&&(a=u,u=u.fn),ye(U(p),"second argument of store.map","updateFilter");let $=i.getState();U($)||(g=u($,p));let b=k(g,{name:`${i.shortName} → *`,derived:1,and:a}),y=Br(i,b,Ee,Ot,u);return ot(q(b),{type:Ee,fn:u,from:n}),q(b).noInit=1,B("storeMap",n,y),b},watch(u,p){if(!p||!re(u)){let a=jr(i,u);return B("storeWatch",n,u)||u(i.getState()),a}return N(z(p),"second argument should be a function"),u.watch(a=>p(i.getState(),a))}},s=Ir("store",i,r),d=i.defaultConfig.updateFilter;i.graphite=ie({scope:{state:n,fn:d},node:[Q((u,p,a)=>(a.scope&&!a.scope.reg[n.id]&&(a.b=1),u)),ne(n),Q((u,p,{a,b:g})=>!U(u)&&(u!==a||g),1),d&&Z(Ot,1),J({from:ge,target:n})],child:o,meta:{...s,defaultState:e},regional:1}),Y(i,"id",i.graphite.id),Y(i,"rootStateRefId",l);let f=M(i,"serialize"),c=M(i,"derived"),h=f==="ignore",m=M(i,"sid");return m&&(Y(i,"storeChange",1),n.sid=m),m||h||c||Y(i,"warnSerialize",1),N(c||!U(e),"current state can't be undefined, use null instead"),Ce(i,[o]),r!=null&&r.domain&&r.domain.hooks.store(i),c||(i.reinit=v({named:"reinit"}),i.reset(i.reinit)),n.meta=i.graphite.meta,Or(i.graphite),i}function ce(...e){let t,r,n;[e,n]=Me(e);let o,l,i,s=e[e.length-1];if(z(s)?(r=e.slice(0,-1),t=s):r=e,r.length===1){let d=r[0];D(d)||(o=d,l=1)}if(!l&&(o=r,t)){i=1;let d=t;t=f=>d(...f)}return N(X(o),"shape should be an object"),Wn(Array.isArray(o),!i,o,n,t)}function kr(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}function jt(e,t={}){let r=Te(z(e)?{handler:e}:e,t),n=v(z(e)?{handler:e}:e,{...t,actualOp:"effect"}),o=W(n);Y(o,"op",n.kind="effect"),n.use=u=>(N(z(u),".use argument should be a function"),c.scope.handler=u,n),n.use.getCurrent=()=>c.scope.handler;let l=n.finally=v({named:"finally",derived:1}),i=n.done=l.filterMap({named:"done",fn({status:u,params:p,result:a}){if(u==="done")return{params:p,result:a}}}),s=n.fail=l.filterMap({named:"fail",fn({status:u,params:p,error:a}){if(u==="fail")return{params:p,error:a}}}),d=n.doneData=i.map({named:"doneData",fn:({result:u})=>u}),f=n.failData=s.map({named:"failData",fn:({error:u})=>u}),c=ie({scope:{handler:n.defaultConfig.handler||(()=>N(0,`no handler used in ${n.getType()}`))},node:[Q((u,p,a)=>{let g=p.handler,$=he(a);if($){let b=$.handlers.unitMap.get(n)||$.handlers.sidMap[n.sid];b&&(g=b)}return u.handler=g,u},0,1),Q(({params:u,req:p,handler:a,args:g=[u]},$,b)=>{let y=Dr(b),w=it(u,p,1,l,b,y),S=it(u,p,0,l,b,y),[_,P]=qr(a,S,g);_&&(X(P)&&z(P.then)?P.then(w,S):w(P))},0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=c,G(o.seq,Q((u,{runner:p},a)=>{let g=ae(a)?{params:u,req:{rs($){},rj($){}}}:u;return a.meta||(a.meta={fxID:zn()}),se({target:p,params:g,defer:1,scope:he(a),meta:a.meta}),g.params},0,1)),n.create=u=>{let p=kr(),a={params:u,req:p};if(C&&!Je){let g=C;p.req.finally(()=>{qn(g)}).catch(()=>{})}return se({target:n,params:a,scope:C}),p.req};let h=n.inFlight=k(0,{serialize:"ignore",named:(M(n,"name")||n.graphite.id)+".inFlight"}).on(n,u=>u+1).on(l,u=>u-1).map({fn:u=>u,named:"inFlight"});Y(l,"needFxCounter","dec"),Y(n,"needFxCounter",1);let m=n.pending=h.map({fn:u=>u>0,named:"pending"});return Ce(n,[l,i,s,d,f,m,h]),r!=null&&r.domain&&r.domain.hooks.effect(n),n}function rr(e){let t;[e,t]=Me(e,1);let{source:r,effect:n,mapParams:o}=e,l=jt(e,t);Y(l,"attached",1);let i,{runner:s}=W(l).scope,d=Q((c,h,m)=>{let u,{params:p,req:a,handler:g}=c,$=l.finally,b=Dr(m),y=it(p,a,0,$,m,b),w=m.a,S=xe(g),_=1;if(o?[_,u]=qr(o,y,[p,w]):u=r&&S?w:p,_){if(!S)return c.args=[w,u],1;se({target:g,params:{params:u,req:{rs:it(p,a,1,$,m,b),rj:y}},page:m.page,defer:1,meta:m.meta})}},1,1);if(r){let c;D(r)?(c=r,Ce(c,[l])):(c=ce(r),Ce(l,[c])),i=[ne(q(c)),d]}else i=[d];s.seq.splice(1,0,...i),l.use(n);let f=ae(n);return f&&(Object.assign(Ft(l),_r(l.shortName,f)),l.defaultConfig.parent=f),Fr(n,l,"effect"),l}function Pr(e,t){nt(e,"merge","first argument");let r=v({name:Sr(e,"merge"),derived:1,and:t});return de(e,r,[],"merge"),r}function Er(e,t){let r=0;return F(Kn,n=>{n in e&&(N(e[n]!=null,Hr(t,n)),r=1)}),r}function E(...e){let t,r,n,o,[[l,i,s],d]=Me(e),f=1;return U(i)&&X(l)&&Er(l,"sample")&&(i=l.clock,s=l.fn,f=!l.greedy,o=l.filter,t=l.target,r=l.name,n=l.sid,l=l.source),Ht("sample",i,l,o,t,s,r,d,f,1,0,n)}function je(...e){let[[t,r],n]=Me(e);return r||(r=t,t=r.source),Er(r,"guard"),Ht("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function An(e,t,r){if(D(e))return ye(0,"restore($store)"),e;if(xr(e)||xe(e)){let o=ae(e),l=k(t,{parent:o,name:e.shortName,and:r});return de(xe(e)?e.doneData:e,l),o&&o.hooks.store(l),l}let n=Array.isArray(e)?[]:{};return me(e,(o,l)=>n[l]=D(o)?o:k(o,{name:l})),n}function On(...e){let t,r,n="split",[[o,l],i]=Me(e),s=!l;s&&(t=o.cases,l=o.match,r=o.clock,o=o.source);let d=D(l),f=!re(l)&&z(l),c=!d&&!f&&X(l);N(re(o),"source must be a unit"),t||(t={}),s?me(t,(a,g)=>Nr(n,a,`cases.${g}`)):(N(c,"match should be an object"),me(l,(a,g)=>t[g]=v({derived:1,named:`cases.${g}`,and:i})),t.__=v({derived:1,named:"cases.__",and:i}));let h,m=new Set([].concat(o,r||[],Object.values(t))),u=Object.keys(d||f?t:l);if(d||f)d&&m.add(l),h=[d&&ne(q(l),0,1),Ae({safe:d,filter:1,pure:!d,fn(a,g,$){let b=String(d?$.a:l(a));kt(g,nr(u,b)?b:"__",a,$)}})];else if(c){let a=be({});a.type="shape";let g,$=[];me(l,(b,y)=>{if(re(b)){g=1,G($,y),m.add(b);let w=de(b,[],[ne(a),Q((S,_,{a:P})=>P[y]=S)]);if(D(b)){a.current[y]=b.getState();let S=q(b);ot(a,{from:S,field:y,type:"field"}),B("splitMatchStore",S,w)}}}),g&&B("splitBase",a),h=[g&&ne(a,0,1),Z((b,y,w)=>{for(let S=0;S<u.length;S++){let _=u[S];if(nr($,_)?w.a[_]:l[_](b))return void kt(y,_,b,w)}kt(y,"__",b,w)},1)]}else N(0,"expect match to be unit, function or object");let p=ie({meta:{op:n},parent:r?[]:o,scope:t,node:h,family:{owners:Array.from(m)},regional:1});if(r&&Ht(n,r,o,null,p,null,n,i,0,0,0),!s)return t}function Tn(e,{scope:t,safe:r}={}){N(t||C||r,"scopeBind cannot be called outside of forked .watch");let n=t||C;return xe(e)?o=>{let l=kr();return se({target:e,params:{params:o,req:l},scope:n}),l.req}:o=>(se({target:e,params:o,scope:n}),o)}let Rn=typeof Symbol<"u"&&Symbol.observable||"@@observable",Ee="map",ge="stack",W=e=>e.graphite||e,at=e=>e.family.owners,ut=e=>e.family.links,q=e=>e.stateRef,Ie=e=>e.value,rt=e=>e.subscribers,ae=e=>e.parent,he=e=>e.scope,M=(e,t)=>W(e).meta[t],Y=(e,t,r)=>W(e).meta[t]=r,Ft=e=>e.compositeName,re=e=>(z(e)||X(e))&&"kind"in e;const Ue=e=>t=>re(t)&&t.kind===e;let D=Ue("store"),xr=Ue("event"),xe=Ue("effect"),Cr=Ue("domain"),Nn=Ue("scope");var _e={__proto__:null,unit:re,store:D,event:xr,effect:xe,domain:Cr,scope:Nn,attached:e=>xe(e)&&M(e,"attached")==1};let nr=(e,t)=>e.includes(t),Ge=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},G=(e,t)=>e.push(t),ye=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ct=()=>{let e=0;return()=>""+ ++e};let Ln=ct(),Ar=ct(),Mn=ct(),zn=ct(),ke=null,Or=e=>{},Tr=()=>ke,jn=e=>(e&&ke&&ke.sidRoot&&(e=`${ke.sidRoot}|${e}`),e),Ce=(e,t)=>{let r=W(e);F(t,n=>{let o=W(n);r.family.type!=="domain"&&(o.family.type="crosslink"),G(at(o),r),G(ut(r),o)})},Fe=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(W),X=e=>typeof e=="object"&&e!==null,z=e=>typeof e=="function",U=e=>e===void 0,Rr=e=>N(X(e)||z(e),"expect first argument be an object");const or=(e,t,r,n)=>N(!(!X(e)&&!z(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let nt=(e,t,r)=>{Array.isArray(e)?F(e,(n,o)=>or(n,t,`${o} item of ${r}`,"")):or(e,t,r," or array of units")},Nr=(e,t,r="target")=>F(Fe(t),n=>ye(!M(n,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore")),Ot=(e,{fn:t},{a:r})=>t(e,r),Fn=(e,{fn:t},{a:r})=>t(r,e),It=(e,{fn:t})=>t(e);const Lr=(e,t,r,n)=>{let o={id:Ar(),type:e,data:t};return r&&(o.order={priority:r},n&&(o.order.barrierID=++In)),o};let In=0,J=({from:e="store",store:t,target:r,to:n=r?"store":ge,batch:o,priority:l})=>Lr("mov",{from:e,store:t,to:n,target:r},l,o),Ae=({fn:e,batch:t,priority:r,safe:n=0,filter:o=0,pure:l=0})=>Lr("compute",{fn:e,safe:n,filter:o,pure:l},r,t),Bt=({fn:e})=>Ae({fn:e,priority:"effect"}),Q=(e,t,r)=>Ae({fn:e,safe:1,filter:t,priority:r&&"effect"}),ne=(e,t,r)=>J({store:e,to:t?ge:"a",priority:r&&"sampler",batch:1}),Z=(e=It,t)=>Ae({fn:e,pure:1,filter:t}),vt={mov:J,compute:Ae,filter:({fn:e,pure:t})=>Ae({fn:e,filter:1,pure:t}),run:Bt},be=e=>({id:Ar(),current:e}),Be=({current:e})=>e,ot=(e,t)=>{e.before||(e.before=[]),G(e.before,t)},Se=null;const qt=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Rt(e.v.type)>Rt(t.v.type))&&(r=e,e=t,t=r),r=qt(e.r,t),e.r=e.l,e.l=r,e},Dt=[];let ir=0;for(;ir<6;)G(Dt,{first:null,last:null,size:0}),ir+=1;const Bn=()=>{for(let e=0;e<6;e++){let t=Dt[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=Se.v;return Se=qt(Se.l,Se.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},pe=(e,t,r,n,o,l,i)=>Tt(0,{a:null,b:null,node:r,parent:n,value:o,page:t,scope:l,meta:i},e),Tt=(e,t,r,n=0)=>{let o=Rt(r),l=Dt[o],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};o===3||o===4?Se=qt(Se,i):(l.size===0?l.first=i:l.last.r=i,l.last=i),l.size+=1},Rt=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},$t=new Set;let C,We=1,Je=0,Qe=0,ee=null,qn=e=>{C=e},lr=e=>{ee=e};const Mr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ae(e);if(e)return e}return null};let Dn=(e,t,r,n,o)=>{let l=Mr(e,n.id);return l?l.reg[n.id]:t?(Oe(t,n,o),t.reg[n.id]):n};const Hn=e=>e;let Oe=(e,t,r,n,o)=>{var l;let i=e.reg,s=t.sid,d=t==null||(l=t.meta)===null||l===void 0?void 0:l.serialize,f=e.fromSerialize&&d!=="ignore"&&d?.read||Hn;if(i[t.id])return;let c={id:t.id,current:t.current,meta:t.meta};if(c.id in e.values.idMap)c.current=e.values.idMap[c.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap))c.current=f(e.values.sidMap[s]);else if(t.before&&!o){let h=0,m=r||!t.noInit||n;F(t.before,u=>{switch(u.type){case Ee:{let p=u.from;if(p||u.fn){p&&Oe(e,p,r,n);let a=p&&i[p.id].current;m&&(c.current=u.fn?u.fn(a):a)}break}case"field":h||(h=1,c.current=Array.isArray(c.current)?[...c.current]:{...c.current}),Oe(e,u.from,r,n),m&&(c.current[u.field]=i[i[u.from.id].id].current)}})}s&&(e.sidIdMap[s]=t.id),i[t.id]=c};const Un=(e,t,r)=>{try{return t(Ie(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let Te=(e,t={})=>(X(e)&&(Te(e.or,t),me(e,(r,n)=>{U(r)||n==="or"||n==="and"||(t[n]=r)}),Te(e.and,t)),t);const sr=(e,t)=>{Ge(e.next,t),Ge(at(e),t),Ge(ut(e),t)},Nt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let o=ut(e);for(;n=o.pop();)sr(n,e),(t||r&&M(e,"op")!=="sample"||n.family.type==="crosslink")&&Nt(n,t,M(n,"op")!=="on"&&r);for(o=at(e);n=o.pop();)sr(n,e),r&&n.family.type==="crosslink"&&Nt(n,t,M(n,"op")!=="on"&&r)},ze=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),D(e))ze(rt(e));else if(Cr(e)){r=1;let n=e.history;ze(n.events),ze(n.effects),ze(n.stores),ze(n.domains)}Nt(W(e),!!t,r)},zr=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},de=(e,t,r,n,o)=>ie({node:r,parent:e,child:t,scope:{fn:o},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),jr=(e,t)=>(N(z(t),".watch argument should be a function"),zr(ie({scope:{fn:t},node:[Bt({fn:It})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Fr=(e,t,r="event")=>{ae(e)&&ae(e).hooks[r](t)},Ir=(e,t,r)=>{let n=Te(r),o=e==="domain",l=Ln(),{sid:i=null,named:s=null,domain:d=null,parent:f=d}=n,c=s||n.name||(o?"":l),h=_r(c,f),m={op:t.kind=e,name:t.shortName=c,sid:t.sid=jn(i),named:s,unitId:t.id=l,serialize:n.serialize,derived:n.derived,config:n};return t.parent=f,t.compositeName=h,t.defaultConfig=n,t.thru=u=>(ye(0,"thru","js pipe"),u(t)),t.getType=()=>h.fullName,!o&&(t.subscribe=u=>(Rr(u),t.watch(z(u)?u:p=>u.next&&u.next(p))),t[Rn]=()=>t),m};const St=(e,t,r,n)=>{let o;X(r)&&(o=r,r=r.fn);let l=v({name:`${e.shortName} → *`,derived:1,and:o});return de(e,l,n,t,r),l},Br=(e,t,r,n,o)=>{let l=q(t),i=J({store:l,to:"a",priority:"read"});r===Ee&&(i.data.softRead=1);let s=[i,Z(n)];return B("storeOnMap",l,s,D(e)&&q(e)),de(e,t,s,r,o)},Wn=(e,t,r,n,o)=>{let l=e?p=>[...p]:p=>({...p}),i=e?[]:{},s=l(i),d=be(s),f=be(1);d.type=e?"list":"shape",d.noInit=1,B("combineBase",d,f);let c=k(s,{name:Sr(r),derived:1,and:n}),h=q(c);h.noInit=1,Y(c,"isCombine",1);let m=ne(d);m.order={priority:"barrier"};let u=[Q((p,a,g)=>(g.scope&&!g.scope.reg[d.id]&&(g.c=1),p)),m,J({store:f,to:"b"}),Q((p,{key:a},g)=>{if(g.c||p!==g.a[a])return t&&g.b&&(g.a=l(g.a)),g.a[a]=p,1},1),J({from:"a",target:d}),J({from:"value",store:0,target:f}),J({from:"value",store:1,target:f,priority:"barrier",batch:1}),ne(d,1),o&&Z()];return me(r,(p,a)=>{if(!D(p))return N(!re(p)&&!U(p),`combine expects a store in a field ${a}`),void(s[a]=i[a]=p);i[a]=p.defaultState,s[a]=p.getState();let g=de(p,c,u,"combine",o);g.scope.key=a;let $=q(p);ot(d,{type:"field",field:a,from:$}),B("combineField",$,g)}),c.defaultShape=r,ot(h,{type:Ee,from:d,fn:o}),c.defaultState=o?h.current=o(s):i,c};let qr=(e,t,r)=>{try{return[1,e(...r)]}catch(n){return t(n),[0,null]}},Dr=e=>{let t=he(e),r={ref:t};return t&&G(t.activeEffects,r),r},it=(e,t,r,n,o,l)=>i=>{l.ref&&Ge(l.ref.activeEffects,l),se({target:[n,Vn],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:o.page,scope:l.ref,meta:o.meta})};const Vn=ie({node:[Bt({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Kn=["source","clock","target"],Hr=(e,t)=>e+`: ${t} should be defined`;let Ht=(e,t,r,n,o,l,i,s,d,f,c,h)=>{let m=!!o;N(!U(r)||!U(t),Hr(e,"either source or clock"));let u=0;U(r)?u=1:re(r)||(r=ce(r)),U(t)?t=r:(nt(t,e,"clock"),Array.isArray(t)&&(t=Pr(t))),u&&(r=t),s||i||(i=r.shortName);let p="none";(c||n)&&(re(n)?p="unit":(N(z(n),"`filter` should be function or unit"),p="fn")),o?(nt(o,e,"target"),Nr(e,o)):p==="none"&&f&&D(r)&&D(t)?o=k(l?l(Be(q(r)),Be(q(t))):Be(q(r)),{name:i,sid:h,or:s}):(o=v({name:i,derived:1,or:s}),B("sampleTarget",W(o)));let a=be(),g=[];if(p==="unit"){let[w,S]=ar(n,o,t,a,e);g=[..._t(S),..._t(w)]}let[$,b]=ar(r,o,t,a,e),y=de(t,o,[B("sampleSourceLoader"),J({from:ge,target:a}),..._t(b),ne($,1,d),...g,ne(a),p==="fn"&&Z((w,S,{a:_})=>n(w,_),1),l&&Z(Ot),B("sampleSourceUpward",m)],e,l);return Ce(r,[y]),Object.assign(y.meta,s,{joint:1}),o};const _t=e=>[ne(e),Q((t,r,{a:n})=>n,1)],ar=(e,t,r,n,o)=>{let l=D(e),i=l?q(e):be(),s=be(l);return l||ie({parent:e,node:[J({from:ge,target:i}),J({from:"value",store:1,target:s})],family:{owners:[e,t,r],links:t},meta:{op:o},regional:1}),B("sampleSource",s,i,n),[i,s]},kt=(e,t,r,n)=>{let o=e[t];o&&se({target:o,params:Array.isArray(o)?o.map(()=>r):r,defer:1,stack:n})};function Ur(){return{width:window.visualViewport?.width||600,height:window.visualViewport?.height||400}}function ur(e,t,r){return{x:t.x-e.col*r,y:t.y-e.row*r}}function Gn(e){let t=new Map;return e.forEach(({col:r,row:n})=>{t.has(r)||t.set(r,new Map),t.get(r).set(n,1)}),t}function Jn(e){let t=0,r=0,n=0;return e.size===0?{col:t,row:r}:(e.forEach((o,l)=>{n+=o.size,o.forEach((i,s)=>{t+=l,r+=s})}),{col:Math.round(t/n),row:Math.round(r/n)})}function Wr(e,t){try{let r=localStorage.getItem(e);return r===null?t:r}catch(r){return console.error(r),t}}function Vr(e,t){try{localStorage.setItem(e,t)}catch(r){console.error(r)}}function Qn(){return{currentBp:k(null)}}const $e=Ur();function Xn(e){const t="cellSize",r=[1,100];let n=+Wr(t,"10")||10;const o=k({size:n,prevSize:n}),l=k({width:$e.width,height:$e.height}),i=o.map(({size:h},m)=>({height:Math.ceil($e.height/h),width:Math.ceil($e.width/h),prevHeight:m&&m.height||Math.ceil($e.height/h),prevWidth:m&&m.width||Math.ceil($e.width/h)})),s=v(),d=v();let f=0;return document.addEventListener("wheel",h=>{f+=h.deltaY,f>20&&(d(),f=0),f<-20&&(s(),f=0)}),o.on(E({clock:d,filter:e}),({size:h})=>({size:Math.max(r[0],h-1),prevSize:h})).on(E({clock:s,filter:e}),({size:h})=>({size:Math.max(r[0],h+1),prevSize:h})),o.watch(h=>{Vr(t,String(h.size))}),{options:r,$cellSize:o,$fieldSize:i,plus:s,minus:d,$viewPortSize:l}}function Yn(){const e=v(),t=v(),r=k(null);return r.on(t,()=>null).on(e,(o,l)=>l),{$hoveredXY:r,fieldMouseLeaved:t,fieldMouseMoved:e}}function Zn(e,t){const r=k(null),n=k(null),o=k(null),l=v(),i=v(),s=v(),d=v(),f=v(),c=v(),h=v();function m(){}const u=e.map(a=>a!==null),p=e.map(a=>a==null);return o.on(l,()=>Date.now()),E({source:t,clock:l,filter:u,target:r}),E({source:e,clock:l,filter:u,target:n}),E({source:{currentHovered:e,initHovered:n,startTime:o},clock:i,filter:a=>(console.log("1111",!!a.initHovered,!!a.currentHovered,!!a.startTime),!!a.initHovered&&!!a.currentHovered&&!!a.startTime),fn:({currentHovered:a,initHovered:g,startTime:$})=>({start:a,finish:g}),target:s}),E({source:{currentHovered:e,initFocus:r,initHovered:n},clock:e,filter:a=>(console.log("222",!!a.initHovered,!!a.initFocus,!!a.currentHovered),!!a.initHovered&&!!a.initFocus&&!!a.currentHovered),fn:({currentHovered:a,initHovered:g,initFocus:$})=>({x:$.x+(a.x-g.x),y:$.y+(a.y-g.y)}),target:h}),On({source:s,match:a=>a.start.x===a.finish.x&&a.start.y===a.finish.y?"click":"dragEnd",cases:{click:f,dragEnd:c}}),E({clock:f,fn:a=>({coords:a.start}),target:d}),r.reset(s,p),n.reset(s,p),o.reset(s,p),{focusMoved:h,initEvents:m,clicked:d,onMUp:i,onMDown:l}}function Kr(e){var{timeout:t,start:r,stop:n,leading:o=!1,trailing:l=!1}=e,i=r??v({name:"setup",sid:"-ajedhm"}),s=n??v({name:"teardown",sid:"-ryi8gr"}),d=v({name:"tick",sid:"-cw8a02"}),f=k(!1,{name:"$isRunning",sid:"-5gspmy"}),c=eo(t),h=f.map(b=>!b),m=v({name:"saveTimeout",sid:"satd6r"}),u=k(null,{name:"$timeoutId",sid:"hehxq7"}).on(m,(b,y)=>{var{timeoutId:w}=y;return w}),p=k(()=>{},{name:"$rejecter",sid:"-sc3eh9"}).on(m,(b,y)=>{var{reject:w}=y;return w}),a=rr({and:{source:{timeout:c,running:f},effect:b=>{var{timeout:y,running:w}=b;return w?new Promise((S,_)=>{var P=setTimeout(S,y);m({timeoutId:P,reject:_})}):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=rr({and:{source:{timeoutId:u,rejecter:p},effect:b=>{var{timeoutId:y,rejecter:w}=b;w(),y&&clearTimeout(y)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if(je({and:[{clock:i,source:c,filter:h,target:a}],or:{sid:"-us95i7"}}),o){var $=je({and:[{clock:i,filter:h}],or:{name:"onReady",sid:"farho0"}});E({and:[{clock:$,target:d}],or:{sid:"-ubrbnn"}})}return E({and:[{clock:i,fn:()=>!0,target:f}],or:{sid:"-ua3xxa"}}),je({and:[{clock:a.done,source:c,filter:f,target:a}],or:{sid:"6lcmx8"}}),je({and:[{clock:a.done,filter:f,target:d.prepend(()=>{})}],or:{sid:"6p772r"}}),l&&E({and:[{clock:s,target:d}],or:{sid:"75p0xb"}}),f.on(s,()=>!1),E({and:[{clock:s,target:g}],or:{sid:"7ln232"}}),{tick:d,isRunning:f,"@@trigger":()=>({setup:i,teardown:s,fired:d})}}function eo(e){if(_e.store(e,{sid:"8i2x6t"}))return e;if(typeof e=="number")return k(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}function cr(e){var{source:t,timeout:r,target:n=v({name:"target",sid:"r328r6"},{name:"target",sid:"r328r6"})}=e;if(!_e.unit(t))throw new TypeError("source must be unit from effector");var o=to(r),l=jt(f=>new Promise(c=>setTimeout(c,f)),{name:"timerFx",sid:"-pyjx8k"}),i=k(null,{and:{serialize:"ignore"},name:"$payload",sid:"hinjft"}).on(t,(f,c)=>c),s=v({name:"triggerTick",sid:"-sf8sou"}),d=k(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"-m0cqc"}).on(s,()=>!1).on(n,()=>!0);return je({and:[{clock:t,filter:d,target:s}],or:{sid:"-hzhj9b"}}),E({and:[{source:o,clock:s,target:l}],or:{sid:"-hkn38k"}}),E({and:[{source:i,clock:l.done,target:n}],or:{sid:"-hhcboe"}}),n}function to(e){if(_e.store(e,{sid:"-h0ap6r"}))return e;if(typeof e=="number"){if(e<0||!Number.isFinite(e))throw new Error('timeout must be positive number or zero. Received: "'.concat(e,'"'));return k(e,{and:{name:"$timeout"},sid:"-h97n10"})}throw new TypeError('timeout parameter should be number or Store. "'.concat(typeof e,'" was passed'))}function ro(e,t,r){const n=k(0),o=k({prev:0,delta:0}).reset(t),l=v(),i=v(),s=cr({source:l,timeout:100}),d=cr({source:r,timeout:300}),f=Kr({timeout:1e3,start:i});n.on(s,(m,u)=>u),E({source:{stepsPerSec:o,steps:e},clock:f.tick,fn:({stepsPerSec:m,steps:u})=>({prev:u,delta:u-m.prev}),target:o});const c=[];i(),h();function h(){window.requestAnimationFrame(()=>{const m=performance.now();for(;c.length>0&&c[0]<=m-1e3;)c.shift();c.push(m),h()}),l(c.length)}return{$fps:n,$stepsPerSec:o.map(m=>m.delta),$time:An(d,0)}}function no(e,t){const r="expectedStepsPerSec";let n=+Wr(r,"10")||10;const o=v(),l=v(),i=v(),s=v(),d=v(),f=v(),c=k(!1),h=k(0),m=[1,200],u=k(n),p=u.map(y=>1e3/y),a=v(),g=v(),$=k(null),b=Kr({timeout:p,start:l,stop:Pr([s,i,f])});return E({clock:[b.tick,l,d],filter:ce(c,t,(y,w)=>y&&!w),target:o}),E({clock:d,target:o}),E({source:e,clock:l,fn:y=>new Map(y),target:$}),c.on(l,()=>!0).on([i,s],()=>!1).reset(f),u.on(a,y=>{if(y===1)return 5;let w=y+5;return w>m[1]?m[1]:w}).on(g,y=>{let w=y-5;return w<1?1:w}),$.on(f,()=>null),h.on(o,y=>y+1).on(i,()=>0).reset(f),u.watch(y=>{Vr(r,String(y))}),{$currentStep:h,$expectedStepsPerSec:u,$isRunning:c,$startFauna:$,start:l,stop:i,pause:s,incExpectedStepsPerSec:a,decExpectedStepsPerSec:g,speedRange:m,gameTick:o,reset:f,oneStep:d}}const ft=Yn(),R=Xn(ft.$hoveredXY.map(e=>!!e));Qn();const V=k({fauna:Gn([]),time:0,size:0}),oo=k([]),Gr=k(!1),Ut=v(),dt=v();Gr.on(Ut,()=>!0).on(dt,()=>!1);const j=no(V.map(e=>e.fauna),Gr),Pt=ro(j.$currentStep,j.reset,dt.map(e=>e.time)),ue=k({x:0,y:0}),io=v(),Wt=v(),Vt=v(),Jr=Zn(ft.$hoveredXY,ue);E({source:[ue,ft.$hoveredXY],clock:R.$cellSize,fn:([e,t],{size:r,prevSize:n})=>{if(t){let o={col:(t.x-e.x)/n,row:(t.y-e.y)/n};return ur(o,t,r)}else{let o=Ur(),l={x:o.width/2,y:o.height/2},i={col:(l.x-e.x)/n,row:(l.y-e.y)/n};return ur(i,l,r)}},target:ue});const Qr=ce(V,ue,R.$cellSize,R.$viewPortSize,({fauna:e},t,{size:r},n)=>{const o=[];return e.forEach((l,i)=>{l.forEach((s,d)=>{const f=i*r+t.x,c=d*r+t.y;f>=0&&f<n.width&&c>=0&&c<n.height&&o.push([f,c])})}),o}),lo=ce(Qr,V,(e,t)=>({fieldCellsAmount:e.length,faunaCellsAmount:t.size})),so=ce(oo,R.$fieldSize,R.$cellSize,ue,(e,{width:t,height:r},{size:n},o)=>{const l=[];return e.forEach(({col:i,row:s,label:d})=>{const f=i+o.x/n,c=s+o.y/n;f>=0&&f<t&&c>=0&&c<r&&l.push({col:f,row:c,label:d})}),l}),ao=ce(Qr,R.$cellSize,(e,t)=>({size:t,field:e})),uo=ce(ft.$hoveredXY,R.$cellSize,ue,(e,{size:t},r)=>{if(e){const n=Math.floor((e.x-r.x)/t),o=Math.floor((e.y-r.y)/t),l=(n*t+r.x).toFixed(0),i=(o*t+r.y).toFixed(0);return[{x:l,y:i}]}return[]}),co=ce(so,R.$cellSize,(e,{size:t})=>e.map(({row:r,col:n,label:o})=>({y:r*t+"px",x:n*t+"px",label:o})));E({source:V,clock:j.gameTick,fn:e=>e.fauna,target:Ut});V.on(dt,(e,t)=>t).reset(Vt);ue.on(Jr.focusMoved,(e,t)=>t).reset(io);E({source:{faunaData:V,fieldSize:R.$fieldSize,cellSize:R.$cellSize},clock:Wt,fn:({faunaData:e,fieldSize:t,cellSize:r})=>{const n=Jn(e.fauna);return{x:(t.width/2-n.col)*r.size,y:(t.height/2-n.row)*r.size}},target:ue});E({source:{faunaData:V,screenOffsetXY:ue,cellSize:R.$cellSize},clock:Jr.clicked,fn:({faunaData:e,screenOffsetXY:t,cellSize:{size:r}},{coords:n})=>{const o=new Map(e.fauna),l=Math.floor((n.x-t.x)/r),i=Math.floor((n.y-t.y)/r);return o.has(l)||o.set(l,new Map),o.get(l).has(i)?o.get(l).delete(i):o.get(l).set(i,1),{...e,fauna:o}},target:V});const pt=k(""),Xr=v(),Kt=v(),ht=v();v();v();pt.on(Xr,(e,t)=>t);var qe={},Yr={},mt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNone=e.isSome=e.None=e.Some=e.OptionType=void 0,e.OptionType={Some:Symbol(":some"),None:Symbol(":none")};function t(i){return typeof i>"u"?n():r(i)}e.Some=t,e.None=n();function r(i){return{type:e.OptionType.Some,isSome(){return!0},isNone(){return!1},match(s){return s.some(i)},map(s){return r(s(i))},andThen(s){return s(i)},or(s){return this},and(s){return s},unwrapOr(s){return i},unwrap(){return i}}}function n(){return{type:e.OptionType.None,isSome(){return!1},isNone(){return!0},match(i){const{none:s}=i;return typeof s=="function"?s():s},map(i){return n()},andThen(i){return n()},or(i){return i},and(i){return n()},unwrapOr(i){if(i==null)throw new Error("Cannot call unwrapOr with a missing value.");return i},unwrap(){throw new ReferenceError("Trying to unwrap None.")}}}function o(i){return i.isSome()}e.isSome=o;function l(i){return i.isNone()}e.isNone=l})(mt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRight=e.isLeft=e.Right=e.Left=e.EitherType=void 0;const t=mt;e.EitherType={Left:Symbol(":left"),Right:Symbol(":right")};function r(i){return{type:e.EitherType.Left,isLeft(){return!0},isRight(){return!1},left(){return(0,t.Some)(i)},leftAndThen(s){return s(i)},right(){return t.None},rightAndThen(s){return r(i)},unwrap(){return i},unwrapLeft(){return i},unwrapLeftOr(s){return i},unwrapLeftOrElse(s){return i},unwrapRight(){throw new ReferenceError("Cannot unwrap Right value of Either.Left")},unwrapRightOr(s){return s},unwrapRightOrElse(s){return s(i)},match(s){return s.left(i)},map(s){return r(s(i))},mapLeft(s){return r(s(i))},mapRight(s){return r(i)}}}e.Left=r;function n(i){return{type:e.EitherType.Right,isLeft(){return!1},isRight(){return!0},left(){return t.None},leftAndThen(s){return n(i)},right(){return(0,t.Some)(i)},rightAndThen(s){return s(i)},unwrap(){return i},unwrapLeft(){throw new ReferenceError("Cannot unwrap Left value of Either.Right")},unwrapLeftOr(s){return s},unwrapLeftOrElse(s){return s(i)},unwrapRight(){return i},unwrapRightOr(s){return i},unwrapRightOrElse(s){return i},match(s){return s.right(i)},map(s){return n(s(i))},mapLeft(s){return n(i)},mapRight(s){return n(s(i))}}}e.Right=n;function o(i){return i.isLeft()}e.isLeft=o;function l(i){return i.isRight()}e.isRight=l})(Yr);var Zr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isErr=e.isOk=e.Err=e.Ok=e.ResultType=void 0;const t=mt;e.ResultType={Ok:Symbol(":ok"),Err:Symbol(":err")};function r(i){return{type:e.ResultType.Ok,isOk(){return!0},isErr(){return!1},ok(){return(0,t.Some)(i)},err(){return t.None},unwrap(){return i},unwrapOr(s){return i},unwrapOrElse(s){return i},unwrapErr(){throw new ReferenceError("Cannot unwrap Err value of Result.Ok")},match(s){return s.ok(i)},map(s){return r(s(i))},mapErr(s){return r(i)},andThen(s){return s(i)},orElse(s){return r(i)}}}e.Ok=r;function n(i){return{type:e.ResultType.Err,isOk(){return!1},isErr(){return!0},ok(){return t.None},err(){return(0,t.Some)(i)},unwrap(){throw new ReferenceError("Cannot unwrap Ok value of Result.Err")},unwrapOr(s){return s},unwrapOrElse(s){return s(i)},unwrapErr(){return i},match(s){return s.err(i)},map(s){return n(i)},mapErr(s){return n(s(i))},andThen(s){return n(i)},orElse(s){return s(i)}}}e.Err=n;function o(i){return i.isOk()}e.isOk=o;function l(i){return i.isErr()}e.isErr=l})(Zr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ok=e.isOk=e.isErr=e.Err=e.Some=e.None=e.isSome=e.isNone=e.Right=e.Left=e.isRight=e.isLeft=void 0;var t=Yr;Object.defineProperty(e,"isLeft",{enumerable:!0,get:function(){return t.isLeft}}),Object.defineProperty(e,"isRight",{enumerable:!0,get:function(){return t.isRight}}),Object.defineProperty(e,"Left",{enumerable:!0,get:function(){return t.Left}}),Object.defineProperty(e,"Right",{enumerable:!0,get:function(){return t.Right}});var r=mt;Object.defineProperty(e,"isNone",{enumerable:!0,get:function(){return r.isNone}}),Object.defineProperty(e,"isSome",{enumerable:!0,get:function(){return r.isSome}}),Object.defineProperty(e,"None",{enumerable:!0,get:function(){return r.None}}),Object.defineProperty(e,"Some",{enumerable:!0,get:function(){return r.Some}});var n=Zr;Object.defineProperty(e,"Err",{enumerable:!0,get:function(){return n.Err}}),Object.defineProperty(e,"isErr",{enumerable:!0,get:function(){return n.isErr}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"Ok",{enumerable:!0,get:function(){return n.Ok}})})(qe);const fo="b",fr="o";function po(e){let t=ho(e);if(t.isNone())return[];let r=t.unwrap(),n=r.right-r.left+1,o=r.bottom-r.top+1,l=Array(o).fill(0).map(()=>Array(n).fill(0));for(let[i,s]of e.entries())for(let[d,f]of s.entries())l[d-r.top][i-r.left]=1;return l}function en(e){let t=new Map;const r="b",n="o",o="$";let l="",i=0,s=0;for(let d=0;d<e.length;d++){let f=e[d];if(!(f===`
`||f==="!"))if(f.charCodeAt(0)>=48&&f.charCodeAt(0)<=57)l+=f;else{let c=+l||1;if(f===r)s+=c;else if(f===n)for(let h=0;h<c;h++)t.has(s)||t.set(s,new Map),t.get(s).set(i,1),s++;else if(f===o)i+=c,s=0;else return qe.None;l=""}}return qe.Some(t)}function ho(e){let t=1/0,r=-1/0,n=1/0,o=-1/0;for(let[l,i]of e.entries())for(let[s,d]of i.entries())l<n&&(n=l),l>o&&(o=l),s<t&&(t=s),s>r&&(r=s);return Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o)?qe.Some({top:t,bottom:r,left:n,right:o}):qe.None}function tn(e){let t=po(e);return mo(t.map(n=>r(n)).join("$"))+"!";function r(n){let o="",l=n[0],i=1;for(let s=1;s<n.length;s++){let d=n[s];if(l===d){i++;continue}i>1&&(o+=i),o+=l===0?fo:fr,l=d,i=1}return l===1&&(i>1&&(o+=i),o+=fr),o}}function mo(e){let t="",r=0;for(let n=0;n<e.length;n++){let o=e[n];o!="$"?(r===1&&(t+="$"),r>1&&(t+=r+"$"),t+=o,r=0):r++}return t}const gt=k(yo()||[]),rn=v(),nn=v(),on=v(),yt=v(),ln=v();gt.on(rn,(e,t)=>{let r=0;for(;e.find(n=>n.name===`save #${r}`);)r++;return[...e,{rle:tn(t),name:`save #${r}`,removed:!1}]}).on(nn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!0}:r)).on(on,(e,t)=>e.map(r=>r.name===t?{...r,removed:!1}:r));E({source:gt,target:jt(e=>{go("history",e)})});function go(e,t){let r=t.filter(n=>!n.removed).map(({name:n,rle:o})=>({rle:o,name:n}));localStorage.setItem(e,JSON.stringify(r))}function yo(){try{return(JSON.parse(localStorage.getItem("history")||"null")||[]).map(({rle:r,name:n})=>({rle:r,name:n,removed:!1}))}catch(e){return console.error(e),[]}}E({source:V,clock:ln,fn:e=>e.fauna,target:rn});E({source:gt,clock:yt,fn:(e,t)=>{const r=e.find(n=>n.name===t).rle;return{fauna:en(r).unwrapOr(new Map),time:0,size:0}},target:V});E({clock:[yt,Vt,Kt,ht],target:j.reset});E({source:V,clock:Kt,fn:({fauna:e})=>tn(e),target:pt});E({source:pt,clock:ht,fn:e=>({fauna:en(e).unwrapOr(new Map),time:0,size:0}),target:V});E({clock:[yt,ht],target:Wt});const dr="#5583e5",bo="_field_2r2xy_1",wo="_cell_2r2xy_17",vo="_on1_2r2xy_25",$o="_on2_2r2xy_28",So="_hoveredCell_2r2xy_32",_o="_heartMode_2r2xy_36",ko="_label_2r2xy_44",Ve={field:bo,cell:wo,on1:vo,on2:$o,hoveredCell:So,heartMode:_o,label:ko};function we(e,t){var r;return((n,o)=>{let l=!_e.unit(n)&&typeof n=="object",i={};n&&"@@unitShape"in n?typeof n["@@unitShape"]=="function"?i=n["@@unitShape"]():Et("expect @@unitShape to be a function"):i=l?n:{unit:n};let s=Array.isArray(i),d=Object.entries(i),f=s?[]:{},c=[],h={},m={};for(let[p,a]of d)if(_e.store(a))if(h[a.graphite.id]){let g=h[a.graphite.id];f[p]=f[g],m[p]=f[g]}else{c.push(a),h[a.graphite.id]=p;let[g,$]=Mt(pr(a,o));f[p]=g,m[p]=$}else _e.unit(a)||Et("expected useUnit argument to be a unit"),f[p]=o?Tn(a,{scope:o}):a;let u=[vt.compute({priority:"effect"}),vt.compute({priority:"sampler",batch:1}),vt.run({fn:()=>{fn(()=>{for(let p of c)m[h[p.graphite.id]](()=>pr(p,o))})}})];if(o){let p=ie({node:u}),a=o.additionalLinks,g=[];c.forEach($=>{let b=$.graphite.id,y=a[b]||[];a[b]=y,y.push(p),g.push(y)}),xt(()=>{g.forEach($=>{let b=$.indexOf(p);b!==-1&&$.splice(b,1)}),Lt(p)})}else{let p=ie({node:u,parent:c,family:{owners:c}});xt(()=>{Lt(p)})}return l?f:f.unit})(e,((n=1)=>{let o=hn(Po);return n&&!o&&Et("No scope found, consider adding <Provider> to app root"),o})((r=t?.forceScope)!==null&&r!==void 0?r:0))}let Et=e=>{throw Error(e)};const pr=(e,t)=>t?t.getState(e):e.getState();let Po=pn(null);const Eo=H("<div><div></div><canvas>"),xo=H("<div>) <!> "),hr=H("<div>");function Co(){let[e,t,r]=we([uo,co,R.$cellSize]),n;dn(()=>{requestAnimationFrame(d);function d(){if(!n){console.warn("no canvas");return}let{size:{size:f},field:c}=ao.getState();const h=n.getContext("2d");if(!h){console.warn("no context");return}let{width:m,height:u}=n.getBoundingClientRect();h.clearRect(0,0,m,u),h.fillStyle=dr,h.beginPath(),f>10?c.forEach(p=>{h.rect(p[0]+1,p[1]+1,f-1,f-1)}):c.forEach(p=>{h.rect(p[0],p[1],f,f)}),h.fill(),requestAnimationFrame(d)}});let o=0,[l,i]=Mt([]),s=()=>{let d=l(),f=null,c=[];return d.forEach(h=>{f===h?c[c.length-1][1]++:(c.push([h,1]),f=h)}),c};return(()=>{const d=Eo(),f=d.firstChild,c=f.nextSibling;return d.style.setProperty("--color1",dr),f.style.setProperty("position","absolute"),f.style.setProperty("z-index","2"),f.style.setProperty("bottom","90px"),f.style.setProperty("right","50px"),f.style.setProperty("height","80vh"),f.style.setProperty("display","grid"),f.style.setProperty("width","150px"),f.style.setProperty("font-size","12px"),f.style.setProperty("line-height","1"),f.style.setProperty("align-content","end"),f.style.setProperty("pointer-events","none"),f.style.setProperty("overflow","hidden"),x(f,()=>s().map(([h,m],u)=>(()=>{const p=xo(),a=p.firstChild,g=a.nextSibling;return g.nextSibling,x(p,u,a),x(p,m,g),x(p,h,null),p})())),xn(h=>n=h,c),c.addEventListener("wheel",h=>{o+=h.deltaY,o>20&&(R.minus(),o=0),o<-20&&(R.plus(),o=0)}),c.addEventListener("touchcancel",()=>i([...l(),"onTouchCancel"])),c.$$touchmove=()=>i([...l(),"onTouchMove"]),c.$$touchend=()=>i([...l(),"onTouchEnd"]),c.$$touchstart=()=>i([...l(),"onTouchStart"]),c.style.setProperty("background","#ddd"),x(d,()=>e().map(h=>(()=>{const m=hr();return I(u=>{const p=h.x+"px",a=h.y+"px",g={[Ve.cell]:!0,[Ve.hoveredCell]:!0};return p!==u._v$5&&((u._v$5=p)!=null?m.style.setProperty("left",p):m.style.removeProperty("left")),a!==u._v$6&&((u._v$6=a)!=null?m.style.setProperty("top",a):m.style.removeProperty("top")),u._v$7=Yt(m,g,u._v$7),u},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),m})()),null),x(d,()=>t().map(h=>(()=>{const m=hr();return x(m,()=>h.label),I(u=>{const p=h.x,a=h.y,g={[Ve.label]:!0};return p!==u._v$8&&((u._v$8=p)!=null?m.style.setProperty("left",p):m.style.removeProperty("left")),a!==u._v$9&&((u._v$9=a)!=null?m.style.setProperty("top",a):m.style.removeProperty("top")),u._v$10=Yt(m,g,u._v$10),u},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),m})()),null),I(h=>{const m=Ve.field,u=r().size+"px",p=window.innerWidth,a=document.body.offsetHeight;return m!==h._v$&&Le(d,h._v$=m),u!==h._v$2&&((h._v$2=u)!=null?d.style.setProperty("--cellSize",u):d.style.removeProperty("--cellSize")),p!==h._v$3&&Xt(c,"width",h._v$3=p),a!==h._v$4&&Xt(c,"height",h._v$4=a),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),d})()}Ne(["touchstart","touchend","touchmove"]);const Ao="_roundBox_hgest_1",Oo="_history_hgest_9",To="_colorBtn_hgest_15",Ro="_currentColor_hgest_22",No="_arrowBtn_hgest_26",Lo="_whiteBox_hgest_54",De={roundBox:Ao,history:Oo,colorBtn:To,currentColor:Ro,arrowBtn:No,whiteBox:Lo},Mo=H("<div><button>-</button><button>+");function sn(e){return(()=>{const t=Mo(),r=t.firstChild,n=r.nextSibling;return te(r,"click",e.onMinusClicked,!0),x(t,()=>` ${e.value} `,n),te(n,"click",e.onPlusClicked,!0),I(o=>{const l=e.class,i=e.value<=e.range[0],s=e.value>=e.range[1];return l!==o._v$&&Le(t,o._v$=l),i!==o._v$2&&(r.disabled=o._v$2=i),s!==o._v$3&&(n.disabled=o._v$3=s),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}Ne(["click"]);const zo=H("<div><button>to center</button><div>");function jo(){const[e]=we([R.$cellSize]);return(()=>{const t=zo(),r=t.firstChild,n=r.nextSibling;return te(r,"click",Wt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("right","150px"),n.style.setProperty("bottom","20px"),n.style.setProperty("z-index","1"),x(n,K(sn,{get value(){return e().size},get onPlusClicked(){return R.plus},get onMinusClicked(){return R.minus},get range(){return R.options},get class(){return De.roundBox}})),I(()=>Le(r,De.arrowBtn)),t})()}Ne(["click"]);const Fo=H("<button>STOP"),Io=H("<button>START"),Bo=H("<p><button>Step</button>timer: ");function qo(){let[e,t]=we([j.$isRunning,j.$currentStep]);return(()=>{const r=Bo(),n=r.firstChild;return n.nextSibling,r.style.setProperty("display","flex"),r.style.setProperty("gap","4px"),r.style.setProperty("position","absolute"),te(n,"click",j.oneStep,!0),x(r,K(Jt,{get when(){return e()},get children(){const o=Fo();return te(o,"click",j.stop,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#de4040"),o.style.setProperty("border","0"),o}}),null),x(r,K(Jt,{get when(){return!e()},get children(){const o=Io();return te(o,"click",j.start,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#50c40e"),o.style.setProperty("border","0"),o}}),null),x(r,()=>`steps: ${t()}`,null),I(()=>Le(r,De.whiteBox)),r})()}Ne(["click"]);const Do=H("<div><span>FPS: </span><span>STEPS PER SEC: </span><span>EXPECTED STEPS:</span><span>CALC TIME: <!> msec</span><span>CELLS: </span><span>CELLS ON SCREEN: ");function Ho(){const[e,t,r]=we([Pt.$stepsPerSec,Pt.$time,Pt.$fps]),[n,o]=we([lo,j.$expectedStepsPerSec]);return(()=>{const l=Do(),i=l.firstChild;i.firstChild;const s=i.nextSibling;s.firstChild;const d=s.nextSibling,f=d.nextSibling,c=f.firstChild,h=c.nextSibling;h.nextSibling;const m=f.nextSibling;m.firstChild;const u=m.nextSibling;return u.firstChild,l.style.setProperty("position","absolute"),l.style.setProperty("display","grid"),l.style.setProperty("top","10px"),l.style.setProperty("right","10px"),x(i,r,null),x(s,e,null),x(l,K(sn,{get value(){return o()},get onPlusClicked(){return j.incExpectedStepsPerSec},get onMinusClicked(){return j.decExpectedStepsPerSec},get range(){return j.speedRange}}),f),x(f,t,h),x(m,()=>n().faunaCellsAmount,null),x(u,()=>n().fieldCellsAmount,null),I(()=>Le(l,De.whiteBox)),l})()}const Uo=H("<div><p>History: </p><button>Save"),Wo=H("<div><button>"),Vo=H("<button>x");function Ko(){let[e]=we([gt]);return(()=>{const t=Uo(),r=t.firstChild,n=r.nextSibling;return r.style.setProperty("margin","0"),te(n,"click",ln,!0),n.style.setProperty("margin-right","20px"),x(t,K(kn,{get each(){return e()},children:o=>(()=>{const l=Wo(),i=l.firstChild;return i.$$click=()=>{o.removed?on(o.name):yt(o.name)},x(i,()=>o.removed?`restore ${o.name}`:o.name),x(l,(()=>{const s=Pe(()=>!!o.removed);return()=>s()?null:(()=>{const d=Vo();return d.$$click=()=>{nn(o.name)},d})()})(),null),l})()}),null),I(()=>Le(t,De.history)),t})()}Ne(["click"]);const Go=H("<div><div><h1>Game of Life</h1></div><button>Reset</button><div><button>Export</button><button>Import</button><br><textarea>");function Jo(){let[e]=we([pt]);return(()=>{const t=Go(),r=t.firstChild;r.firstChild;const n=r.nextSibling,o=n.nextSibling,l=o.firstChild,i=l.nextSibling,s=i.nextSibling,d=s.nextSibling;return x(t,K(jo,{}),r),x(t,K(Co,{}),r),r.style.setProperty("position","absolute"),r.style.setProperty("width","100%"),r.style.setProperty("background-color","rgba(255,255,255, 0.9)"),r.style.setProperty("border-bottom","1px solid #ccc"),x(r,K(Ko,{}),null),x(r,K(qo,{}),null),x(t,K(Ho,{}),n),te(n,"click",Vt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","20px"),n.style.setProperty("left","20px"),o.style.setProperty("position","absolute"),o.style.setProperty("bottom","50px"),o.style.setProperty("left","20px"),te(l,"click",Kt,!0),te(i,"click",ht,!0),d.addEventListener("change",f=>Xr(f.target.value)),d.style.setProperty("font-size","8px"),d.style.setProperty("width","100%"),d.style.setProperty("height","100px"),d.style.setProperty("line-height","1"),I(()=>d.value=e()),t})()}Qo();function Qo(){const e=new Worker("./webworkerGo.js");e.addEventListener("message",t=>{dt(t.data)}),e.addEventListener("error",t=>{console.log("main.error err",t)}),Ut.watch(t=>{e.postMessage(t)})}En(()=>K(Jo,{}),document.querySelector("#app"));Ne(["click"]);
