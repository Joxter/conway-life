(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const an=(e,t)=>e===t,cn=Symbol("solid-track"),et={equals:an};let br=Sr;const fe=1,tt=2,vr={owned:null,cleanups:null,context:null,owner:null};var A=null;let $t=null,O=null,N=null,se=null,at=0;function Ge(e,t){const r=O,n=A,o=e.length===0,s=t===void 0?n:t,i=o?vr:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>oe(()=>ct(i)));A=i,O=null;try{return Le(l,!0)}finally{O=r,A=n}}function jt(e,t){t=t?Object.assign({},et,t):et;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),$r(r,o));return[wr.bind(r),n]}function I(e,t,r){const n=Ft(e,t,!1,fe);Ve(n)}function fn(e,t,r){br=vn;const n=Ft(e,t,!1,fe);(!r||!r.render)&&(n.user=!0),se?se.push(n):Ve(n)}function Ce(e,t,r){r=r?Object.assign({},et,r):et;const n=Ft(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Ve(n),wr.bind(n)}function dn(e){return Le(e,!1)}function oe(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function pn(e){fn(()=>oe(e))}function At(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function hn(e,t){const r=Symbol("context");return{id:r,Provider:$n(r),defaultValue:e}}function mn(e){return A&&A.context&&A.context[e.id]!==void 0?A.context[e.id]:e.defaultValue}function gn(e){const t=Ce(e),r=Ce(()=>Ot(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function wr(){if(this.sources&&this.state)if(this.state===fe)Ve(this);else{const e=N;N=null,Le(()=>nt(this),!1),N=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function $r(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Le(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=$t&&$t.running;i&&$t.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?N.push(s):se.push(s),s.observers&&_r(s)),i||(s.state=fe)}if(N.length>1e6)throw N=[],new Error},!1)),t}function Ve(e){if(!e.fn)return;ct(e);const t=A,r=O,n=at;O=A=e,yn(e,e.value,n),O=r,A=t}function yn(e,t,r){let n;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(ct),e.owned=null),e.updatedAt=r+1,kr(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?$r(e,n):e.value=n,e.updatedAt=r)}function Ft(e,t,r,n=fe,o){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:r};return A===null||A!==vr&&(A.owned?A.owned.push(s):A.owned=[s]),s}function rt(e){if(e.state===0)return;if(e.state===tt)return nt(e);if(e.suspense&&oe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<at);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===fe)Ve(e);else if(e.state===tt){const n=N;N=null,Le(()=>nt(e,t[0]),!1),N=n}}function Le(e,t){if(N)return e();let r=!1;t||(N=[]),se?r=!0:se=[],at++;try{const n=e();return bn(r),n}catch(n){r||(se=null),N=null,kr(n)}}function bn(e){if(N&&(Sr(N),N=null),e)return;const t=se;se=null,t.length&&Le(()=>br(t),!1)}function Sr(e){for(let t=0;t<e.length;t++)rt(e[t])}function vn(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:rt(n)}for(t=0;t<r;t++)rt(e[t])}function nt(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const o=n.state;o===fe?n!==t&&(!n.updatedAt||n.updatedAt<at)&&rt(n):o===tt&&nt(n,t)}}}function _r(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=tt,r.pure?N.push(r):se.push(r),r.observers&&_r(r))}}function ct(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const s=o.pop(),i=r.observerSlots.pop();n<o.length&&(s.sourceSlots[i]=n,o[n]=s,r.observerSlots[n]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ct(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function wn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function kr(e,t=A){throw wn(e)}function Ot(e){if(typeof e=="function"&&!e.length)return Ot(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ot(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function $n(e,t){return function(n){let o;return I(()=>o=oe(()=>(A.context={...A.context,[e]:n.value},gn(()=>n.children))),void 0),o}}const Sn=Symbol("fallback");function Jt(e){for(let t=0;t<e.length;t++)e[t]()}function _n(e,t,r={}){let n=[],o=[],s=[],i=0,l=t.length>1?[]:null;return At(()=>Jt(s)),()=>{let p=e()||[],f,a;return p[cn],oe(()=>{let h=p.length,c,u,d,g,$,b,y,v,S;if(h===0)i!==0&&(Jt(s),s=[],n=[],o=[],i=0,l&&(l=[])),r.fallback&&(n=[Sn],o[0]=Ge(_=>(s[0]=_,r.fallback())),i=1);else if(i===0){for(o=new Array(h),a=0;a<h;a++)n[a]=p[a],o[a]=Ge(m);i=h}else{for(d=new Array(h),g=new Array(h),l&&($=new Array(h)),b=0,y=Math.min(i,h);b<y&&n[b]===p[b];b++);for(y=i-1,v=h-1;y>=b&&v>=b&&n[y]===p[v];y--,v--)d[v]=o[y],g[v]=s[y],l&&($[v]=l[y]);for(c=new Map,u=new Array(v+1),a=v;a>=b;a--)S=p[a],f=c.get(S),u[a]=f===void 0?-1:f,c.set(S,a);for(f=b;f<=y;f++)S=n[f],a=c.get(S),a!==void 0&&a!==-1?(d[a]=o[f],g[a]=s[f],l&&($[a]=l[f]),a=u[a],c.set(S,a)):s[f]();for(a=b;a<h;a++)a in d?(o[a]=d[a],s[a]=g[a],l&&(l[a]=$[a],l[a](a))):o[a]=Ge(m);o=o.slice(0,i=h),n=p.slice(0)}return o});function m(h){if(s[a]=h,l){const[c,u]=jt(a);return l[a]=u,t(p[a],c)}return t(p[a])}}}function X(e,t){return oe(()=>e(t||{}))}const kn=e=>`Stale read from <${e}>.`;function xn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Ce(_n(()=>e.each,e.children,t||void 0))}function Qt(e){const t=e.keyed,r=Ce(()=>e.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return Ce(()=>{const n=r();if(n){const o=e.children;return typeof o=="function"&&o.length>0?oe(()=>o(t?n:()=>{if(!oe(r))throw kn("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Pn(e,t,r){let n=r.length,o=t.length,s=n,i=0,l=0,p=t[o-1].nextSibling,f=null;for(;i<o||l<s;){if(t[i]===r[l]){i++,l++;continue}for(;t[o-1]===r[s-1];)o--,s--;if(o===i){const a=s<n?l?r[l-1].nextSibling:r[s-l]:p;for(;l<s;)e.insertBefore(r[l++],a)}else if(s===l)for(;i<o;)(!f||!f.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[s-1]&&r[l]===t[o-1]){const a=t[--o].nextSibling;e.insertBefore(r[l++],t[i++].nextSibling),e.insertBefore(r[--s],a),t[o]=r[s]}else{if(!f){f=new Map;let m=l;for(;m<s;)f.set(r[m],m++)}const a=f.get(t[i]);if(a!=null)if(l<a&&a<s){let m=i,h=1,c;for(;++m<o&&m<s&&!((c=f.get(t[m]))==null||c!==a+h);)h++;if(h>a-l){const u=t[i];for(;l<a;)e.insertBefore(r[l++],u)}else e.replaceChild(r[l++],t[i++])}else i++;else t[i++].remove()}}}const Zt="_$DX_DELEGATE";function En(e,t,r,n={}){let o;return Ge(s=>{o=s,t===document?e():P(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function H(e,t,r){let n;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>oe(()=>document.importNode(n||(n=o()),!0)):()=>(n||(n=o())).cloneNode(!0);return s.cloneNode=s,s}function ze(e,t=window.document){const r=t[Zt]||(t[Zt]=new Set);for(let n=0,o=e.length;n<o;n++){const s=e[n];r.has(s)||(r.add(s),t.addEventListener(s,An))}}function er(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function je(e,t){t==null?e.removeAttribute("class"):e.className=t}function te(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=s=>o.call(e,r[1],s))}else e.addEventListener(t,r)}function tr(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let s,i;for(s=0,i=o.length;s<i;s++){const l=o[s];!l||l==="undefined"||t[l]||(rr(e,l,!1),delete r[l])}for(s=0,i=n.length;s<i;s++){const l=n[s],p=!!t[l];!l||l==="undefined"||r[l]===p||!p||(rr(e,l,!0),r[l]=p)}return r}function Cn(e,t,r){return oe(()=>e(t,r))}function P(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return ot(e,t,n,r);I(o=>ot(e,t(),o,r),n)}function rr(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,s=n.length;o<s;o++)e.classList.toggle(n[o],r)}function An(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(o!==void 0?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function ot(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const s=typeof t,i=n!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let l=r[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),r=_e(e,r,n,l)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||s==="boolean")r=_e(e,r,n);else{if(s==="function")return I(()=>{let l=t();for(;typeof l=="function";)l=l();r=ot(e,l,r,n)}),()=>r;if(Array.isArray(t)){const l=[],p=r&&Array.isArray(r);if(Tt(l,t,r,o))return I(()=>r=ot(e,l,r,n,!0)),()=>r;if(l.length===0){if(r=_e(e,r,n),i)return r}else p?r.length===0?nr(e,l,n):Pn(e,r,l):(r&&_e(e),nr(e,l));r=l}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=_e(e,r,n,t);_e(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function Tt(e,t,r,n){let o=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],p=r&&r[s],f;if(!(l==null||l===!0||l===!1))if((f=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Tt(e,l,p)||o;else if(f==="function")if(n){for(;typeof l=="function";)l=l();o=Tt(e,Array.isArray(l)?l:[l],Array.isArray(p)?p:[p])||o}else e.push(l),o=!0;else{const a=String(l);p&&p.nodeType===3&&p.data===a?e.push(p):e.push(document.createTextNode(a))}}return o}function nr(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function _e(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(o!==l){const p=l.parentNode===e;!s&&!i?p?e.replaceChild(o,l):e.insertBefore(o,r):p&&l.remove()}else s=!0}}else e.insertBefore(o,r);return[o]}function ye(e,t){for(let r in e)t(e[r],r)}function F(e,t){e.forEach(t)}function R(e,t){if(!e)throw Error(t)}function ie({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:s,child:i=o||s,scope:l={},meta:p={},family:f={type:"regular"},regional:a}={}){let m=De(n),h=De(f.links),c=De(f.owners),u=[];F(e,g=>g&&Y(u,g));let d={id:zn(),seq:u,next:De(i),meta:p,scope:l,family:{type:f.type||"crosslink",links:h,owners:c}};return F(h,g=>Y(ft(g),d)),F(c,g=>Y(dt(g),d)),F(m,g=>Y(g.next,d)),a&&Ee&&Te(qe(Ee),[d]),d}function le(e,t,r){let n,o=ee,s=null,i=C;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(s=e.stack),i=me(e)||i,e=e.target),i&&C&&i!==C&&(C=null),Array.isArray(e))for(let u=0;u<e.length;u++)pe("pure",o,W(e[u]),s,t[u],i,n);else pe("pure",o,W(e),s,t,i,n);if(r&&!Ye)return;let l,p,f,a,m,h,c={isRoot:Ye,currentPage:ee,scope:C,isWatch:Qe,isPure:Ze};Ye=0;e:for(;a=Dn();){let{idx:u,stack:d,type:g}=a;f=d.node,ee=m=d.page,C=me(d),m?h=m.reg:C&&(h=C.reg);let $=!!m,b=!!C,y={fail:0,scope:f.scope};l=p=0;for(let v=u;v<f.seq.length&&!l;v++){let S=f.seq[v];if(S.order){let{priority:_,barrierID:x}=S.order,T=x?m?`${m.fullID}_${x}`:x:0;if(v!==u||g!==_){x?_t.has(T)||(_t.add(T),Rt(v,d,_,x)):Rt(v,d,_);continue e}x&&_t.delete(T)}switch(S.type){case"mov":{let x,T=S.data;switch(T.from){case ve:x=qe(d);break;case"a":case"b":x=d[T.from];break;case"value":x=T.store;break;case"store":if(h&&!h[T.store.id])if($){let wt=Fr(m,T.store.id);d.page=m=wt,wt?h=wt.reg:b?(Re(C,T.store,0,1,T.softRead),h=C.reg):h=void 0}else b&&Re(C,T.store,0,1,T.softRead);x=He(h&&h[T.store.id]||T.store)}switch(T.to){case ve:d.value=x;break;case"a":case"b":d[T.to]=x;break;case"store":Hn(m,C,f,T.target).current=x}break}case"compute":let _=S.data;if(_.fn){Qe=L(f,"op")==="watch",Ze=_.pure;let x=_.safe?(0,_.fn)(qe(d),y.scope,d):Wn(y,_.fn,d);_.filter?p=!x:d.value=x,Qe=c.isWatch,Ze=c.isPure}}l=y.fail||p}if(!l){let v=qe(d),S=me(d);if(F(f.next,_=>{pe("child",m,_,d,v,S)}),S){L(f,"needFxCounter")&&pe("child",m,S.fxCount,d,v,S),L(f,"storeChange")&&pe("child",m,S.storeChange,d,v,S),L(f,"warnSerialize")&&pe("child",m,S.warnSerializeNode,d,v,S);let _=S.additionalLinks[f.id];_&&F(_,x=>{pe("child",m,x,d,v,S)})}}}Ye=c.isRoot,ee=c.currentPage,C=me(c)}function xr(e,t="combine"){let r=t+"(",n="",o=0;return ye(e,s=>{o<25&&(s!=null&&(r+=n,r+=re(s)?Bt(s).fullName:s.toString()),o+=1,n=", ")}),r+")"}function Pr(e,t){let r,n,o=e;if(t){let s=Bt(t);e.length===0?(r=s.path,n=s.fullName):(r=s.path.concat([e]),n=s.fullName.length===0?e:s.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:o,fullName:n,path:r}}function Fe(e,t){let r=t?e:e[0];Lr(r);let n=r.or,o=r.and;if(o){let s=t?o:o[0];if(J(s)&&"and"in s){let i=Fe(o,t);e=i[0],n={...n,...i[1]}}else e=o}return[e,n]}function B(e,...t){let r=Nr();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function w(e,t){let r=Ne({or:t,and:typeof e=="string"?{name:e}:e}),n=(i,...l)=>(we(!L(n,"derived"),"call of derived event","createEvent"),we(!Ze,"unit call from pure function","operators like sample"),ee?((p,f,a,m)=>{let h=ee,c=null;if(f)for(c=ee;c&&c.template!==f;)c=ue(c);ar(c);let u=p.create(a,m);return ar(h),u})(n,o,i,l):n.create(i,l)),o=Nr(),s=Object.assign(n,{graphite:ie({meta:qr(r.actualOp||"event",n,r),regional:1}),create:i=>(le({target:n,params:i,scope:C}),i),watch:i=>Br(n,i),map:i=>kt(n,Ae,i,[Z()]),filter:i=>kt(n,"filter",i.fn?i:i.fn,[Z(Dt,1)]),filterMap:i=>kt(n,"filterMap",i,[Z(),G(l=>!U(l),1)]),prepend(i){let l=w("* → "+n.shortName,{parent:ue(n)});return B("eventPrepend",W(l)),de(l,n,[Z()],"prepend",i),Dr(n,l),l}});return r!=null&&r.domain&&r.domain.hooks.event(s),Q(s,"id",s.graphite.id),Rr(s.graphite),s}function or(e,t,r,n){return st(r,t,"first argument"),R(z(n),"second argument should be a function"),we(!L(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),F(Array.isArray(r)?r:[r],o=>{e.off(o),it(e).set(o,Ir(Hr(o,e,"on",In,n)))}),e}function k(e,t){let r=Ne(t),n=$e(e),o=w({named:"updates",derived:1});B("storeBase",n);let s=n.id,i={subscribers:new Map,updates:o,defaultState:e,stateRef:n,getState(){let c,u=n;if(ee){let d=ee;for(;d&&!d.reg[s];)d=ue(d);d&&(c=d)}return!c&&C&&(Re(C,n,1),c=C),c&&(u=c.reg[s]),He(u)},setState:c=>le({target:i,params:c,defer:1,scope:C}),reset:(...c)=>(F(c,u=>or(i,".reset",u,()=>i.defaultState)),i),on:(c,u)=>or(i,".on",c,u),off(c){let u=it(i).get(c);return u&&(u(),it(i).delete(c)),i},map(c,u){let d,g;J(c)&&(d=c,c=c.fn),we(U(u),"second argument of store.map","updateFilter");let $=i.getState();U($)||(g=c($,u));let b=k(g,{name:`${i.shortName} → *`,derived:1,and:d}),y=Hr(i,b,Ae,Mt,c);return lt(D(b),{type:Ae,fn:c,from:n}),D(b).noInit=1,B("storeMap",n,y),b},watch(c,u){if(!u||!re(c)){let d=Br(i,c);return B("storeWatch",n,c)||c(i.getState()),d}return R(z(u),"second argument should be a function"),c.watch(d=>u(i.getState(),d))}},l=qr("store",i,r),p=i.defaultConfig.updateFilter;i.graphite=ie({scope:{state:n,fn:p},node:[G((c,u,d)=>(d.scope&&!d.scope.reg[n.id]&&(d.b=1),c)),ne(n),G((c,u,{a:d,b:g})=>!U(c)&&(c!==d||g),1),p&&Z(Mt,1),K({from:ve,target:n})],child:o,meta:{...l,defaultState:e},regional:1}),Q(i,"id",i.graphite.id),Q(i,"rootStateRefId",s);let f=L(i,"serialize"),a=L(i,"derived"),m=f==="ignore",h=L(i,"sid");return h&&(Q(i,"storeChange",1),n.sid=h),h||m||a||Q(i,"warnSerialize",1),R(a||!U(e),"current state can't be undefined, use null instead"),Te(i,[o]),r!=null&&r.domain&&r.domain.hooks.store(i),a||(i.reinit=w({named:"reinit"}),i.reset(i.reinit)),n.meta=i.graphite.meta,Rr(i.graphite),i}function ce(...e){let t,r,n;[e,n]=Fe(e);let o,s,i,l=e[e.length-1];if(z(l)?(r=e.slice(0,-1),t=l):r=e,r.length===1){let p=r[0];q(p)||(o=p,s=1)}if(!s&&(o=r,t)){i=1;let p=t;t=f=>p(...f)}return R(J(o),"shape should be an object"),Vn(Array.isArray(o),!i,o,n,t)}function Er(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}function It(e,t={}){let r=Ne(z(e)?{handler:e}:e,t),n=w(z(e)?{handler:e}:e,{...t,actualOp:"effect"}),o=W(n);Q(o,"op",n.kind="effect"),n.use=c=>(R(z(c),".use argument should be a function"),a.scope.handler=c,n),n.use.getCurrent=()=>a.scope.handler;let s=n.finally=w({named:"finally",derived:1}),i=n.done=s.filterMap({named:"done",fn({status:c,params:u,result:d}){if(c==="done")return{params:u,result:d}}}),l=n.fail=s.filterMap({named:"fail",fn({status:c,params:u,error:d}){if(c==="fail")return{params:u,error:d}}}),p=n.doneData=i.map({named:"doneData",fn:({result:c})=>c}),f=n.failData=l.map({named:"failData",fn:({error:c})=>c}),a=ie({scope:{handler:n.defaultConfig.handler||(()=>R(0,`no handler used in ${n.getType()}`))},node:[G((c,u,d)=>{let g=u.handler,$=me(d);if($){let b=$.handlers.unitMap.get(n)||$.handlers.sidMap[n.sid];b&&(g=b)}return c.handler=g,c},0,1),G(({params:c,req:u,handler:d,args:g=[c]},$,b)=>{let y=Wr(b),v=ut(c,u,1,s,b,y),S=ut(c,u,0,s,b,y),[_,x]=Ur(d,S,g);_&&(J(x)&&z(x.then)?x.then(v,S):v(x))},0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=a,Y(o.seq,G((c,{runner:u},d)=>{let g=ue(d)?{params:c,req:{rs($){},rj($){}}}:c;return d.meta||(d.meta={fxID:jn()}),le({target:u,params:g,defer:1,scope:me(d),meta:d.meta}),g.params},0,1)),n.create=c=>{let u=Er(),d={params:c,req:u};if(C&&!Qe){let g=C;u.req.finally(()=>{qn(g)}).catch(()=>{})}return le({target:n,params:d,scope:C}),u.req};let m=n.inFlight=k(0,{serialize:"ignore",named:(L(n,"name")||n.graphite.id)+".inFlight"}).on(n,c=>c+1).on(s,c=>c-1).map({fn:c=>c,named:"inFlight"});Q(s,"needFxCounter","dec"),Q(n,"needFxCounter",1);let h=n.pending=m.map({fn:c=>c>0,named:"pending"});return Te(n,[s,i,l,p,f,h,m]),r!=null&&r.domain&&r.domain.hooks.effect(n),n}function ir(e){let t;[e,t]=Fe(e,1);let{source:r,effect:n,mapParams:o}=e,s=It(e,t);Q(s,"attached",1);let i,{runner:l}=W(s).scope,p=G((a,m,h)=>{let c,{params:u,req:d,handler:g}=a,$=s.finally,b=Wr(h),y=ut(u,d,0,$,h,b),v=h.a,S=Oe(g),_=1;if(o?[_,c]=Ur(o,y,[u,v]):c=r&&S?v:u,_){if(!S)return a.args=[v,c],1;le({target:g,params:{params:c,req:{rs:ut(u,d,1,$,h,b),rj:y}},page:h.page,defer:1,meta:h.meta})}},1,1);if(r){let a;q(r)?(a=r,Te(a,[s])):(a=ce(r),Te(s,[a])),i=[ne(D(a)),p]}else i=[p];l.seq.splice(1,0,...i),s.use(n);let f=ue(n);return f&&(Object.assign(Bt(s),Pr(s.shortName,f)),s.defaultConfig.parent=f),Dr(n,s,"effect"),s}function Cr(e,t){st(e,"merge","first argument");let r=w({name:xr(e,"merge"),derived:1,and:t});return de(e,r,[],"merge"),r}function Ar(e,t){let r=0;return F(Yn,n=>{n in e&&(R(e[n]!=null,Vr(t,n)),r=1)}),r}function E(...e){let t,r,n,o,[[s,i,l],p]=Fe(e),f=1;return U(i)&&J(s)&&Ar(s,"sample")&&(i=s.clock,l=s.fn,f=!s.greedy,o=s.filter,t=s.target,r=s.name,n=s.sid,s=s.source),Wt("sample",i,s,o,t,l,r,p,f,1,0,n)}function Be(...e){let[[t,r],n]=Fe(e);return r||(r=t,t=r.source),Ar(r,"guard"),Wt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function On(e,t,r){if(q(e))return we(0,"restore($store)"),e;if(Or(e)||Oe(e)){let o=ue(e),s=k(t,{parent:o,name:e.shortName,and:r});return de(Oe(e)?e.doneData:e,s),o&&o.hooks.store(s),s}let n=Array.isArray(e)?[]:{};return ye(e,(o,s)=>n[s]=q(o)?o:k(o,{name:s})),n}function Tn(...e){let t,r,n="split",[[o,s],i]=Fe(e),l=!s;l&&(t=o.cases,s=o.match,r=o.clock,o=o.source);let p=q(s),f=!re(s)&&z(s),a=!p&&!f&&J(s);R(re(o),"source must be a unit"),t||(t={}),l?ye(t,(d,g)=>zr(n,d,`cases.${g}`)):(R(a,"match should be an object"),ye(s,(d,g)=>t[g]=w({derived:1,named:`cases.${g}`,and:i})),t.__=w({derived:1,named:"cases.__",and:i}));let m,h=new Set([].concat(o,r||[],Object.values(t))),c=Object.keys(p||f?t:s);if(p||f)p&&h.add(s),m=[p&&ne(D(s),0,1),Me({safe:p,filter:1,pure:!p,fn(d,g,$){let b=String(p?$.a:s(d));Pt(g,sr(c,b)?b:"__",d,$)}})];else if(a){let d=$e({});d.type="shape";let g,$=[];ye(s,(b,y)=>{if(re(b)){g=1,Y($,y),h.add(b);let v=de(b,[],[ne(d),G((S,_,{a:x})=>x[y]=S)]);if(q(b)){d.current[y]=b.getState();let S=D(b);lt(d,{from:S,field:y,type:"field"}),B("splitMatchStore",S,v)}}}),g&&B("splitBase",d),m=[g&&ne(d,0,1),Z((b,y,v)=>{for(let S=0;S<c.length;S++){let _=c[S];if(sr($,_)?v.a[_]:s[_](b))return void Pt(y,_,b,v)}Pt(y,"__",b,v)},1)]}else R(0,"expect match to be unit, function or object");let u=ie({meta:{op:n},parent:r?[]:o,scope:t,node:m,family:{owners:Array.from(h)},regional:1});if(r&&Wt(n,r,o,null,u,null,n,i,0,0,0),!l)return t}function Mn(e,{scope:t,safe:r}={}){R(t||C||r,"scopeBind cannot be called outside of forked .watch");let n=t||C;return Oe(e)?o=>{let s=Er();return le({target:e,params:{params:o,req:s},scope:n}),s.req}:o=>(le({target:e,params:o,scope:n}),o)}let Rn=typeof Symbol<"u"&&Symbol.observable||"@@observable",Ae="map",ve="stack",W=e=>e.graphite||e,ft=e=>e.family.owners,dt=e=>e.family.links,D=e=>e.stateRef,qe=e=>e.value,it=e=>e.subscribers,ue=e=>e.parent,me=e=>e.scope,L=(e,t)=>W(e).meta[t],Q=(e,t,r)=>W(e).meta[t]=r,Bt=e=>e.compositeName,re=e=>(z(e)||J(e))&&"kind"in e;const Xe=e=>t=>re(t)&&t.kind===e;let q=Xe("store"),Or=Xe("event"),Oe=Xe("effect"),Tr=Xe("domain"),Nn=Xe("scope");var Pe={__proto__:null,unit:re,store:q,event:Or,effect:Oe,domain:Tr,scope:Nn,attached:e=>Oe(e)&&L(e,"attached")==1};let sr=(e,t)=>e.includes(t),Je=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},Y=(e,t)=>e.push(t),we=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const pt=()=>{let e=0;return()=>""+ ++e};let Ln=pt(),Mr=pt(),zn=pt(),jn=pt(),Ee=null,Rr=e=>{},Nr=()=>Ee,Fn=e=>(e&&Ee&&Ee.sidRoot&&(e=`${Ee.sidRoot}|${e}`),e),Te=(e,t)=>{let r=W(e);F(t,n=>{let o=W(n);r.family.type!=="domain"&&(o.family.type="crosslink"),Y(ft(o),r),Y(dt(r),o)})},De=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(W),J=e=>typeof e=="object"&&e!==null,z=e=>typeof e=="function",U=e=>e===void 0,Lr=e=>R(J(e)||z(e),"expect first argument be an object");const lr=(e,t,r,n)=>R(!(!J(e)&&!z(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let st=(e,t,r)=>{Array.isArray(e)?F(e,(n,o)=>lr(n,t,`${o} item of ${r}`,"")):lr(e,t,r," or array of units")},zr=(e,t,r="target")=>F(De(t),n=>we(!L(n,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore")),Mt=(e,{fn:t},{a:r})=>t(e,r),In=(e,{fn:t},{a:r})=>t(r,e),Dt=(e,{fn:t})=>t(e);const jr=(e,t,r,n)=>{let o={id:Mr(),type:e,data:t};return r&&(o.order={priority:r},n&&(o.order.barrierID=++Bn)),o};let Bn=0,K=({from:e="store",store:t,target:r,to:n=r?"store":ve,batch:o,priority:s})=>jr("mov",{from:e,store:t,to:n,target:r},s,o),Me=({fn:e,batch:t,priority:r,safe:n=0,filter:o=0,pure:s=0})=>jr("compute",{fn:e,safe:n,filter:o,pure:s},r,t),qt=({fn:e})=>Me({fn:e,priority:"effect"}),G=(e,t,r)=>Me({fn:e,safe:1,filter:t,priority:r&&"effect"}),ne=(e,t,r)=>K({store:e,to:t?ve:"a",priority:r&&"sampler",batch:1}),Z=(e=Dt,t)=>Me({fn:e,pure:1,filter:t}),St={mov:K,compute:Me,filter:({fn:e,pure:t})=>Me({fn:e,filter:1,pure:t}),run:qt},$e=e=>({id:Mr(),current:e}),He=({current:e})=>e,lt=(e,t)=>{e.before||(e.before=[]),Y(e.before,t)},xe=null;const Ht=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Nt(e.v.type)>Nt(t.v.type))&&(r=e,e=t,t=r),r=Ht(e.r,t),e.r=e.l,e.l=r,e},Ut=[];let ur=0;for(;ur<6;)Y(Ut,{first:null,last:null,size:0}),ur+=1;const Dn=()=>{for(let e=0;e<6;e++){let t=Ut[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=xe.v;return xe=Ht(xe.l,xe.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},pe=(e,t,r,n,o,s,i)=>Rt(0,{a:null,b:null,node:r,parent:n,value:o,page:t,scope:s,meta:i},e),Rt=(e,t,r,n=0)=>{let o=Nt(r),s=Ut[o],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};o===3||o===4?xe=Ht(xe,i):(s.size===0?s.first=i:s.last.r=i,s.last=i),s.size+=1},Nt=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},_t=new Set;let C,Ye=1,Qe=0,Ze=0,ee=null,qn=e=>{C=e},ar=e=>{ee=e};const Fr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ue(e);if(e)return e}return null};let Hn=(e,t,r,n,o)=>{let s=Fr(e,n.id);return s?s.reg[n.id]:t?(Re(t,n,o),t.reg[n.id]):n};const Un=e=>e;let Re=(e,t,r,n,o)=>{var s;let i=e.reg,l=t.sid,p=t==null||(s=t.meta)===null||s===void 0?void 0:s.serialize,f=e.fromSerialize&&p!=="ignore"&&p?.read||Un;if(i[t.id])return;let a={id:t.id,current:t.current,meta:t.meta};if(a.id in e.values.idMap)a.current=e.values.idMap[a.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap))a.current=f(e.values.sidMap[l]);else if(t.before&&!o){let m=0,h=r||!t.noInit||n;F(t.before,c=>{switch(c.type){case Ae:{let u=c.from;if(u||c.fn){u&&Re(e,u,r,n);let d=u&&i[u.id].current;h&&(a.current=c.fn?c.fn(d):d)}break}case"field":m||(m=1,a.current=Array.isArray(a.current)?[...a.current]:{...a.current}),Re(e,c.from,r,n),h&&(a.current[c.field]=i[i[c.from.id].id].current)}})}l&&(e.sidIdMap[l]=t.id),i[t.id]=a};const Wn=(e,t,r)=>{try{return t(qe(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let Ne=(e,t={})=>(J(e)&&(Ne(e.or,t),ye(e,(r,n)=>{U(r)||n==="or"||n==="and"||(t[n]=r)}),Ne(e.and,t)),t);const cr=(e,t)=>{Je(e.next,t),Je(ft(e),t),Je(dt(e),t)},Lt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let o=dt(e);for(;n=o.pop();)cr(n,e),(t||r&&L(e,"op")!=="sample"||n.family.type==="crosslink")&&Lt(n,t,L(n,"op")!=="on"&&r);for(o=ft(e);n=o.pop();)cr(n,e),r&&n.family.type==="crosslink"&&Lt(n,t,L(n,"op")!=="on"&&r)},Ie=e=>e.clear();let zt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),q(e))Ie(it(e));else if(Tr(e)){r=1;let n=e.history;Ie(n.events),Ie(n.effects),Ie(n.stores),Ie(n.domains)}Lt(W(e),!!t,r)},Ir=e=>{let t=()=>zt(e);return t.unsubscribe=t,t},de=(e,t,r,n,o)=>ie({node:r,parent:e,child:t,scope:{fn:o},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),Br=(e,t)=>(R(z(t),".watch argument should be a function"),Ir(ie({scope:{fn:t},node:[qt({fn:Dt})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Dr=(e,t,r="event")=>{ue(e)&&ue(e).hooks[r](t)},qr=(e,t,r)=>{let n=Ne(r),o=e==="domain",s=Ln(),{sid:i=null,named:l=null,domain:p=null,parent:f=p}=n,a=l||n.name||(o?"":s),m=Pr(a,f),h={op:t.kind=e,name:t.shortName=a,sid:t.sid=Fn(i),named:l,unitId:t.id=s,serialize:n.serialize,derived:n.derived,config:n};return t.parent=f,t.compositeName=m,t.defaultConfig=n,t.thru=c=>(we(0,"thru","js pipe"),c(t)),t.getType=()=>m.fullName,!o&&(t.subscribe=c=>(Lr(c),t.watch(z(c)?c:u=>c.next&&c.next(u))),t[Rn]=()=>t),h};const kt=(e,t,r,n)=>{let o;J(r)&&(o=r,r=r.fn);let s=w({name:`${e.shortName} → *`,derived:1,and:o});return de(e,s,n,t,r),s},Hr=(e,t,r,n,o)=>{let s=D(t),i=K({store:s,to:"a",priority:"read"});r===Ae&&(i.data.softRead=1);let l=[i,Z(n)];return B("storeOnMap",s,l,q(e)&&D(e)),de(e,t,l,r,o)},Vn=(e,t,r,n,o)=>{let s=e?u=>[...u]:u=>({...u}),i=e?[]:{},l=s(i),p=$e(l),f=$e(1);p.type=e?"list":"shape",p.noInit=1,B("combineBase",p,f);let a=k(l,{name:xr(r),derived:1,and:n}),m=D(a);m.noInit=1,Q(a,"isCombine",1);let h=ne(p);h.order={priority:"barrier"};let c=[G((u,d,g)=>(g.scope&&!g.scope.reg[p.id]&&(g.c=1),u)),h,K({store:f,to:"b"}),G((u,{key:d},g)=>{if(g.c||u!==g.a[d])return t&&g.b&&(g.a=s(g.a)),g.a[d]=u,1},1),K({from:"a",target:p}),K({from:"value",store:0,target:f}),K({from:"value",store:1,target:f,priority:"barrier",batch:1}),ne(p,1),o&&Z()];return ye(r,(u,d)=>{if(!q(u))return R(!re(u)&&!U(u),`combine expects a store in a field ${d}`),void(l[d]=i[d]=u);i[d]=u.defaultState,l[d]=u.getState();let g=de(u,a,c,"combine",o);g.scope.key=d;let $=D(u);lt(p,{type:"field",field:d,from:$}),B("combineField",$,g)}),a.defaultShape=r,lt(m,{type:Ae,from:p,fn:o}),a.defaultState=o?m.current=o(l):i,a};let Ur=(e,t,r)=>{try{return[1,e(...r)]}catch(n){return t(n),[0,null]}},Wr=e=>{let t=me(e),r={ref:t};return t&&Y(t.activeEffects,r),r},ut=(e,t,r,n,o,s)=>i=>{s.ref&&Je(s.ref.activeEffects,s),le({target:[n,Xn],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:o.page,scope:s.ref,meta:o.meta})};const Xn=ie({node:[qt({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Yn=["source","clock","target"],Vr=(e,t)=>e+`: ${t} should be defined`;let Wt=(e,t,r,n,o,s,i,l,p,f,a,m)=>{let h=!!o;R(!U(r)||!U(t),Vr(e,"either source or clock"));let c=0;U(r)?c=1:re(r)||(r=ce(r)),U(t)?t=r:(st(t,e,"clock"),Array.isArray(t)&&(t=Cr(t))),c&&(r=t),l||i||(i=r.shortName);let u="none";(a||n)&&(re(n)?u="unit":(R(z(n),"`filter` should be function or unit"),u="fn")),o?(st(o,e,"target"),zr(e,o)):u==="none"&&f&&q(r)&&q(t)?o=k(s?s(He(D(r)),He(D(t))):He(D(r)),{name:i,sid:m,or:l}):(o=w({name:i,derived:1,or:l}),B("sampleTarget",W(o)));let d=$e(),g=[];if(u==="unit"){let[v,S]=fr(n,o,t,d,e);g=[...xt(S),...xt(v)]}let[$,b]=fr(r,o,t,d,e),y=de(t,o,[B("sampleSourceLoader"),K({from:ve,target:d}),...xt(b),ne($,1,p),...g,ne(d),u==="fn"&&Z((v,S,{a:_})=>n(v,_),1),s&&Z(Mt),B("sampleSourceUpward",h)],e,s);return Te(r,[y]),Object.assign(y.meta,l,{joint:1}),o};const xt=e=>[ne(e),G((t,r,{a:n})=>n,1)],fr=(e,t,r,n,o)=>{let s=q(e),i=s?D(e):$e(),l=$e(s);return s||ie({parent:e,node:[K({from:ve,target:i}),K({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:o},regional:1}),B("sampleSource",l,i,n),[i,l]},Pt=(e,t,r,n)=>{let o=e[t];o&&le({target:o,params:Array.isArray(o)?o.map(()=>r):r,defer:1,stack:n})};function Xr(){return{width:window.visualViewport?.width||600,height:window.visualViewport?.height||400}}function dr(e,t,r){return{x:t.x-e.col*r,y:t.y-e.row*r}}function Kn(e){let t=0,r=0,n=0;return e.size===0?{col:t,row:r}:(e.forEach((o,s)=>{n+=o.size,o.forEach((i,l)=>{t+=s,r+=l})}),{col:Math.round(t/n),row:Math.round(r/n)})}function Yr(e,t){try{let r=localStorage.getItem(e);return r===null?t:r}catch(r){return console.error(r),t}}function Kr(e,t){try{localStorage.setItem(e,t)}catch(r){console.error(r)}}function Gn(){return{currentBp:k(null)}}const ke=Xr();function Jn(e){const t="cellSize",r=[1,100];let n=+Yr(t,"10")||10;const o=k({size:n,prevSize:n}),s=k({width:ke.width,height:ke.height}),i=o.map(({size:a},m)=>({height:Math.ceil(ke.height/a),width:Math.ceil(ke.width/a),prevHeight:m&&m.height||Math.ceil(ke.height/a),prevWidth:m&&m.width||Math.ceil(ke.width/a)})),l=w(),p=w();return o.on(p,({size:a})=>({size:Math.max(r[0],a-1),prevSize:a})).on(l,({size:a})=>({size:Math.max(r[0],a+1),prevSize:a})),o.watch(a=>{Kr(t,String(a.size))}),{options:r,$cellSize:o,$fieldSize:i,plus:l,minus:p,$viewPortSize:s}}function Qn(){const e=w(),t=w(),r=k(null);return r.on(t,()=>null).on(e,(o,s)=>s),{$hoveredXY:r,fieldMouseLeaved:t,fieldMouseMoved:e}}function Zn(e,t){const r=k(null),n=k(null),o=k(null),s=w(),i=w(),l=w(),p=w(),f=w(),a=w(),m=w();function h(){}e.map(u=>u!==null);const c=e.map(u=>u==null);return o.on(s,()=>Date.now()),E({source:t,clock:s,fn:u=>u,target:r}),E({clock:s,target:n}),E({source:{currentHovered:e,initHovered:n,startTime:o},clock:i,filter:u=>(console.log("1111",!!u.initHovered,!!u.currentHovered,!!u.startTime),!!u.initHovered&&!!u.currentHovered&&!!u.startTime),fn:({currentHovered:u,initHovered:d,startTime:g})=>({start:u,finish:d}),target:l}),E({source:{currentHovered:e,initFocus:r,initHovered:n},clock:e,filter:u=>(console.log("222",!!u.initHovered,!!u.initFocus,!!u.currentHovered),!!u.initHovered&&!!u.initFocus&&!!u.currentHovered),fn:({currentHovered:u,initHovered:d,initFocus:g})=>({x:g.x+(u.x-d.x),y:g.y+(u.y-d.y)}),target:m}),Tn({source:l,match:u=>u.start.x===u.finish.x&&u.start.y===u.finish.y?"click":"dragEnd",cases:{click:f,dragEnd:a}}),E({clock:f,fn:u=>({coords:u.start}),target:p}),r.reset(l,c),n.reset(l,c),o.reset(l,c),{focusMoved:m,initEvents:h,clicked:p,onMUp:i,onMDown:s}}function Gr(e){var{timeout:t,start:r,stop:n,leading:o=!1,trailing:s=!1}=e,i=r??w({name:"setup",sid:"-ajedhm"}),l=n??w({name:"teardown",sid:"-ryi8gr"}),p=w({name:"tick",sid:"-cw8a02"}),f=k(!1,{name:"$isRunning",sid:"-5gspmy"}),a=eo(t),m=f.map(b=>!b),h=w({name:"saveTimeout",sid:"satd6r"}),c=k(null,{name:"$timeoutId",sid:"hehxq7"}).on(h,(b,y)=>{var{timeoutId:v}=y;return v}),u=k(()=>{},{name:"$rejecter",sid:"-sc3eh9"}).on(h,(b,y)=>{var{reject:v}=y;return v}),d=ir({and:{source:{timeout:a,running:f},effect:b=>{var{timeout:y,running:v}=b;return v?new Promise((S,_)=>{var x=setTimeout(S,y);h({timeoutId:x,reject:_})}):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=ir({and:{source:{timeoutId:c,rejecter:u},effect:b=>{var{timeoutId:y,rejecter:v}=b;v(),y&&clearTimeout(y)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if(Be({and:[{clock:i,source:a,filter:m,target:d}],or:{sid:"-us95i7"}}),o){var $=Be({and:[{clock:i,filter:m}],or:{name:"onReady",sid:"farho0"}});E({and:[{clock:$,target:p}],or:{sid:"-ubrbnn"}})}return E({and:[{clock:i,fn:()=>!0,target:f}],or:{sid:"-ua3xxa"}}),Be({and:[{clock:d.done,source:a,filter:f,target:d}],or:{sid:"6lcmx8"}}),Be({and:[{clock:d.done,filter:f,target:p.prepend(()=>{})}],or:{sid:"6p772r"}}),s&&E({and:[{clock:l,target:p}],or:{sid:"75p0xb"}}),f.on(l,()=>!1),E({and:[{clock:l,target:g}],or:{sid:"7ln232"}}),{tick:p,isRunning:f,"@@trigger":()=>({setup:i,teardown:l,fired:p})}}function eo(e){if(Pe.store(e,{sid:"8i2x6t"}))return e;if(typeof e=="number")return k(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}function pr(e){var{source:t,timeout:r,target:n=w({name:"target",sid:"r328r6"},{name:"target",sid:"r328r6"})}=e;if(!Pe.unit(t))throw new TypeError("source must be unit from effector");var o=to(r),s=It(f=>new Promise(a=>setTimeout(a,f)),{name:"timerFx",sid:"-pyjx8k"}),i=k(null,{and:{serialize:"ignore"},name:"$payload",sid:"hinjft"}).on(t,(f,a)=>a),l=w({name:"triggerTick",sid:"-sf8sou"}),p=k(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"-m0cqc"}).on(l,()=>!1).on(n,()=>!0);return Be({and:[{clock:t,filter:p,target:l}],or:{sid:"-hzhj9b"}}),E({and:[{source:o,clock:l,target:s}],or:{sid:"-hkn38k"}}),E({and:[{source:i,clock:s.done,target:n}],or:{sid:"-hhcboe"}}),n}function to(e){if(Pe.store(e,{sid:"-h0ap6r"}))return e;if(typeof e=="number"){if(e<0||!Number.isFinite(e))throw new Error('timeout must be positive number or zero. Received: "'.concat(e,'"'));return k(e,{and:{name:"$timeout"},sid:"-h97n10"})}throw new TypeError('timeout parameter should be number or Store. "'.concat(typeof e,'" was passed'))}function ro(e,t,r){const n=k(0),o=k({prev:0,delta:0}).reset(t),s=w(),i=w(),l=pr({source:s,timeout:100}),p=pr({source:r,timeout:300}),f=Gr({timeout:1e3,start:i});n.on(l,(h,c)=>c),E({source:{stepsPerSec:o,steps:e},clock:f.tick,fn:({stepsPerSec:h,steps:c})=>({prev:c,delta:c-h.prev}),target:o});const a=[];i(),m();function m(){window.requestAnimationFrame(()=>{const h=performance.now();for(;a.length>0&&a[0]<=h-1e3;)a.shift();a.push(h),m()}),s(a.length)}return{$fps:n,$stepsPerSec:o.map(h=>h.delta),$time:On(p,0)}}function no(e,t){const r="expectedStepsPerSec";let n=+Yr(r,"10")||10;const o=w(),s=w(),i=w(),l=w(),p=w(),f=w(),a=k(!1),m=k(0),h=[1,200],c=k(n),u=c.map(y=>1e3/y),d=w(),g=w(),$=k(null),b=Gr({timeout:u,start:s,stop:Cr([l,i,f])});return E({clock:[b.tick,s,p],filter:ce(a,t,(y,v)=>y&&!v),target:o}),E({clock:p,target:o}),E({source:e,clock:s,fn:y=>new Map(y),target:$}),a.on(s,()=>!0).on([i,l],()=>!1).reset(f),c.on(d,y=>{if(y===1)return 5;let v=y+5;return v>h[1]?h[1]:v}).on(g,y=>{let v=y-5;return v<1?1:v}),$.on(f,()=>null),m.on(o,y=>y+1).on(i,()=>0).reset(f),c.watch(y=>{Kr(r,String(y))}),{$currentStep:m,$expectedStepsPerSec:c,$isRunning:a,$startFauna:$,start:s,stop:i,pause:l,incExpectedStepsPerSec:d,decExpectedStepsPerSec:g,speedRange:h,gameTick:o,reset:f,oneStep:p}}var Ue={},Jr={},ht={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNone=e.isSome=e.None=e.Some=e.OptionType=void 0,e.OptionType={Some:Symbol(":some"),None:Symbol(":none")};function t(i){return typeof i>"u"?n():r(i)}e.Some=t,e.None=n();function r(i){return{type:e.OptionType.Some,isSome(){return!0},isNone(){return!1},match(l){return l.some(i)},map(l){return r(l(i))},andThen(l){return l(i)},or(l){return this},and(l){return l},unwrapOr(l){return i},unwrap(){return i}}}function n(){return{type:e.OptionType.None,isSome(){return!1},isNone(){return!0},match(i){const{none:l}=i;return typeof l=="function"?l():l},map(i){return n()},andThen(i){return n()},or(i){return i},and(i){return n()},unwrapOr(i){if(i==null)throw new Error("Cannot call unwrapOr with a missing value.");return i},unwrap(){throw new ReferenceError("Trying to unwrap None.")}}}function o(i){return i.isSome()}e.isSome=o;function s(i){return i.isNone()}e.isNone=s})(ht);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRight=e.isLeft=e.Right=e.Left=e.EitherType=void 0;const t=ht;e.EitherType={Left:Symbol(":left"),Right:Symbol(":right")};function r(i){return{type:e.EitherType.Left,isLeft(){return!0},isRight(){return!1},left(){return(0,t.Some)(i)},leftAndThen(l){return l(i)},right(){return t.None},rightAndThen(l){return r(i)},unwrap(){return i},unwrapLeft(){return i},unwrapLeftOr(l){return i},unwrapLeftOrElse(l){return i},unwrapRight(){throw new ReferenceError("Cannot unwrap Right value of Either.Left")},unwrapRightOr(l){return l},unwrapRightOrElse(l){return l(i)},match(l){return l.left(i)},map(l){return r(l(i))},mapLeft(l){return r(l(i))},mapRight(l){return r(i)}}}e.Left=r;function n(i){return{type:e.EitherType.Right,isLeft(){return!1},isRight(){return!0},left(){return t.None},leftAndThen(l){return n(i)},right(){return(0,t.Some)(i)},rightAndThen(l){return l(i)},unwrap(){return i},unwrapLeft(){throw new ReferenceError("Cannot unwrap Left value of Either.Right")},unwrapLeftOr(l){return l},unwrapLeftOrElse(l){return l(i)},unwrapRight(){return i},unwrapRightOr(l){return i},unwrapRightOrElse(l){return i},match(l){return l.right(i)},map(l){return n(l(i))},mapLeft(l){return n(i)},mapRight(l){return n(l(i))}}}e.Right=n;function o(i){return i.isLeft()}e.isLeft=o;function s(i){return i.isRight()}e.isRight=s})(Jr);var Qr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isErr=e.isOk=e.Err=e.Ok=e.ResultType=void 0;const t=ht;e.ResultType={Ok:Symbol(":ok"),Err:Symbol(":err")};function r(i){return{type:e.ResultType.Ok,isOk(){return!0},isErr(){return!1},ok(){return(0,t.Some)(i)},err(){return t.None},unwrap(){return i},unwrapOr(l){return i},unwrapOrElse(l){return i},unwrapErr(){throw new ReferenceError("Cannot unwrap Err value of Result.Ok")},match(l){return l.ok(i)},map(l){return r(l(i))},mapErr(l){return r(i)},andThen(l){return l(i)},orElse(l){return r(i)}}}e.Ok=r;function n(i){return{type:e.ResultType.Err,isOk(){return!1},isErr(){return!0},ok(){return t.None},err(){return(0,t.Some)(i)},unwrap(){throw new ReferenceError("Cannot unwrap Ok value of Result.Err")},unwrapOr(l){return l},unwrapOrElse(l){return l(i)},unwrapErr(){return i},match(l){return l.err(i)},map(l){return n(i)},mapErr(l){return n(l(i))},andThen(l){return n(i)},orElse(l){return l(i)}}}e.Err=n;function o(i){return i.isOk()}e.isOk=o;function s(i){return i.isErr()}e.isErr=s})(Qr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ok=e.isOk=e.isErr=e.Err=e.Some=e.None=e.isSome=e.isNone=e.Right=e.Left=e.isRight=e.isLeft=void 0;var t=Jr;Object.defineProperty(e,"isLeft",{enumerable:!0,get:function(){return t.isLeft}}),Object.defineProperty(e,"isRight",{enumerable:!0,get:function(){return t.isRight}}),Object.defineProperty(e,"Left",{enumerable:!0,get:function(){return t.Left}}),Object.defineProperty(e,"Right",{enumerable:!0,get:function(){return t.Right}});var r=ht;Object.defineProperty(e,"isNone",{enumerable:!0,get:function(){return r.isNone}}),Object.defineProperty(e,"isSome",{enumerable:!0,get:function(){return r.isSome}}),Object.defineProperty(e,"None",{enumerable:!0,get:function(){return r.None}}),Object.defineProperty(e,"Some",{enumerable:!0,get:function(){return r.Some}});var n=Qr;Object.defineProperty(e,"Err",{enumerable:!0,get:function(){return n.Err}}),Object.defineProperty(e,"isErr",{enumerable:!0,get:function(){return n.isErr}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"Ok",{enumerable:!0,get:function(){return n.Ok}})})(Ue);const oo="b",hr="o";function io(e){let t=so(e);if(t.isNone())return[];let r=t.unwrap(),n=r.right-r.left+1,o=r.bottom-r.top+1,s=Array(o).fill(0).map(()=>Array(n).fill(0));for(let[i,l]of e.entries())for(let[p,f]of l.entries())s[p-r.top][i-r.left]=1;return s}function Vt(e){let t=new Map;const r="b",n="o",o="$";let s="",i=0,l=0;for(let p=0;p<e.length;p++){let f=e[p];if(!(f===`
`||f==="!"))if(f.charCodeAt(0)>=48&&f.charCodeAt(0)<=57)s+=f;else{let a=+s||1;if(f===r)l+=a;else if(f===n)for(let m=0;m<a;m++)t.has(l)||t.set(l,new Map),t.get(l).set(i,1),l++;else if(f===o)i+=a,l=0;else return Ue.None;s=""}}return Ue.Some(t)}function so(e){let t=1/0,r=-1/0,n=1/0,o=-1/0;for(let[s,i]of e.entries())for(let[l,p]of i.entries())s<n&&(n=s),s>o&&(o=s),l<t&&(t=l),l>r&&(r=l);return Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o)?Ue.Some({top:t,bottom:r,left:n,right:o}):Ue.None}function Zr(e){let t=io(e);return lo(t.map(n=>r(n)).join("$"))+"!";function r(n){let o="",s=n[0],i=1;for(let l=1;l<n.length;l++){let p=n[l];if(s===p){i++;continue}i>1&&(o+=i),o+=s===0?oo:hr,s=p,i=1}return s===1&&(i>1&&(o+=i),o+=hr),o}}function lo(e){let t="",r=0;for(let n=0;n<e.length;n++){let o=e[n];o!="$"?(r===1&&(t+="$"),r>1&&(t+=r+"$"),t+=o,r=0):r++}return t}const be=Qn(),M=Jn(be.$hoveredXY.map(e=>!!e));Gn();const V=k({fauna:Vt("8bo$7b3o$5b3ob2o$4bo2b2ob2o$4b2o4bo$4b4o2bo$7b3o$8bobo$b2o7b2o$ob2o5b2o$o3bo$b2obo$2b2o!").unwrap(),time:0,size:0}),uo=k([]),en=k(!1),Xt=w(),mt=w();en.on(Xt,()=>!0).on(mt,()=>!1);const j=no(V.map(e=>e.fauna),en),Et=ro(j.$currentStep,j.reset,mt.map(e=>e.time)),ae=k({x:0,y:0}),ao=w(),Yt=w(),Kt=w(),ge=Zn(be.$hoveredXY,ae);E({source:[ae,be.$hoveredXY],clock:M.$cellSize,fn:([e,t],{size:r,prevSize:n})=>{if(t){let o={col:(t.x-e.x)/n,row:(t.y-e.y)/n};return dr(o,t,r)}else{let o=Xr(),s={x:o.width/2,y:o.height/2},i={col:(s.x-e.x)/n,row:(s.y-e.y)/n};return dr(i,s,r)}},target:ae});const tn=ce(V,ae,M.$cellSize,M.$viewPortSize,({fauna:e},t,{size:r},n)=>{const o=[];return e.forEach((s,i)=>{s.forEach((l,p)=>{const f=i*r+t.x,a=p*r+t.y;f>=0&&f<n.width&&a>=0&&a<n.height&&o.push([f,a])})}),o}),co=ce(tn,V,(e,t)=>({fieldCellsAmount:e.length,faunaCellsAmount:t.size})),fo=ce(uo,M.$fieldSize,M.$cellSize,ae,(e,{width:t,height:r},{size:n},o)=>{const s=[];return e.forEach(({col:i,row:l,label:p})=>{const f=i+o.x/n,a=l+o.y/n;f>=0&&f<t&&a>=0&&a<r&&s.push({col:f,row:a,label:p})}),s}),po=ce(tn,M.$cellSize,(e,t)=>({size:t,field:e})),ho=ce(be.$hoveredXY,M.$cellSize,ae,(e,{size:t},r)=>{if(e){const n=Math.floor((e.x-r.x)/t),o=Math.floor((e.y-r.y)/t),s=(n*t+r.x).toFixed(0),i=(o*t+r.y).toFixed(0);return[{x:s,y:i}]}return[]}),mo=ce(fo,M.$cellSize,(e,{size:t})=>e.map(({row:r,col:n,label:o})=>({y:r*t+"px",x:n*t+"px",label:o})));E({source:V,clock:j.gameTick,fn:e=>e.fauna,target:Xt});V.on(mt,(e,t)=>t).reset(Kt);ae.on(ge.focusMoved,(e,t)=>t).reset(ao);E({source:{faunaData:V,fieldSize:M.$fieldSize,cellSize:M.$cellSize},clock:Yt,fn:({faunaData:e,fieldSize:t,cellSize:r})=>{const n=Kn(e.fauna);return{x:(t.width/2-n.col)*r.size,y:(t.height/2-n.row)*r.size}},target:ae});E({source:{faunaData:V,screenOffsetXY:ae,cellSize:M.$cellSize},clock:ge.clicked,fn:({faunaData:e,screenOffsetXY:t,cellSize:{size:r}},{coords:n})=>{const o=new Map(e.fauna),s=Math.floor((n.x-t.x)/r),i=Math.floor((n.y-t.y)/r);return o.has(s)||o.set(s,new Map),o.get(s).has(i)?o.get(s).delete(i):o.get(s).set(i,1),{...e,fauna:o}},target:V});const gt=k(""),rn=w(),Gt=w(),yt=w();w();w();gt.on(rn,(e,t)=>t);const bt=k(yo()||[]),nn=w(),on=w(),sn=w(),vt=w(),ln=w();bt.on(nn,(e,t)=>{let r=0;for(;e.find(n=>n.name===`save #${r}`);)r++;return[...e,{rle:Zr(t),name:`save #${r}`,removed:!1}]}).on(on,(e,t)=>e.map(r=>r.name===t?{...r,removed:!0}:r)).on(sn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!1}:r));E({source:bt,target:It(e=>{go("history",e)})});function go(e,t){let r=t.filter(n=>!n.removed).map(({name:n,rle:o})=>({rle:o,name:n}));localStorage.setItem(e,JSON.stringify(r))}function yo(){try{return(JSON.parse(localStorage.getItem("history")||"null")||[]).map(({rle:r,name:n})=>({rle:r,name:n,removed:!1}))}catch(e){return console.error(e),[]}}E({source:V,clock:ln,fn:e=>e.fauna,target:nn});E({source:bt,clock:vt,fn:(e,t)=>{const r=e.find(n=>n.name===t).rle;return{fauna:Vt(r).unwrapOr(new Map),time:0,size:0}},target:V});E({clock:[vt,Kt,Gt,yt],target:j.reset});E({source:V,clock:Gt,fn:({fauna:e})=>Zr(e),target:gt});E({source:gt,clock:yt,fn:e=>({fauna:Vt(e).unwrapOr(new Map),time:0,size:0}),target:V});E({clock:[vt,yt],target:Yt});const mr="#5583e5",bo="_field_2r2xy_1",vo="_cell_2r2xy_17",wo="_on1_2r2xy_25",$o="_on2_2r2xy_28",So="_hoveredCell_2r2xy_32",_o="_heartMode_2r2xy_36",ko="_label_2r2xy_44",Ke={field:bo,cell:vo,on1:wo,on2:$o,hoveredCell:So,heartMode:_o,label:ko};function Se(e,t){var r;return((n,o)=>{let s=!Pe.unit(n)&&typeof n=="object",i={};n&&"@@unitShape"in n?typeof n["@@unitShape"]=="function"?i=n["@@unitShape"]():Ct("expect @@unitShape to be a function"):i=s?n:{unit:n};let l=Array.isArray(i),p=Object.entries(i),f=l?[]:{},a=[],m={},h={};for(let[u,d]of p)if(Pe.store(d))if(m[d.graphite.id]){let g=m[d.graphite.id];f[u]=f[g],h[u]=f[g]}else{a.push(d),m[d.graphite.id]=u;let[g,$]=jt(gr(d,o));f[u]=g,h[u]=$}else Pe.unit(d)||Ct("expected useUnit argument to be a unit"),f[u]=o?Mn(d,{scope:o}):d;let c=[St.compute({priority:"effect"}),St.compute({priority:"sampler",batch:1}),St.run({fn:()=>{dn(()=>{for(let u of a)h[m[u.graphite.id]](()=>gr(u,o))})}})];if(o){let u=ie({node:c}),d=o.additionalLinks,g=[];a.forEach($=>{let b=$.graphite.id,y=d[b]||[];d[b]=y,y.push(u),g.push(y)}),At(()=>{g.forEach($=>{let b=$.indexOf(u);b!==-1&&$.splice(b,1)}),zt(u)})}else{let u=ie({node:c,parent:a,family:{owners:a}});At(()=>{zt(u)})}return s?f:f.unit})(e,((n=1)=>{let o=mn(xo);return n&&!o&&Ct("No scope found, consider adding <Provider> to app root"),o})((r=t?.forceScope)!==null&&r!==void 0?r:0))}let Ct=e=>{throw Error(e)};const gr=(e,t)=>t?t.getState(e):e.getState();let xo=hn(null);const Po=H("<div><div><div>isTouchDevice: </div><div>b</div></div><canvas>"),Eo=H("<div>) <!> "),yr=H("<div>");let he="ontouchstart"in window||navigator.maxTouchPoints>0;function Co(){let[e,t,r]=Se([ho,mo,M.$cellSize]),n;pn(()=>{requestAnimationFrame(p);function p(){if(!n){console.warn("no canvas");return}let{size:{size:f},field:a}=po.getState();const m=n.getContext("2d");if(!m){console.warn("no context");return}let{width:h,height:c}=n.getBoundingClientRect();m.clearRect(0,0,h,c),m.fillStyle=mr,m.beginPath(),f>10?a.forEach(u=>{m.rect(u[0]+1,u[1]+1,f-1,f-1)}):a.forEach(u=>{m.rect(u[0],u[1],f,f)}),m.fill(),requestAnimationFrame(p)}});let o=0,[s,i]=jt([]),l=()=>{let p=s(),f=null,a=[];return p.forEach(m=>{f===m?a[a.length-1][1]++:(a.push([m,1]),f=m)}),a};return(()=>{const p=Po(),f=p.firstChild,a=f.firstChild;a.firstChild;const m=f.nextSibling;return p.style.setProperty("--color1",mr),f.style.setProperty("position","absolute"),f.style.setProperty("z-index","2"),f.style.setProperty("bottom","90px"),f.style.setProperty("right","50px"),f.style.setProperty("height","80vh"),f.style.setProperty("display","grid"),f.style.setProperty("width","150px"),f.style.setProperty("font-size","12px"),f.style.setProperty("line-height","1"),f.style.setProperty("align-content","end"),f.style.setProperty("pointer-events","none"),f.style.setProperty("overflow","hidden"),P(f,()=>l().map(([h,c],u)=>(()=>{const d=Eo(),g=d.firstChild,$=g.nextSibling;return $.nextSibling,P(d,u,g),P(d,c,$),P(d,h,null),d})()),a),P(a,()=>String(he),null),Cn(h=>n=h,m),m.addEventListener("wheel",h=>{o+=h.deltaY,o>20&&(M.minus(),o=0),o<-20&&(M.plus(),o=0)}),m.$$mouseup=h=>{he||(i([...s(),"onMouseUp"]),ge.onMUp({x:h.clientX,y:h.clientY}))},m.$$mousedown=h=>{he||(i([...s(),"onMouseDown"]),ge.onMDown({x:h.clientX,y:h.clientY}))},m.$$mousemove=h=>{he||(i([...s(),"onMouseMove"]),be.fieldMouseMoved({x:h.clientX,y:h.clientY}))},m.addEventListener("mouseleave",()=>{he||(i([...s(),"onMouseLeave"]),be.fieldMouseLeaved())}),m.$$touchmove=h=>{i([...s(),"onTouchMove-"+h.touches.length]),h.touches.length===1&&be.fieldMouseMoved({x:h.touches[0].clientX,y:h.touches[0].clientY})},m.$$touchend=h=>{he||(i([...s(),"onTouchEnd-"+h.touches.length]),h.touches.length===1&&ge.onMUp({x:h.touches[0].clientX,y:h.touches[0].clientY}))},m.$$touchstart=h=>{he||(i([...s(),"onTouchStart"]),h.touches.length===1&&ge.onMDown({x:h.touches[0].clientX,y:h.touches[0].clientY}))},P(p,()=>e().map(h=>(()=>{const c=yr();return I(u=>{const d=h.x+"px",g=h.y+"px",$={[Ke.cell]:!0,[Ke.hoveredCell]:!0};return d!==u._v$5&&((u._v$5=d)!=null?c.style.setProperty("left",d):c.style.removeProperty("left")),g!==u._v$6&&((u._v$6=g)!=null?c.style.setProperty("top",g):c.style.removeProperty("top")),u._v$7=tr(c,$,u._v$7),u},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),c})()),null),P(p,()=>t().map(h=>(()=>{const c=yr();return P(c,()=>h.label),I(u=>{const d=h.x,g=h.y,$={[Ke.label]:!0};return d!==u._v$8&&((u._v$8=d)!=null?c.style.setProperty("left",d):c.style.removeProperty("left")),g!==u._v$9&&((u._v$9=g)!=null?c.style.setProperty("top",g):c.style.removeProperty("top")),u._v$10=tr(c,$,u._v$10),u},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),c})()),null),I(h=>{const c=Ke.field,u=r().size+"px",d=window.innerWidth,g=document.body.offsetHeight;return c!==h._v$&&je(p,h._v$=c),u!==h._v$2&&((h._v$2=u)!=null?p.style.setProperty("--cellSize",u):p.style.removeProperty("--cellSize")),d!==h._v$3&&er(m,"width",h._v$3=d),g!==h._v$4&&er(m,"height",h._v$4=g),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),p})()}ze(["touchstart","touchend","touchmove","mousemove","mousedown","mouseup"]);const Ao="_roundBox_hgest_1",Oo="_history_hgest_9",To="_colorBtn_hgest_15",Mo="_currentColor_hgest_22",Ro="_arrowBtn_hgest_26",No="_whiteBox_hgest_54",We={roundBox:Ao,history:Oo,colorBtn:To,currentColor:Mo,arrowBtn:Ro,whiteBox:No},Lo=H("<div><button>-</button><button>+");function un(e){return(()=>{const t=Lo(),r=t.firstChild,n=r.nextSibling;return te(r,"click",e.onMinusClicked,!0),P(t,()=>` ${e.value} `,n),te(n,"click",e.onPlusClicked,!0),I(o=>{const s=e.class,i=e.value<=e.range[0],l=e.value>=e.range[1];return s!==o._v$&&je(t,o._v$=s),i!==o._v$2&&(r.disabled=o._v$2=i),l!==o._v$3&&(n.disabled=o._v$3=l),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}ze(["click"]);const zo=H("<div><button>to center</button><div>");function jo(){const[e]=Se([M.$cellSize]);return ge.initEvents(),(()=>{const t=zo(),r=t.firstChild,n=r.nextSibling;return te(r,"click",Yt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("right","150px"),n.style.setProperty("bottom","20px"),n.style.setProperty("z-index","1"),P(n,X(un,{get value(){return e().size},get onPlusClicked(){return M.plus},get onMinusClicked(){return M.minus},get range(){return M.options},get class(){return We.roundBox}})),I(()=>je(r,We.arrowBtn)),t})()}ze(["click"]);const Fo=H("<button>STOP"),Io=H("<button>START"),Bo=H("<p><button>Step</button>timer: ");function Do(){let[e,t]=Se([j.$isRunning,j.$currentStep]);return(()=>{const r=Bo(),n=r.firstChild;return n.nextSibling,r.style.setProperty("display","flex"),r.style.setProperty("gap","4px"),r.style.setProperty("position","absolute"),te(n,"click",j.oneStep,!0),P(r,X(Qt,{get when(){return e()},get children(){const o=Fo();return te(o,"click",j.stop,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#de4040"),o.style.setProperty("border","0"),o}}),null),P(r,X(Qt,{get when(){return!e()},get children(){const o=Io();return te(o,"click",j.start,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#50c40e"),o.style.setProperty("border","0"),o}}),null),P(r,()=>`steps: ${t()}`,null),I(()=>je(r,We.whiteBox)),r})()}ze(["click"]);const qo=H("<div><span>FPS: </span><span>STEPS PER SEC: </span><span>EXPECTED STEPS:</span><span>CALC TIME: <!> msec</span><span>CELLS: </span><span>CELLS ON SCREEN: ");function Ho(){const[e,t,r]=Se([Et.$stepsPerSec,Et.$time,Et.$fps]),[n,o]=Se([co,j.$expectedStepsPerSec]);return(()=>{const s=qo(),i=s.firstChild;i.firstChild;const l=i.nextSibling;l.firstChild;const p=l.nextSibling,f=p.nextSibling,a=f.firstChild,m=a.nextSibling;m.nextSibling;const h=f.nextSibling;h.firstChild;const c=h.nextSibling;return c.firstChild,s.style.setProperty("position","absolute"),s.style.setProperty("display","grid"),s.style.setProperty("top","10px"),s.style.setProperty("right","10px"),P(i,r,null),P(l,e,null),P(s,X(un,{get value(){return o()},get onPlusClicked(){return j.incExpectedStepsPerSec},get onMinusClicked(){return j.decExpectedStepsPerSec},get range(){return j.speedRange}}),f),P(f,t,m),P(h,()=>n().faunaCellsAmount,null),P(c,()=>n().fieldCellsAmount,null),I(()=>je(s,We.whiteBox)),s})()}const Uo=H("<div><p>History: </p><button>Save"),Wo=H("<div><button>"),Vo=H("<button>x");function Xo(){let[e]=Se([bt]);return(()=>{const t=Uo(),r=t.firstChild,n=r.nextSibling;return r.style.setProperty("margin","0"),te(n,"click",ln,!0),n.style.setProperty("margin-right","20px"),P(t,X(xn,{get each(){return e()},children:o=>(()=>{const s=Wo(),i=s.firstChild;return i.$$click=()=>{o.removed?sn(o.name):vt(o.name)},P(i,()=>o.removed?`restore ${o.name}`:o.name),P(s,(()=>{const l=Ce(()=>!!o.removed);return()=>l()?null:(()=>{const p=Vo();return p.$$click=()=>{on(o.name)},p})()})(),null),s})()}),null),I(()=>je(t,We.history)),t})()}ze(["click"]);const Yo=H("<div><div><h1>Game of Life</h1></div><button>Reset</button><div><button>Export</button><button>Import</button><br><textarea>");function Ko(){let[e]=Se([gt]);return(()=>{const t=Yo(),r=t.firstChild;r.firstChild;const n=r.nextSibling,o=n.nextSibling,s=o.firstChild,i=s.nextSibling,l=i.nextSibling,p=l.nextSibling;return P(t,X(jo,{}),r),P(t,X(Co,{}),r),r.style.setProperty("position","absolute"),r.style.setProperty("width","100%"),r.style.setProperty("background-color","rgba(255,255,255, 0.9)"),r.style.setProperty("border-bottom","1px solid #ccc"),P(r,X(Xo,{}),null),P(r,X(Do,{}),null),P(t,X(Ho,{}),n),te(n,"click",Kt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","20px"),n.style.setProperty("left","20px"),o.style.setProperty("position","absolute"),o.style.setProperty("bottom","50px"),o.style.setProperty("left","20px"),te(s,"click",Gt,!0),te(i,"click",yt,!0),p.addEventListener("change",f=>rn(f.target.value)),p.style.setProperty("font-size","8px"),p.style.setProperty("width","100%"),p.style.setProperty("height","100px"),p.style.setProperty("line-height","1"),I(()=>p.value=e()),t})()}Go();function Go(){const e=new Worker("./webworkerGo.js");e.addEventListener("message",t=>{mt(t.data)}),e.addEventListener("error",t=>{console.log("main.error err",t)}),Xt.watch(t=>{e.postMessage(t)})}En(()=>X(Ko,{}),document.querySelector("#app"));ze(["click"]);
