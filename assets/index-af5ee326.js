(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const an=(e,t)=>e===t,un=Symbol("solid-track"),Qe={equals:an};let gr=Sr;const fe=1,Ze=2,yr={owned:null,cleanups:null,context:null,owner:null};var C=null;let wt=null,O=null,L=null,se=null,lt=0;function Xe(e,t){const r=O,n=C,i=e.length===0,s=t===void 0?n:t,o=i?yr:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=i?e:()=>e(()=>ie(()=>at(o)));C=o,O=null;try{return Ne(l,!0)}finally{O=r,C=n}}function br(e,t){t=t?Object.assign({},Qe,t):Qe;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),vr(r,i));return[wr.bind(r),n]}function I(e,t,r){const n=Mt(e,t,!1,fe);Ue(n)}function cn(e,t,r){gr=bn;const n=Mt(e,t,!1,fe);(!r||!r.render)&&(n.user=!0),se?se.push(n):Ue(n)}function Ee(e,t,r){r=r?Object.assign({},Qe,r):Qe;const n=Mt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Ue(n),wr.bind(n)}function fn(e){return Ne(e,!1)}function ie(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function dn(e){cn(()=>ie(e))}function Pt(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function pn(e,t){const r=Symbol("context");return{id:r,Provider:vn(r),defaultValue:e}}function mn(e){return C&&C.context&&C.context[e.id]!==void 0?C.context[e.id]:e.defaultValue}function hn(e){const t=Ee(e),r=Ee(()=>Ct(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function wr(){if(this.sources&&this.state)if(this.state===fe)Ue(this);else{const e=L;L=null,Ne(()=>tt(this),!1),L=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function vr(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Ne(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],o=wt&&wt.running;o&&wt.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?L.push(s):se.push(s),s.observers&&$r(s)),o||(s.state=fe)}if(L.length>1e6)throw L=[],new Error},!1)),t}function Ue(e){if(!e.fn)return;at(e);const t=C,r=O,n=lt;O=C=e,gn(e,e.value,n),O=r,C=t}function gn(e,t,r){let n;try{n=e.fn(t)}catch(i){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(at),e.owned=null),e.updatedAt=r+1,_r(i)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?vr(e,n):e.value=n,e.updatedAt=r)}function Mt(e,t,r,n=fe,i){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:C?C.context:null,pure:r};return C===null||C!==yr&&(C.owned?C.owned.push(s):C.owned=[s]),s}function et(e){if(e.state===0)return;if(e.state===Ze)return tt(e);if(e.suspense&&ie(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<lt);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===fe)Ue(e);else if(e.state===Ze){const n=L;L=null,Ne(()=>tt(e,t[0]),!1),L=n}}function Ne(e,t){if(L)return e();let r=!1;t||(L=[]),se?r=!0:se=[],lt++;try{const n=e();return yn(r),n}catch(n){r||(se=null),L=null,_r(n)}}function yn(e){if(L&&(Sr(L),L=null),e)return;const t=se;se=null,t.length&&Ne(()=>gr(t),!1)}function Sr(e){for(let t=0;t<e.length;t++)et(e[t])}function bn(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:et(n)}for(t=0;t<r;t++)et(e[t])}function tt(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===fe?n!==t&&(!n.updatedAt||n.updatedAt<lt)&&et(n):i===Ze&&tt(n,t)}}}function $r(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ze,r.pure?L.push(r):se.push(r),r.observers&&$r(r))}}function at(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const s=i.pop(),o=r.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,r.observerSlots[n]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)at(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function wn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function _r(e,t=C){throw wn(e)}function Ct(e){if(typeof e=="function"&&!e.length)return Ct(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ct(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function vn(e,t){return function(n){let i;return I(()=>i=ie(()=>(C.context={...C.context,[e]:n.value},hn(()=>n.children))),void 0),i}}const Sn=Symbol("fallback");function Yt(e){for(let t=0;t<e.length;t++)e[t]()}function $n(e,t,r={}){let n=[],i=[],s=[],o=0,l=t.length>1?[]:null;return Pt(()=>Yt(s)),()=>{let c=e()||[],u,a;return c[un],ie(()=>{let m=c.length,d,p,f,g,S,b,y,w,$;if(m===0)o!==0&&(Yt(s),s=[],n=[],i=[],o=0,l&&(l=[])),r.fallback&&(n=[Sn],i[0]=Xe(_=>(s[0]=_,r.fallback())),o=1);else if(o===0){for(i=new Array(m),a=0;a<m;a++)n[a]=c[a],i[a]=Xe(h);o=m}else{for(f=new Array(m),g=new Array(m),l&&(S=new Array(m)),b=0,y=Math.min(o,m);b<y&&n[b]===c[b];b++);for(y=o-1,w=m-1;y>=b&&w>=b&&n[y]===c[w];y--,w--)f[w]=i[y],g[w]=s[y],l&&(S[w]=l[y]);for(d=new Map,p=new Array(w+1),a=w;a>=b;a--)$=c[a],u=d.get($),p[a]=u===void 0?-1:u,d.set($,a);for(u=b;u<=y;u++)$=n[u],a=d.get($),a!==void 0&&a!==-1?(f[a]=i[u],g[a]=s[u],l&&(S[a]=l[u]),a=p[a],d.set($,a)):s[u]();for(a=b;a<m;a++)a in f?(i[a]=f[a],s[a]=g[a],l&&(l[a]=S[a],l[a](a))):i[a]=Xe(h);i=i.slice(0,o=m),n=c.slice(0)}return i});function h(m){if(s[a]=m,l){const[d,p]=br(a);return l[a]=p,t(c[a],d)}return t(c[a])}}}function K(e,t){return ie(()=>e(t||{}))}const _n=e=>`Stale read from <${e}>.`;function kn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Ee($n(()=>e.each,e.children,t||void 0))}function Gt(e){const t=e.keyed,r=Ee(()=>e.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return Ee(()=>{const n=r();if(n){const i=e.children;return typeof i=="function"&&i.length>0?ie(()=>i(t?n:()=>{if(!ie(r))throw _n("Show");return e.when})):i}return e.fallback},void 0,void 0)}function En(e,t,r){let n=r.length,i=t.length,s=n,o=0,l=0,c=t[i-1].nextSibling,u=null;for(;o<i||l<s;){if(t[o]===r[l]){o++,l++;continue}for(;t[i-1]===r[s-1];)i--,s--;if(i===o){const a=s<n?l?r[l-1].nextSibling:r[s-l]:c;for(;l<s;)e.insertBefore(r[l++],a)}else if(s===l)for(;o<i;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===r[s-1]&&r[l]===t[i-1]){const a=t[--i].nextSibling;e.insertBefore(r[l++],t[o++].nextSibling),e.insertBefore(r[--s],a),t[i]=r[s]}else{if(!u){u=new Map;let h=l;for(;h<s;)u.set(r[h],h++)}const a=u.get(t[o]);if(a!=null)if(l<a&&a<s){let h=o,m=1,d;for(;++h<i&&h<s&&!((d=u.get(t[h]))==null||d!==a+m);)m++;if(m>a-l){const p=t[o];for(;l<a;)e.insertBefore(r[l++],p)}else e.replaceChild(r[l++],t[o++])}else o++;else t[o++].remove()}}}const Jt="_$DX_DELEGATE";function xn(e,t,r,n={}){let i;return Xe(s=>{i=s,t===document?e():A(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function W(e,t,r){let n;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,r?o.content.firstChild.firstChild:o.content.firstChild},s=t?()=>ie(()=>document.importNode(n||(n=i()),!0)):()=>(n||(n=i())).cloneNode(!0);return s.cloneNode=s,s}function Le(e,t=window.document){const r=t[Jt]||(t[Jt]=new Set);for(let n=0,i=e.length;n<i;n++){const s=e[n];r.has(s)||(r.add(s),t.addEventListener(s,Cn))}}function Qt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Me(e,t){t==null?e.removeAttribute("class"):e.className=t}function G(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const i=r[0];e.addEventListener(t,r[0]=s=>i.call(e,r[1],s))}else e.addEventListener(t,r)}function Zt(e,t,r={}){const n=Object.keys(t||{}),i=Object.keys(r);let s,o;for(s=0,o=i.length;s<o;s++){const l=i[s];!l||l==="undefined"||t[l]||(er(e,l,!1),delete r[l])}for(s=0,o=n.length;s<o;s++){const l=n[s],c=!!t[l];!l||l==="undefined"||r[l]===c||!c||(er(e,l,!0),r[l]=c)}return r}function Pn(e,t,r){return ie(()=>e(t,r))}function A(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return rt(e,t,n,r);I(i=>rt(e,t(),i,r),n)}function er(e,t,r){const n=t.trim().split(/\s+/);for(let i=0,s=n.length;i<s;i++)e.classList.toggle(n[i],r)}function Cn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const i=r[`${t}Data`];if(i!==void 0?n.call(r,i,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function rt(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const s=typeof t,o=n!==void 0;if(e=o&&r[0]&&r[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),o){let l=r[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),r=ve(e,r,n,l)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||s==="boolean")r=ve(e,r,n);else{if(s==="function")return I(()=>{let l=t();for(;typeof l=="function";)l=l();r=rt(e,l,r,n)}),()=>r;if(Array.isArray(t)){const l=[],c=r&&Array.isArray(r);if(At(l,t,r,i))return I(()=>r=rt(e,l,r,n,!0)),()=>r;if(l.length===0){if(r=ve(e,r,n),o)return r}else c?r.length===0?tr(e,l,n):En(e,r,l):(r&&ve(e),tr(e,l));r=l}else if(t.nodeType){if(Array.isArray(r)){if(o)return r=ve(e,r,n,t);ve(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function At(e,t,r,n){let i=!1;for(let s=0,o=t.length;s<o;s++){let l=t[s],c=r&&r[s],u;if(!(l==null||l===!0||l===!1))if((u=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))i=At(e,l,c)||i;else if(u==="function")if(n){for(;typeof l=="function";)l=l();i=At(e,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||i}else e.push(l),i=!0;else{const a=String(l);c&&c.nodeType===3&&c.data===a?e.push(c):e.push(document.createTextNode(a))}}return i}function tr(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function ve(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const l=t[o];if(i!==l){const c=l.parentNode===e;!s&&!o?c?e.replaceChild(i,l):e.insertBefore(i,r):c&&l.remove()}else s=!0}}else e.insertBefore(i,r);return[i]}function he(e,t){for(let r in e)t(e[r],r)}function F(e,t){e.forEach(t)}function N(e,t){if(!e)throw Error(t)}function oe({node:e=[],from:t,source:r,parent:n=t||r,to:i,target:s,child:o=i||s,scope:l={},meta:c={},family:u={type:"regular"},regional:a}={}){let h=Ie(n),m=Ie(u.links),d=Ie(u.owners),p=[];F(e,g=>g&&X(p,g));let f={id:Mn(),seq:p,next:Ie(o),meta:c,scope:l,family:{type:u.type||"crosslink",links:m,owners:d}};return F(m,g=>X(ut(g),f)),F(d,g=>X(ct(g),f)),F(h,g=>X(g.next,f)),a&&ke&&Ce(Be(ke),[f]),f}function le(e,t,r){let n,i=te,s=null,o=P;if(e.target&&(t=e.params,r=e.defer,n=e.meta,i="page"in e?e.page:i,e.stack&&(s=e.stack),o=me(e)||o,e=e.target),o&&P&&o!==P&&(P=null),Array.isArray(e))for(let p=0;p<e.length;p++)pe("pure",i,U(e[p]),s,t[p],o,n);else pe("pure",i,U(e),s,t,o,n);if(r&&!We)return;let l,c,u,a,h,m,d={isRoot:We,currentPage:te,scope:P,isWatch:Ge,isPure:Je};We=0;e:for(;a=Bn();){let{idx:p,stack:f,type:g}=a;u=f.node,te=h=f.page,P=me(f),h?m=h.reg:P&&(m=P.reg);let S=!!h,b=!!P,y={fail:0,scope:u.scope};l=c=0;for(let w=p;w<u.seq.length&&!l;w++){let $=u.seq[w];if($.order){let{priority:_,barrierID:E}=$.order,R=E?h?`${h.fullID}_${E}`:E:0;if(w!==p||g!==_){E?St.has(R)||(St.add(R),Rt(w,f,_,E)):Rt(w,f,_);continue e}E&&St.delete(R)}switch($.type){case"mov":{let E,R=$.data;switch(R.from){case ge:E=Be(f);break;case"a":case"b":E=f[R.from];break;case"value":E=R.store;break;case"store":if(m&&!m[R.store.id])if(S){let bt=zr(h,R.store.id);f.page=h=bt,bt?m=bt.reg:b?(Oe(P,R.store,0,1,R.softRead),m=P.reg):m=void 0}else b&&Oe(P,R.store,0,1,R.softRead);E=qe(m&&m[R.store.id]||R.store)}switch(R.to){case ge:f.value=E;break;case"a":case"b":f[R.to]=E;break;case"store":Dn(h,P,u,R.target).current=E}break}case"compute":let _=$.data;if(_.fn){Ge=M(u,"op")==="watch",Je=_.pure;let E=_.safe?(0,_.fn)(Be(f),y.scope,f):Un(y,_.fn,f);_.filter?c=!E:f.value=E,Ge=d.isWatch,Je=d.isPure}}l=y.fail||c}if(!l){let w=Be(f),$=me(f);if(F(u.next,_=>{pe("child",h,_,f,w,$)}),$){M(u,"needFxCounter")&&pe("child",h,$.fxCount,f,w,$),M(u,"storeChange")&&pe("child",h,$.storeChange,f,w,$),M(u,"warnSerialize")&&pe("child",h,$.warnSerializeNode,f,w,$);let _=$.additionalLinks[u.id];_&&F(_,E=>{pe("child",h,E,f,w,$)})}}}We=d.isRoot,te=d.currentPage,P=me(d)}function kr(e,t="combine"){let r=t+"(",n="",i=0;return he(e,s=>{i<25&&(s!=null&&(r+=n,r+=re(s)?zt(s).fullName:s.toString()),i+=1,n=", ")}),r+")"}function Er(e,t){let r,n,i=e;if(t){let s=zt(t);e.length===0?(r=s.path,n=s.fullName):(r=s.path.concat([e]),n=s.fullName.length===0?e:s.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:i,fullName:n,path:r}}function je(e,t){let r=t?e:e[0];Lr(r);let n=r.or,i=r.and;if(i){let s=t?i:i[0];if(Q(s)&&"and"in s){let o=je(i,t);e=o[0],n={...n,...o[1]}}else e=i}return[e,n]}function B(e,...t){let r=Nr();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function v(e,t){let r=Re({or:t,and:typeof e=="string"?{name:e}:e}),n=(o,...l)=>(ye(!M(n,"derived"),"call of derived event","createEvent"),ye(!Je,"unit call from pure function","operators like sample"),te?((c,u,a,h)=>{let m=te,d=null;if(u)for(d=te;d&&d.template!==u;)d=ae(d);lr(d);let p=c.create(a,h);return lr(m),p})(n,i,o,l):n.create(o,l)),i=Nr(),s=Object.assign(n,{graphite:oe({meta:qr(r.actualOp||"event",n,r),regional:1}),create:o=>(le({target:n,params:o,scope:P}),o),watch:o=>Ir(n,o),map:o=>$t(n,xe,o,[ee()]),filter:o=>$t(n,"filter",o.fn?o:o.fn,[ee(Ft,1)]),filterMap:o=>$t(n,"filterMap",o,[ee(),J(l=>!H(l),1)]),prepend(o){let l=v("* → "+n.shortName,{parent:ae(n)});return B("eventPrepend",U(l)),de(l,n,[ee()],"prepend",o),Br(n,l),l}});return r!=null&&r.domain&&r.domain.hooks.event(s),Z(s,"id",s.graphite.id),Tr(s.graphite),s}function rr(e,t,r,n){return it(r,t,"first argument"),N(j(n),"second argument should be a function"),ye(!M(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),F(Array.isArray(r)?r:[r],i=>{e.off(i),nt(e).set(i,Fr(Dr(i,e,"on",Fn,n)))}),e}function k(e,t){let r=Re(t),n=be(e),i=v({named:"updates",derived:1});B("storeBase",n);let s=n.id,o={subscribers:new Map,updates:i,defaultState:e,stateRef:n,getState(){let d,p=n;if(te){let f=te;for(;f&&!f.reg[s];)f=ae(f);f&&(d=f)}return!d&&P&&(Oe(P,n,1),d=P),d&&(p=d.reg[s]),qe(p)},setState:d=>le({target:o,params:d,defer:1,scope:P}),reset:(...d)=>(F(d,p=>rr(o,".reset",p,()=>o.defaultState)),o),on:(d,p)=>rr(o,".on",d,p),off(d){let p=nt(o).get(d);return p&&(p(),nt(o).delete(d)),o},map(d,p){let f,g;Q(d)&&(f=d,d=d.fn),ye(H(p),"second argument of store.map","updateFilter");let S=o.getState();H(S)||(g=d(S,p));let b=k(g,{name:`${o.shortName} → *`,derived:1,and:f}),y=Dr(o,b,xe,Ot,d);return ot(q(b),{type:xe,fn:d,from:n}),q(b).noInit=1,B("storeMap",n,y),b},watch(d,p){if(!p||!re(d)){let f=Ir(o,d);return B("storeWatch",n,d)||d(o.getState()),f}return N(j(p),"second argument should be a function"),d.watch(f=>p(o.getState(),f))}},l=qr("store",o,r),c=o.defaultConfig.updateFilter;o.graphite=oe({scope:{state:n,fn:c},node:[J((d,p,f)=>(f.scope&&!f.scope.reg[n.id]&&(f.b=1),d)),ne(n),J((d,p,{a:f,b:g})=>!H(d)&&(d!==f||g),1),c&&ee(Ot,1),Y({from:ge,target:n})],child:i,meta:{...l,defaultState:e},regional:1}),Z(o,"id",o.graphite.id),Z(o,"rootStateRefId",s);let u=M(o,"serialize"),a=M(o,"derived"),h=u==="ignore",m=M(o,"sid");return m&&(Z(o,"storeChange",1),n.sid=m),m||h||a||Z(o,"warnSerialize",1),N(a||!H(e),"current state can't be undefined, use null instead"),Ce(o,[i]),r!=null&&r.domain&&r.domain.hooks.store(o),a||(o.reinit=v({named:"reinit"}),o.reset(o.reinit)),n.meta=o.graphite.meta,Tr(o.graphite),o}function ce(...e){let t,r,n;[e,n]=je(e);let i,s,o,l=e[e.length-1];if(j(l)?(r=e.slice(0,-1),t=l):r=e,r.length===1){let c=r[0];D(c)||(i=c,s=1)}if(!s&&(i=r,t)){o=1;let c=t;t=u=>c(...u)}return N(Q(i),"shape should be an object"),Vn(Array.isArray(i),!o,i,n,t)}function xr(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}function jt(e,t={}){let r=Re(j(e)?{handler:e}:e,t),n=v(j(e)?{handler:e}:e,{...t,actualOp:"effect"}),i=U(n);Z(i,"op",n.kind="effect"),n.use=d=>(N(j(d),".use argument should be a function"),a.scope.handler=d,n),n.use.getCurrent=()=>a.scope.handler;let s=n.finally=v({named:"finally",derived:1}),o=n.done=s.filterMap({named:"done",fn({status:d,params:p,result:f}){if(d==="done")return{params:p,result:f}}}),l=n.fail=s.filterMap({named:"fail",fn({status:d,params:p,error:f}){if(d==="fail")return{params:p,error:f}}}),c=n.doneData=o.map({named:"doneData",fn:({result:d})=>d}),u=n.failData=l.map({named:"failData",fn:({error:d})=>d}),a=oe({scope:{handler:n.defaultConfig.handler||(()=>N(0,`no handler used in ${n.getType()}`))},node:[J((d,p,f)=>{let g=p.handler,S=me(f);if(S){let b=S.handlers.unitMap.get(n)||S.handlers.sidMap[n.sid];b&&(g=b)}return d.handler=g,d},0,1),J(({params:d,req:p,handler:f,args:g=[d]},S,b)=>{let y=Ur(b),w=st(d,p,1,s,b,y),$=st(d,p,0,s,b,y),[_,E]=Hr(f,$,g);_&&(Q(E)&&j(E.then)?E.then(w,$):w(E))},0,1)],meta:{op:"fx",fx:"runner"}});i.scope.runner=a,X(i.seq,J((d,{runner:p},f)=>{let g=ae(f)?{params:d,req:{rs(S){},rj(S){}}}:d;return f.meta||(f.meta={fxID:jn()}),le({target:p,params:g,defer:1,scope:me(f),meta:f.meta}),g.params},0,1)),n.create=d=>{let p=xr(),f={params:d,req:p};if(P&&!Ge){let g=P;p.req.finally(()=>{qn(g)}).catch(()=>{})}return le({target:n,params:f,scope:P}),p.req};let h=n.inFlight=k(0,{serialize:"ignore",named:(M(n,"name")||n.graphite.id)+".inFlight"}).on(n,d=>d+1).on(s,d=>d-1).map({fn:d=>d,named:"inFlight"});Z(s,"needFxCounter","dec"),Z(n,"needFxCounter",1);let m=n.pending=h.map({fn:d=>d>0,named:"pending"});return Ce(n,[s,o,l,c,u,m,h]),r!=null&&r.domain&&r.domain.hooks.effect(n),n}function nr(e){let t;[e,t]=je(e,1);let{source:r,effect:n,mapParams:i}=e,s=jt(e,t);Z(s,"attached",1);let o,{runner:l}=U(s).scope,c=J((a,h,m)=>{let d,{params:p,req:f,handler:g}=a,S=s.finally,b=Ur(m),y=st(p,f,0,S,m,b),w=m.a,$=Pe(g),_=1;if(i?[_,d]=Hr(i,y,[p,w]):d=r&&$?w:p,_){if(!$)return a.args=[w,d],1;le({target:g,params:{params:d,req:{rs:st(p,f,1,S,m,b),rj:y}},page:m.page,defer:1,meta:m.meta})}},1,1);if(r){let a;D(r)?(a=r,Ce(a,[s])):(a=ce(r),Ce(s,[a])),o=[ne(q(a)),c]}else o=[c];l.seq.splice(1,0,...o),s.use(n);let u=ae(n);return u&&(Object.assign(zt(s),Er(s.shortName,u)),s.defaultConfig.parent=u),Br(n,s,"effect"),s}function Pr(e,t){it(e,"merge","first argument");let r=v({name:kr(e,"merge"),derived:1,and:t});return de(e,r,[],"merge"),r}function Cr(e,t){let r=0;return F(Kn,n=>{n in e&&(N(e[n]!=null,Vr(t,n)),r=1)}),r}function x(...e){let t,r,n,i,[[s,o,l],c]=je(e),u=1;return H(o)&&Q(s)&&Cr(s,"sample")&&(o=s.clock,l=s.fn,u=!s.greedy,i=s.filter,t=s.target,r=s.name,n=s.sid,s=s.source),Dt("sample",o,s,i,t,l,r,c,u,1,0,n)}function Fe(...e){let[[t,r],n]=je(e);return r||(r=t,t=r.source),Cr(r,"guard"),Dt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function An(e,t,r){if(D(e))return ye(0,"restore($store)"),e;if(Ar(e)||Pe(e)){let i=ae(e),s=k(t,{parent:i,name:e.shortName,and:r});return de(Pe(e)?e.doneData:e,s),i&&i.hooks.store(s),s}let n=Array.isArray(e)?[]:{};return he(e,(i,s)=>n[s]=D(i)?i:k(i,{name:s})),n}function On(...e){let t,r,n="split",[[i,s],o]=je(e),l=!s;l&&(t=i.cases,s=i.match,r=i.clock,i=i.source);let c=D(s),u=!re(s)&&j(s),a=!c&&!u&&Q(s);N(re(i),"source must be a unit"),t||(t={}),l?he(t,(f,g)=>Mr(n,f,`cases.${g}`)):(N(a,"match should be an object"),he(s,(f,g)=>t[g]=v({derived:1,named:`cases.${g}`,and:o})),t.__=v({derived:1,named:"cases.__",and:o}));let h,m=new Set([].concat(i,r||[],Object.values(t))),d=Object.keys(c||u?t:s);if(c||u)c&&m.add(s),h=[c&&ne(q(s),0,1),Ae({safe:c,filter:1,pure:!c,fn(f,g,S){let b=String(c?S.a:s(f));kt(g,ir(d,b)?b:"__",f,S)}})];else if(a){let f=be({});f.type="shape";let g,S=[];he(s,(b,y)=>{if(re(b)){g=1,X(S,y),m.add(b);let w=de(b,[],[ne(f),J(($,_,{a:E})=>E[y]=$)]);if(D(b)){f.current[y]=b.getState();let $=q(b);ot(f,{from:$,field:y,type:"field"}),B("splitMatchStore",$,w)}}}),g&&B("splitBase",f),h=[g&&ne(f,0,1),ee((b,y,w)=>{for(let $=0;$<d.length;$++){let _=d[$];if(ir(S,_)?w.a[_]:s[_](b))return void kt(y,_,b,w)}kt(y,"__",b,w)},1)]}else N(0,"expect match to be unit, function or object");let p=oe({meta:{op:n},parent:r?[]:i,scope:t,node:h,family:{owners:Array.from(m)},regional:1});if(r&&Dt(n,r,i,null,p,null,n,o,0,0,0),!l)return t}function Rn(e,{scope:t,safe:r}={}){N(t||P||r,"scopeBind cannot be called outside of forked .watch");let n=t||P;return Pe(e)?i=>{let s=xr();return le({target:e,params:{params:i,req:s},scope:n}),s.req}:i=>(le({target:e,params:i,scope:n}),i)}let Tn=typeof Symbol<"u"&&Symbol.observable||"@@observable",xe="map",ge="stack",U=e=>e.graphite||e,ut=e=>e.family.owners,ct=e=>e.family.links,q=e=>e.stateRef,Be=e=>e.value,nt=e=>e.subscribers,ae=e=>e.parent,me=e=>e.scope,M=(e,t)=>U(e).meta[t],Z=(e,t,r)=>U(e).meta[t]=r,zt=e=>e.compositeName,re=e=>(j(e)||Q(e))&&"kind"in e;const Ve=e=>t=>re(t)&&t.kind===e;let D=Ve("store"),Ar=Ve("event"),Pe=Ve("effect"),Or=Ve("domain"),Nn=Ve("scope");var _e={__proto__:null,unit:re,store:D,event:Ar,effect:Pe,domain:Or,scope:Nn,attached:e=>Pe(e)&&M(e,"attached")==1};let ir=(e,t)=>e.includes(t),Ye=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},X=(e,t)=>e.push(t),ye=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ft=()=>{let e=0;return()=>""+ ++e};let Ln=ft(),Rr=ft(),Mn=ft(),jn=ft(),ke=null,Tr=e=>{},Nr=()=>ke,zn=e=>(e&&ke&&ke.sidRoot&&(e=`${ke.sidRoot}|${e}`),e),Ce=(e,t)=>{let r=U(e);F(t,n=>{let i=U(n);r.family.type!=="domain"&&(i.family.type="crosslink"),X(ut(i),r),X(ct(r),i)})},Ie=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(U),Q=e=>typeof e=="object"&&e!==null,j=e=>typeof e=="function",H=e=>e===void 0,Lr=e=>N(Q(e)||j(e),"expect first argument be an object");const or=(e,t,r,n)=>N(!(!Q(e)&&!j(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let it=(e,t,r)=>{Array.isArray(e)?F(e,(n,i)=>or(n,t,`${i} item of ${r}`,"")):or(e,t,r," or array of units")},Mr=(e,t,r="target")=>F(Ie(t),n=>ye(!M(n,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore")),Ot=(e,{fn:t},{a:r})=>t(e,r),Fn=(e,{fn:t},{a:r})=>t(r,e),Ft=(e,{fn:t})=>t(e);const jr=(e,t,r,n)=>{let i={id:Rr(),type:e,data:t};return r&&(i.order={priority:r},n&&(i.order.barrierID=++In)),i};let In=0,Y=({from:e="store",store:t,target:r,to:n=r?"store":ge,batch:i,priority:s})=>jr("mov",{from:e,store:t,to:n,target:r},s,i),Ae=({fn:e,batch:t,priority:r,safe:n=0,filter:i=0,pure:s=0})=>jr("compute",{fn:e,safe:n,filter:i,pure:s},r,t),It=({fn:e})=>Ae({fn:e,priority:"effect"}),J=(e,t,r)=>Ae({fn:e,safe:1,filter:t,priority:r&&"effect"}),ne=(e,t,r)=>Y({store:e,to:t?ge:"a",priority:r&&"sampler",batch:1}),ee=(e=Ft,t)=>Ae({fn:e,pure:1,filter:t}),vt={mov:Y,compute:Ae,filter:({fn:e,pure:t})=>Ae({fn:e,filter:1,pure:t}),run:It},be=e=>({id:Rr(),current:e}),qe=({current:e})=>e,ot=(e,t)=>{e.before||(e.before=[]),X(e.before,t)},$e=null;const Bt=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Tt(e.v.type)>Tt(t.v.type))&&(r=e,e=t,t=r),r=Bt(e.r,t),e.r=e.l,e.l=r,e},qt=[];let sr=0;for(;sr<6;)X(qt,{first:null,last:null,size:0}),sr+=1;const Bn=()=>{for(let e=0;e<6;e++){let t=qt[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=$e.v;return $e=Bt($e.l,$e.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},pe=(e,t,r,n,i,s,o)=>Rt(0,{a:null,b:null,node:r,parent:n,value:i,page:t,scope:s,meta:o},e),Rt=(e,t,r,n=0)=>{let i=Tt(r),s=qt[i],o={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};i===3||i===4?$e=Bt($e,o):(s.size===0?s.first=o:s.last.r=o,s.last=o),s.size+=1},Tt=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},St=new Set;let P,We=1,Ge=0,Je=0,te=null,qn=e=>{P=e},lr=e=>{te=e};const zr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ae(e);if(e)return e}return null};let Dn=(e,t,r,n,i)=>{let s=zr(e,n.id);return s?s.reg[n.id]:t?(Oe(t,n,i),t.reg[n.id]):n};const Hn=e=>e;let Oe=(e,t,r,n,i)=>{var s;let o=e.reg,l=t.sid,c=t==null||(s=t.meta)===null||s===void 0?void 0:s.serialize,u=e.fromSerialize&&c!=="ignore"&&c?.read||Hn;if(o[t.id])return;let a={id:t.id,current:t.current,meta:t.meta};if(a.id in e.values.idMap)a.current=e.values.idMap[a.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap))a.current=u(e.values.sidMap[l]);else if(t.before&&!i){let h=0,m=r||!t.noInit||n;F(t.before,d=>{switch(d.type){case xe:{let p=d.from;if(p||d.fn){p&&Oe(e,p,r,n);let f=p&&o[p.id].current;m&&(a.current=d.fn?d.fn(f):f)}break}case"field":h||(h=1,a.current=Array.isArray(a.current)?[...a.current]:{...a.current}),Oe(e,d.from,r,n),m&&(a.current[d.field]=o[o[d.from.id].id].current)}})}l&&(e.sidIdMap[l]=t.id),o[t.id]=a};const Un=(e,t,r)=>{try{return t(Be(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let Re=(e,t={})=>(Q(e)&&(Re(e.or,t),he(e,(r,n)=>{H(r)||n==="or"||n==="and"||(t[n]=r)}),Re(e.and,t)),t);const ar=(e,t)=>{Ye(e.next,t),Ye(ut(e),t),Ye(ct(e),t)},Nt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let i=ct(e);for(;n=i.pop();)ar(n,e),(t||r&&M(e,"op")!=="sample"||n.family.type==="crosslink")&&Nt(n,t,M(n,"op")!=="on"&&r);for(i=ut(e);n=i.pop();)ar(n,e),r&&n.family.type==="crosslink"&&Nt(n,t,M(n,"op")!=="on"&&r)},ze=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),D(e))ze(nt(e));else if(Or(e)){r=1;let n=e.history;ze(n.events),ze(n.effects),ze(n.stores),ze(n.domains)}Nt(U(e),!!t,r)},Fr=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},de=(e,t,r,n,i)=>oe({node:r,parent:e,child:t,scope:{fn:i},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),Ir=(e,t)=>(N(j(t),".watch argument should be a function"),Fr(oe({scope:{fn:t},node:[It({fn:Ft})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Br=(e,t,r="event")=>{ae(e)&&ae(e).hooks[r](t)},qr=(e,t,r)=>{let n=Re(r),i=e==="domain",s=Ln(),{sid:o=null,named:l=null,domain:c=null,parent:u=c}=n,a=l||n.name||(i?"":s),h=Er(a,u),m={op:t.kind=e,name:t.shortName=a,sid:t.sid=zn(o),named:l,unitId:t.id=s,serialize:n.serialize,derived:n.derived,config:n};return t.parent=u,t.compositeName=h,t.defaultConfig=n,t.thru=d=>(ye(0,"thru","js pipe"),d(t)),t.getType=()=>h.fullName,!i&&(t.subscribe=d=>(Lr(d),t.watch(j(d)?d:p=>d.next&&d.next(p))),t[Tn]=()=>t),m};const $t=(e,t,r,n)=>{let i;Q(r)&&(i=r,r=r.fn);let s=v({name:`${e.shortName} → *`,derived:1,and:i});return de(e,s,n,t,r),s},Dr=(e,t,r,n,i)=>{let s=q(t),o=Y({store:s,to:"a",priority:"read"});r===xe&&(o.data.softRead=1);let l=[o,ee(n)];return B("storeOnMap",s,l,D(e)&&q(e)),de(e,t,l,r,i)},Vn=(e,t,r,n,i)=>{let s=e?p=>[...p]:p=>({...p}),o=e?[]:{},l=s(o),c=be(l),u=be(1);c.type=e?"list":"shape",c.noInit=1,B("combineBase",c,u);let a=k(l,{name:kr(r),derived:1,and:n}),h=q(a);h.noInit=1,Z(a,"isCombine",1);let m=ne(c);m.order={priority:"barrier"};let d=[J((p,f,g)=>(g.scope&&!g.scope.reg[c.id]&&(g.c=1),p)),m,Y({store:u,to:"b"}),J((p,{key:f},g)=>{if(g.c||p!==g.a[f])return t&&g.b&&(g.a=s(g.a)),g.a[f]=p,1},1),Y({from:"a",target:c}),Y({from:"value",store:0,target:u}),Y({from:"value",store:1,target:u,priority:"barrier",batch:1}),ne(c,1),i&&ee()];return he(r,(p,f)=>{if(!D(p))return N(!re(p)&&!H(p),`combine expects a store in a field ${f}`),void(l[f]=o[f]=p);o[f]=p.defaultState,l[f]=p.getState();let g=de(p,a,d,"combine",i);g.scope.key=f;let S=q(p);ot(c,{type:"field",field:f,from:S}),B("combineField",S,g)}),a.defaultShape=r,ot(h,{type:xe,from:c,fn:i}),a.defaultState=i?h.current=i(l):o,a};let Hr=(e,t,r)=>{try{return[1,e(...r)]}catch(n){return t(n),[0,null]}},Ur=e=>{let t=me(e),r={ref:t};return t&&X(t.activeEffects,r),r},st=(e,t,r,n,i,s)=>o=>{s.ref&&Ye(s.ref.activeEffects,s),le({target:[n,Wn],params:[r?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:r?t.rs:t.rj}],defer:1,page:i.page,scope:s.ref,meta:i.meta})};const Wn=oe({node:[It({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Kn=["source","clock","target"],Vr=(e,t)=>e+`: ${t} should be defined`;let Dt=(e,t,r,n,i,s,o,l,c,u,a,h)=>{let m=!!i;N(!H(r)||!H(t),Vr(e,"either source or clock"));let d=0;H(r)?d=1:re(r)||(r=ce(r)),H(t)?t=r:(it(t,e,"clock"),Array.isArray(t)&&(t=Pr(t))),d&&(r=t),l||o||(o=r.shortName);let p="none";(a||n)&&(re(n)?p="unit":(N(j(n),"`filter` should be function or unit"),p="fn")),i?(it(i,e,"target"),Mr(e,i)):p==="none"&&u&&D(r)&&D(t)?i=k(s?s(qe(q(r)),qe(q(t))):qe(q(r)),{name:o,sid:h,or:l}):(i=v({name:o,derived:1,or:l}),B("sampleTarget",U(i)));let f=be(),g=[];if(p==="unit"){let[w,$]=ur(n,i,t,f,e);g=[..._t($),..._t(w)]}let[S,b]=ur(r,i,t,f,e),y=de(t,i,[B("sampleSourceLoader"),Y({from:ge,target:f}),..._t(b),ne(S,1,c),...g,ne(f),p==="fn"&&ee((w,$,{a:_})=>n(w,_),1),s&&ee(Ot),B("sampleSourceUpward",m)],e,s);return Ce(r,[y]),Object.assign(y.meta,l,{joint:1}),i};const _t=e=>[ne(e),J((t,r,{a:n})=>n,1)],ur=(e,t,r,n,i)=>{let s=D(e),o=s?q(e):be(),l=be(s);return s||oe({parent:e,node:[Y({from:ge,target:o}),Y({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:i},regional:1}),B("sampleSource",l,o,n),[o,l]},kt=(e,t,r,n)=>{let i=e[t];i&&le({target:i,params:Array.isArray(i)?i.map(()=>r):r,defer:1,stack:n})};function Ht(){return{width:window.visualViewport?.width||600,height:window.visualViewport?.height||400}}function cr(e,t,r){return{x:t.x-e.col*r,y:t.y-e.row*r}}function Xn(e){let t=new Map;return e.forEach(({col:r,row:n})=>{t.has(r)||t.set(r,new Map),t.get(r).set(n,1)}),t}function Yn(e){let t=0,r=0,n=0;return e.size===0?{col:t,row:r}:(e.forEach((i,s)=>{n+=i.size,i.forEach((o,l)=>{t+=s,r+=l})}),{col:Math.round(t/n),row:Math.round(r/n)})}function Wr(e,t){try{let r=localStorage.getItem(e);return r===null?t:r}catch(r){return console.error(r),t}}function Kr(e,t){try{localStorage.setItem(e,t)}catch(r){console.error(r)}}function Gn(){return{currentBp:k(null)}}const Se=Ht();function Jn(e){const t="cellSize",r=[1,100];let n=+Wr(t,"10")||10;const i=k({size:n,prevSize:n}),s=k({width:Se.width,height:Se.height}),o=i.map(({size:h},m)=>({height:Math.ceil(Se.height/h),width:Math.ceil(Se.width/h),prevHeight:m&&m.height||Math.ceil(Se.height/h),prevWidth:m&&m.width||Math.ceil(Se.width/h)})),l=v(),c=v();let u=0;return document.addEventListener("wheel",h=>{u+=h.deltaY,u>20&&(c(),u=0),u<-20&&(l(),u=0)}),i.on(x({clock:c,filter:e}),({size:h})=>({size:Math.max(r[0],h-1),prevSize:h})).on(x({clock:l,filter:e}),({size:h})=>({size:Math.max(r[0],h+1),prevSize:h})),i.watch(h=>{Kr(t,String(h.size))}),{options:r,$cellSize:i,$fieldSize:o,plus:l,minus:c,$viewPortSize:s}}function Qn(){const e=v(),t=v(),r=k(null);return r.on(t,()=>null).on(e,(i,s)=>s),{$hoveredXY:r,fieldMouseLeaved:t,fieldMouseMoved:e}}function Zn(e,t){const r=k(null),n=k(null),i=k(null),s=v(),o=v(),l=v(),c=v(),u=v(),a=v(),h=v();function m(){document.addEventListener("mousedown",s),document.addEventListener("mouseup",o)}const d=e.map(f=>f!==null),p=e.map(f=>f==null);return i.on(s,()=>Date.now()),x({source:t,clock:s,filter:d,target:r}),x({source:e,clock:s,filter:d,target:n}),x({source:{currentHovered:e,initHovered:n,startTime:i},clock:o,filter:f=>!!f.initHovered&&!!f.currentHovered&&!!f.startTime,fn:({currentHovered:f,initHovered:g,startTime:S})=>({start:f,finish:g}),target:l}),x({source:{currentHovered:e,initFocus:r,initHovered:n},clock:e,filter:f=>!!f.initHovered&&!!f.initFocus&&!!f.currentHovered,fn:({currentHovered:f,initHovered:g,initFocus:S})=>({x:S.x+(f.x-g.x),y:S.y+(f.y-g.y)}),target:h}),On({source:l,match:f=>f.start.x===f.finish.x&&f.start.y===f.finish.y?"click":"dragEnd",cases:{click:u,dragEnd:a}}),x({clock:u,fn:f=>({coords:f.start}),target:c}),r.reset(l,p),n.reset(l,p),i.reset(l,p),{focusMoved:h,initEvents:m,clicked:c}}function Xr(e){var{timeout:t,start:r,stop:n,leading:i=!1,trailing:s=!1}=e,o=r??v({name:"setup",sid:"-ajedhm"}),l=n??v({name:"teardown",sid:"-ryi8gr"}),c=v({name:"tick",sid:"-cw8a02"}),u=k(!1,{name:"$isRunning",sid:"-5gspmy"}),a=ei(t),h=u.map(b=>!b),m=v({name:"saveTimeout",sid:"satd6r"}),d=k(null,{name:"$timeoutId",sid:"hehxq7"}).on(m,(b,y)=>{var{timeoutId:w}=y;return w}),p=k(()=>{},{name:"$rejecter",sid:"-sc3eh9"}).on(m,(b,y)=>{var{reject:w}=y;return w}),f=nr({and:{source:{timeout:a,running:u},effect:b=>{var{timeout:y,running:w}=b;return w?new Promise(($,_)=>{var E=setTimeout($,y);m({timeoutId:E,reject:_})}):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=nr({and:{source:{timeoutId:d,rejecter:p},effect:b=>{var{timeoutId:y,rejecter:w}=b;w(),y&&clearTimeout(y)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if(Fe({and:[{clock:o,source:a,filter:h,target:f}],or:{sid:"-us95i7"}}),i){var S=Fe({and:[{clock:o,filter:h}],or:{name:"onReady",sid:"farho0"}});x({and:[{clock:S,target:c}],or:{sid:"-ubrbnn"}})}return x({and:[{clock:o,fn:()=>!0,target:u}],or:{sid:"-ua3xxa"}}),Fe({and:[{clock:f.done,source:a,filter:u,target:f}],or:{sid:"6lcmx8"}}),Fe({and:[{clock:f.done,filter:u,target:c.prepend(()=>{})}],or:{sid:"6p772r"}}),s&&x({and:[{clock:l,target:c}],or:{sid:"75p0xb"}}),u.on(l,()=>!1),x({and:[{clock:l,target:g}],or:{sid:"7ln232"}}),{tick:c,isRunning:u,"@@trigger":()=>({setup:o,teardown:l,fired:c})}}function ei(e){if(_e.store(e,{sid:"8i2x6t"}))return e;if(typeof e=="number")return k(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}function fr(e){var{source:t,timeout:r,target:n=v({name:"target",sid:"r328r6"},{name:"target",sid:"r328r6"})}=e;if(!_e.unit(t))throw new TypeError("source must be unit from effector");var i=ti(r),s=jt(u=>new Promise(a=>setTimeout(a,u)),{name:"timerFx",sid:"-pyjx8k"}),o=k(null,{and:{serialize:"ignore"},name:"$payload",sid:"hinjft"}).on(t,(u,a)=>a),l=v({name:"triggerTick",sid:"-sf8sou"}),c=k(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"-m0cqc"}).on(l,()=>!1).on(n,()=>!0);return Fe({and:[{clock:t,filter:c,target:l}],or:{sid:"-hzhj9b"}}),x({and:[{source:i,clock:l,target:s}],or:{sid:"-hkn38k"}}),x({and:[{source:o,clock:s.done,target:n}],or:{sid:"-hhcboe"}}),n}function ti(e){if(_e.store(e,{sid:"-h0ap6r"}))return e;if(typeof e=="number"){if(e<0||!Number.isFinite(e))throw new Error('timeout must be positive number or zero. Received: "'.concat(e,'"'));return k(e,{and:{name:"$timeout"},sid:"-h97n10"})}throw new TypeError('timeout parameter should be number or Store. "'.concat(typeof e,'" was passed'))}function ri(e,t,r){const n=k(0),i=k({prev:0,delta:0}).reset(t),s=v(),o=v(),l=fr({source:s,timeout:100}),c=fr({source:r,timeout:300}),u=Xr({timeout:1e3,start:o});n.on(l,(m,d)=>d),x({source:{stepsPerSec:i,steps:e},clock:u.tick,fn:({stepsPerSec:m,steps:d})=>({prev:d,delta:d-m.prev}),target:i});const a=[];o(),h();function h(){window.requestAnimationFrame(()=>{const m=performance.now();for(;a.length>0&&a[0]<=m-1e3;)a.shift();a.push(m),h()}),s(a.length)}return{$fps:n,$stepsPerSec:i.map(m=>m.delta),$time:An(c,0)}}function ni(e,t){const r="expectedStepsPerSec";let n=+Wr(r,"10")||10;const i=v(),s=v(),o=v(),l=v(),c=v(),u=v(),a=k(!1),h=k(0),m=[1,200],d=k(n),p=d.map(y=>1e3/y),f=v(),g=v(),S=k(null),b=Xr({timeout:p,start:s,stop:Pr([l,o,u])});return x({clock:[b.tick,s,c],filter:ce(a,t,(y,w)=>y&&!w),target:i}),x({clock:c,target:i}),x({source:e,clock:s,fn:y=>new Map(y),target:S}),a.on(s,()=>!0).on([o,l],()=>!1).reset(u),d.on(f,y=>{if(y===1)return 5;let w=y+5;return w>m[1]?m[1]:w}).on(g,y=>{let w=y-5;return w<1?1:w}),S.on(u,()=>null),h.on(i,y=>y+1).on(o,()=>0).reset(u),d.watch(y=>{Kr(r,String(y))}),{$currentStep:h,$expectedStepsPerSec:d,$isRunning:a,$startFauna:S,start:s,stop:o,pause:l,incExpectedStepsPerSec:f,decExpectedStepsPerSec:g,speedRange:m,gameTick:i,reset:u,oneStep:c}}const Te=Qn(),T=Jn(Te.$hoveredXY.map(e=>!!e));Gn();const V=k({fauna:Xn([]),time:0,size:0}),ii=k([]),Yr=k(!1),Ut=v(),dt=v();Yr.on(Ut,()=>!0).on(dt,()=>!1);const z=ni(V.map(e=>e.fauna),Yr),Et=ri(z.$currentStep,z.reset,dt.map(e=>e.time)),ue=k({x:0,y:0}),oi=v(),Vt=v(),Wt=v(),Kt=Zn(Te.$hoveredXY,ue);x({source:[ue,Te.$hoveredXY],clock:T.$cellSize,fn:([e,t],{size:r,prevSize:n})=>{if(t){let i={col:(t.x-e.x)/n,row:(t.y-e.y)/n};return cr(i,t,r)}else{let i=Ht(),s={x:i.width/2,y:i.height/2},o={col:(s.x-e.x)/n,row:(s.y-e.y)/n};return cr(o,s,r)}},target:ue});const Gr=ce(V,ue,T.$cellSize,T.$viewPortSize,({fauna:e},t,{size:r},n)=>{const i=[];return e.forEach((s,o)=>{s.forEach((l,c)=>{const u=o*r+t.x,a=c*r+t.y;u>=0&&u<n.width&&a>=0&&a<n.height&&i.push([u,a])})}),i}),si=ce(Gr,V,(e,t)=>({fieldCellsAmount:e.length,faunaCellsAmount:t.size})),li=ce(ii,T.$fieldSize,T.$cellSize,ue,(e,{width:t,height:r},{size:n},i)=>{const s=[];return e.forEach(({col:o,row:l,label:c})=>{const u=o+i.x/n,a=l+i.y/n;u>=0&&u<t&&a>=0&&a<r&&s.push({col:u,row:a,label:c})}),s}),ai=ce(Gr,T.$cellSize,(e,t)=>({size:t,field:e})),ui=ce(Te.$hoveredXY,T.$cellSize,ue,(e,{size:t},r)=>{if(e){const n=Math.floor((e.x-r.x)/t),i=Math.floor((e.y-r.y)/t),s=(n*t+r.x).toFixed(0),o=(i*t+r.y).toFixed(0);return[{x:s,y:o}]}return[]}),ci=ce(li,T.$cellSize,(e,{size:t})=>e.map(({row:r,col:n,label:i})=>({y:r*t+"px",x:n*t+"px",label:i})));x({source:V,clock:z.gameTick,fn:e=>e.fauna,target:Ut});V.on(dt,(e,t)=>t).reset(Wt);ue.on(Kt.focusMoved,(e,t)=>t).reset(oi);x({source:{faunaData:V,fieldSize:T.$fieldSize,cellSize:T.$cellSize},clock:Vt,fn:({faunaData:e,fieldSize:t,cellSize:r})=>{const n=Yn(e.fauna);return{x:(t.width/2-n.col)*r.size,y:(t.height/2-n.row)*r.size}},target:ue});x({source:{faunaData:V,screenOffsetXY:ue,cellSize:T.$cellSize},clock:Kt.clicked,fn:({faunaData:e,screenOffsetXY:t,cellSize:{size:r}},{coords:n})=>{const i=new Map(e.fauna),s=Math.floor((n.x-t.x)/r),o=Math.floor((n.y-t.y)/r);return i.has(s)||i.set(s,new Map),i.get(s).has(o)?i.get(s).delete(o):i.get(s).set(o,1),{...e,fauna:i}},target:V});const pt=k(""),Jr=v(),Xt=v(),mt=v();v();v();pt.on(Jr,(e,t)=>t);var De={},Qr={},ht={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNone=e.isSome=e.None=e.Some=e.OptionType=void 0,e.OptionType={Some:Symbol(":some"),None:Symbol(":none")};function t(o){return typeof o>"u"?n():r(o)}e.Some=t,e.None=n();function r(o){return{type:e.OptionType.Some,isSome(){return!0},isNone(){return!1},match(l){return l.some(o)},map(l){return r(l(o))},andThen(l){return l(o)},or(l){return this},and(l){return l},unwrapOr(l){return o},unwrap(){return o}}}function n(){return{type:e.OptionType.None,isSome(){return!1},isNone(){return!0},match(o){const{none:l}=o;return typeof l=="function"?l():l},map(o){return n()},andThen(o){return n()},or(o){return o},and(o){return n()},unwrapOr(o){if(o==null)throw new Error("Cannot call unwrapOr with a missing value.");return o},unwrap(){throw new ReferenceError("Trying to unwrap None.")}}}function i(o){return o.isSome()}e.isSome=i;function s(o){return o.isNone()}e.isNone=s})(ht);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRight=e.isLeft=e.Right=e.Left=e.EitherType=void 0;const t=ht;e.EitherType={Left:Symbol(":left"),Right:Symbol(":right")};function r(o){return{type:e.EitherType.Left,isLeft(){return!0},isRight(){return!1},left(){return(0,t.Some)(o)},leftAndThen(l){return l(o)},right(){return t.None},rightAndThen(l){return r(o)},unwrap(){return o},unwrapLeft(){return o},unwrapLeftOr(l){return o},unwrapLeftOrElse(l){return o},unwrapRight(){throw new ReferenceError("Cannot unwrap Right value of Either.Left")},unwrapRightOr(l){return l},unwrapRightOrElse(l){return l(o)},match(l){return l.left(o)},map(l){return r(l(o))},mapLeft(l){return r(l(o))},mapRight(l){return r(o)}}}e.Left=r;function n(o){return{type:e.EitherType.Right,isLeft(){return!1},isRight(){return!0},left(){return t.None},leftAndThen(l){return n(o)},right(){return(0,t.Some)(o)},rightAndThen(l){return l(o)},unwrap(){return o},unwrapLeft(){throw new ReferenceError("Cannot unwrap Left value of Either.Right")},unwrapLeftOr(l){return l},unwrapLeftOrElse(l){return l(o)},unwrapRight(){return o},unwrapRightOr(l){return o},unwrapRightOrElse(l){return o},match(l){return l.right(o)},map(l){return n(l(o))},mapLeft(l){return n(o)},mapRight(l){return n(l(o))}}}e.Right=n;function i(o){return o.isLeft()}e.isLeft=i;function s(o){return o.isRight()}e.isRight=s})(Qr);var Zr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isErr=e.isOk=e.Err=e.Ok=e.ResultType=void 0;const t=ht;e.ResultType={Ok:Symbol(":ok"),Err:Symbol(":err")};function r(o){return{type:e.ResultType.Ok,isOk(){return!0},isErr(){return!1},ok(){return(0,t.Some)(o)},err(){return t.None},unwrap(){return o},unwrapOr(l){return o},unwrapOrElse(l){return o},unwrapErr(){throw new ReferenceError("Cannot unwrap Err value of Result.Ok")},match(l){return l.ok(o)},map(l){return r(l(o))},mapErr(l){return r(o)},andThen(l){return l(o)},orElse(l){return r(o)}}}e.Ok=r;function n(o){return{type:e.ResultType.Err,isOk(){return!1},isErr(){return!0},ok(){return t.None},err(){return(0,t.Some)(o)},unwrap(){throw new ReferenceError("Cannot unwrap Ok value of Result.Err")},unwrapOr(l){return l},unwrapOrElse(l){return l(o)},unwrapErr(){return o},match(l){return l.err(o)},map(l){return n(o)},mapErr(l){return n(l(o))},andThen(l){return n(o)},orElse(l){return l(o)}}}e.Err=n;function i(o){return o.isOk()}e.isOk=i;function s(o){return o.isErr()}e.isErr=s})(Zr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ok=e.isOk=e.isErr=e.Err=e.Some=e.None=e.isSome=e.isNone=e.Right=e.Left=e.isRight=e.isLeft=void 0;var t=Qr;Object.defineProperty(e,"isLeft",{enumerable:!0,get:function(){return t.isLeft}}),Object.defineProperty(e,"isRight",{enumerable:!0,get:function(){return t.isRight}}),Object.defineProperty(e,"Left",{enumerable:!0,get:function(){return t.Left}}),Object.defineProperty(e,"Right",{enumerable:!0,get:function(){return t.Right}});var r=ht;Object.defineProperty(e,"isNone",{enumerable:!0,get:function(){return r.isNone}}),Object.defineProperty(e,"isSome",{enumerable:!0,get:function(){return r.isSome}}),Object.defineProperty(e,"None",{enumerable:!0,get:function(){return r.None}}),Object.defineProperty(e,"Some",{enumerable:!0,get:function(){return r.Some}});var n=Zr;Object.defineProperty(e,"Err",{enumerable:!0,get:function(){return n.Err}}),Object.defineProperty(e,"isErr",{enumerable:!0,get:function(){return n.isErr}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"Ok",{enumerable:!0,get:function(){return n.Ok}})})(De);const fi="b",dr="o";function di(e){let t=pi(e);if(t.isNone())return[];let r=t.unwrap(),n=r.right-r.left+1,i=r.bottom-r.top+1,s=Array(i).fill(0).map(()=>Array(n).fill(0));for(let[o,l]of e.entries())for(let[c,u]of l.entries())s[c-r.top][o-r.left]=1;return s}function en(e){let t=new Map;const r="b",n="o",i="$";let s="",o=0,l=0;for(let c=0;c<e.length;c++){let u=e[c];if(!(u===`
`||u==="!"))if(u.charCodeAt(0)>=48&&u.charCodeAt(0)<=57)s+=u;else{let a=+s||1;if(u===r)l+=a;else if(u===n)for(let h=0;h<a;h++)t.has(l)||t.set(l,new Map),t.get(l).set(o,1),l++;else if(u===i)o+=a,l=0;else return De.None;s=""}}return De.Some(t)}function pi(e){let t=1/0,r=-1/0,n=1/0,i=-1/0;for(let[s,o]of e.entries())for(let[l,c]of o.entries())s<n&&(n=s),s>i&&(i=s),l<t&&(t=l),l>r&&(r=l);return Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)?De.Some({top:t,bottom:r,left:n,right:i}):De.None}function tn(e){let t=di(e);return mi(t.map(n=>r(n)).join("$"))+"!";function r(n){let i="",s=n[0],o=1;for(let l=1;l<n.length;l++){let c=n[l];if(s===c){o++;continue}o>1&&(i+=o),i+=s===0?fi:dr,s=c,o=1}return s===1&&(o>1&&(i+=o),i+=dr),i}}function mi(e){let t="",r=0;for(let n=0;n<e.length;n++){let i=e[n];i!="$"?(r===1&&(t+="$"),r>1&&(t+=r+"$"),t+=i,r=0):r++}return t}const gt=k(gi()||[]),rn=v(),nn=v(),on=v(),yt=v(),sn=v();gt.on(rn,(e,t)=>{let r=0;for(;e.find(n=>n.name===`save #${r}`);)r++;return[...e,{rle:tn(t),name:`save #${r}`,removed:!1}]}).on(nn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!0}:r)).on(on,(e,t)=>e.map(r=>r.name===t?{...r,removed:!1}:r));x({source:gt,target:jt(e=>{hi("history",e)})});function hi(e,t){let r=t.filter(n=>!n.removed).map(({name:n,rle:i})=>({rle:i,name:n}));localStorage.setItem(e,JSON.stringify(r))}function gi(){try{return(JSON.parse(localStorage.getItem("history")||"null")||[]).map(({rle:r,name:n})=>({rle:r,name:n,removed:!1}))}catch(e){return console.error(e),[]}}x({source:V,clock:sn,fn:e=>e.fauna,target:rn});x({source:gt,clock:yt,fn:(e,t)=>{const r=e.find(n=>n.name===t).rle;return{fauna:en(r).unwrapOr(new Map),time:0,size:0}},target:V});x({clock:[yt,Wt,Xt,mt],target:z.reset});x({source:V,clock:Xt,fn:({fauna:e})=>tn(e),target:pt});x({source:pt,clock:mt,fn:e=>({fauna:en(e).unwrapOr(new Map),time:0,size:0}),target:V});x({clock:[yt,mt],target:Vt});const pr="#5583e5",yi="_field_2r2xy_1",bi="_cell_2r2xy_17",wi="_on1_2r2xy_25",vi="_on2_2r2xy_28",Si="_hoveredCell_2r2xy_32",$i="_heartMode_2r2xy_36",_i="_label_2r2xy_44",Ke={field:yi,cell:bi,on1:wi,on2:vi,hoveredCell:Si,heartMode:$i,label:_i};function we(e,t){var r;return((n,i)=>{let s=!_e.unit(n)&&typeof n=="object",o={};n&&"@@unitShape"in n?typeof n["@@unitShape"]=="function"?o=n["@@unitShape"]():xt("expect @@unitShape to be a function"):o=s?n:{unit:n};let l=Array.isArray(o),c=Object.entries(o),u=l?[]:{},a=[],h={},m={};for(let[p,f]of c)if(_e.store(f))if(h[f.graphite.id]){let g=h[f.graphite.id];u[p]=u[g],m[p]=u[g]}else{a.push(f),h[f.graphite.id]=p;let[g,S]=br(mr(f,i));u[p]=g,m[p]=S}else _e.unit(f)||xt("expected useUnit argument to be a unit"),u[p]=i?Rn(f,{scope:i}):f;let d=[vt.compute({priority:"effect"}),vt.compute({priority:"sampler",batch:1}),vt.run({fn:()=>{fn(()=>{for(let p of a)m[h[p.graphite.id]](()=>mr(p,i))})}})];if(i){let p=oe({node:d}),f=i.additionalLinks,g=[];a.forEach(S=>{let b=S.graphite.id,y=f[b]||[];f[b]=y,y.push(p),g.push(y)}),Pt(()=>{g.forEach(S=>{let b=S.indexOf(p);b!==-1&&S.splice(b,1)}),Lt(p)})}else{let p=oe({node:d,parent:a,family:{owners:a}});Pt(()=>{Lt(p)})}return s?u:u.unit})(e,((n=1)=>{let i=mn(ki);return n&&!i&&xt("No scope found, consider adding <Provider> to app root"),i})((r=t?.forceScope)!==null&&r!==void 0?r:0))}let xt=e=>{throw Error(e)};const mr=(e,t)=>t?t.getState(e):e.getState();let ki=pn(null);const Ei=W("<div><canvas>"),hr=W("<div>");function xi(){let e=Ht(),[t,r,n]=we([ui,ci,T.$cellSize]),i;dn(()=>{requestAnimationFrame(o);function o(){if(!i){console.warn("no canvas");return}let{size:{size:l},field:c}=ai.getState();const u=i.getContext("2d");if(!u){console.warn("no context");return}let{width:a,height:h}=i.getBoundingClientRect();u.clearRect(0,0,a,h),u.fillStyle=pr,u.beginPath(),l>10?c.forEach(m=>{u.rect(m[0]+1,m[1]+1,l-1,l-1)}):c.forEach(m=>{u.rect(m[0],m[1],l,l)}),u.fill(),requestAnimationFrame(o)}});let s=0;return(()=>{const o=Ei(),l=o.firstChild;return G(o,"mouseleave",Te.fieldMouseLeaved),o.$$mousemove=({clientX:c,clientY:u})=>Te.fieldMouseMoved({x:c,y:u}),o.style.setProperty("--color1",pr),Pn(c=>i=c,l),l.addEventListener("wheel",c=>{s+=c.deltaY,s>20&&(T.minus(),s=0),s<-20&&(T.plus(),s=0)}),A(o,()=>t().map(c=>(()=>{const u=hr();return I(a=>{const h=c.x+"px",m=c.y+"px",d={[Ke.cell]:!0,[Ke.hoveredCell]:!0};return h!==a._v$5&&((a._v$5=h)!=null?u.style.setProperty("left",h):u.style.removeProperty("left")),m!==a._v$6&&((a._v$6=m)!=null?u.style.setProperty("top",m):u.style.removeProperty("top")),a._v$7=Zt(u,d,a._v$7),a},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),u})()),null),A(o,()=>r().map(c=>(()=>{const u=hr();return A(u,()=>c.label),I(a=>{const h=c.x,m=c.y,d={[Ke.label]:!0};return h!==a._v$8&&((a._v$8=h)!=null?u.style.setProperty("left",h):u.style.removeProperty("left")),m!==a._v$9&&((a._v$9=m)!=null?u.style.setProperty("top",m):u.style.removeProperty("top")),a._v$10=Zt(u,d,a._v$10),a},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),u})()),null),I(c=>{const u=Ke.field,a=n().size+"px",h=e.width,m=e.height;return u!==c._v$&&Me(o,c._v$=u),a!==c._v$2&&((c._v$2=a)!=null?o.style.setProperty("--cellSize",a):o.style.removeProperty("--cellSize")),h!==c._v$3&&Qt(l,"width",c._v$3=h),m!==c._v$4&&Qt(l,"height",c._v$4=m),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o})()}Le(["mousemove"]);const Pi="_roundBox_hgest_1",Ci="_history_hgest_9",Ai="_colorBtn_hgest_15",Oi="_currentColor_hgest_22",Ri="_arrowBtn_hgest_26",Ti="_whiteBox_hgest_54",He={roundBox:Pi,history:Ci,colorBtn:Ai,currentColor:Oi,arrowBtn:Ri,whiteBox:Ti},Ni=W("<div><button>-</button><button>+");function ln(e){return(()=>{const t=Ni(),r=t.firstChild,n=r.nextSibling;return G(r,"click",e.onMinusClicked,!0),A(t,()=>` ${e.value} `,n),G(n,"click",e.onPlusClicked,!0),I(i=>{const s=e.class,o=e.value<=e.range[0],l=e.value>=e.range[1];return s!==i._v$&&Me(t,i._v$=s),o!==i._v$2&&(r.disabled=i._v$2=o),l!==i._v$3&&(n.disabled=i._v$3=l),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}Le(["click"]);const Li=W("<div><button>to center</button><div>");function Mi(){const[e]=we([T.$cellSize]);return Kt.initEvents(),(()=>{const t=Li(),r=t.firstChild,n=r.nextSibling;return G(r,"click",Vt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("right","150px"),n.style.setProperty("bottom","20px"),n.style.setProperty("z-index","1"),A(n,K(ln,{get value(){return e().size},get onPlusClicked(){return T.plus},get onMinusClicked(){return T.minus},get range(){return T.options},get class(){return He.roundBox}})),I(()=>Me(r,He.arrowBtn)),t})()}Le(["click"]);const ji=W("<button>STOP"),zi=W("<button>START"),Fi=W("<p><button>Step</button>timer: ");function Ii(){let[e,t]=we([z.$isRunning,z.$currentStep]);return(()=>{const r=Fi(),n=r.firstChild;return n.nextSibling,r.style.setProperty("display","flex"),r.style.setProperty("gap","4px"),r.style.setProperty("position","absolute"),G(n,"click",z.oneStep,!0),A(r,K(Gt,{get when(){return e()},get children(){const i=ji();return G(i,"click",z.stop,!0),i.style.setProperty("color","#f8f8f8"),i.style.setProperty("background-color","#de4040"),i.style.setProperty("border","0"),i}}),null),A(r,K(Gt,{get when(){return!e()},get children(){const i=zi();return G(i,"click",z.start,!0),i.style.setProperty("color","#f8f8f8"),i.style.setProperty("background-color","#50c40e"),i.style.setProperty("border","0"),i}}),null),A(r,()=>`steps: ${t()}`,null),I(()=>Me(r,He.whiteBox)),r})()}Le(["click"]);const Bi=W("<div><span>FPS: </span><span>STEPS PER SEC: </span><span>EXPECTED STEPS:</span><span>CALC TIME: <!> msec</span><span>CELLS: </span><span>CELLS ON SCREEN: ");function qi(){const[e,t,r]=we([Et.$stepsPerSec,Et.$time,Et.$fps]),[n,i]=we([si,z.$expectedStepsPerSec]);return(()=>{const s=Bi(),o=s.firstChild;o.firstChild;const l=o.nextSibling;l.firstChild;const c=l.nextSibling,u=c.nextSibling,a=u.firstChild,h=a.nextSibling;h.nextSibling;const m=u.nextSibling;m.firstChild;const d=m.nextSibling;return d.firstChild,s.style.setProperty("position","absolute"),s.style.setProperty("display","grid"),s.style.setProperty("top","10px"),s.style.setProperty("right","10px"),A(o,r,null),A(l,e,null),A(s,K(ln,{get value(){return i()},get onPlusClicked(){return z.incExpectedStepsPerSec},get onMinusClicked(){return z.decExpectedStepsPerSec},get range(){return z.speedRange}}),u),A(u,t,h),A(m,()=>n().faunaCellsAmount,null),A(d,()=>n().fieldCellsAmount,null),I(()=>Me(s,He.whiteBox)),s})()}const Di=W("<div><p>History: </p><button>Save"),Hi=W("<div><button>"),Ui=W("<button>x");function Vi(){let[e]=we([gt]);return(()=>{const t=Di(),r=t.firstChild,n=r.nextSibling;return r.style.setProperty("margin","0"),G(n,"click",sn,!0),n.style.setProperty("margin-right","20px"),A(t,K(kn,{get each(){return e()},children:i=>(()=>{const s=Hi(),o=s.firstChild;return o.$$click=()=>{i.removed?on(i.name):yt(i.name)},A(o,()=>i.removed?`restore ${i.name}`:i.name),A(s,(()=>{const l=Ee(()=>!!i.removed);return()=>l()?null:(()=>{const c=Ui();return c.$$click=()=>{nn(i.name)},c})()})(),null),s})()}),null),I(()=>Me(t,He.history)),t})()}Le(["click"]);const Wi=W("<div><div><h1>Game of Life</h1></div><button>Reset</button><div><button>Export</button><button>Import</button><br><textarea>");function Ki(){let[e]=we([pt]);return(()=>{const t=Wi(),r=t.firstChild;r.firstChild;const n=r.nextSibling,i=n.nextSibling,s=i.firstChild,o=s.nextSibling,l=o.nextSibling,c=l.nextSibling;return A(t,K(Mi,{}),r),A(t,K(xi,{}),r),r.style.setProperty("position","absolute"),r.style.setProperty("width","100%"),r.style.setProperty("background-color","rgba(255,255,255, 0.9)"),r.style.setProperty("border-bottom","1px solid #ccc"),A(r,K(Vi,{}),null),A(r,K(Ii,{}),null),A(t,K(qi,{}),n),G(n,"click",Wt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","20px"),n.style.setProperty("left","20px"),i.style.setProperty("position","absolute"),i.style.setProperty("bottom","50px"),i.style.setProperty("left","20px"),G(s,"click",Xt,!0),G(o,"click",mt,!0),c.addEventListener("change",u=>Jr(u.target.value)),c.style.setProperty("font-size","8px"),c.style.setProperty("width","100%"),c.style.setProperty("height","100px"),c.style.setProperty("line-height","1"),I(()=>c.value=e()),t})()}Xi();function Xi(){const e=new Worker("./webworkerGo.js");e.addEventListener("message",t=>{dt(t.data)}),e.addEventListener("error",t=>{console.log("main.error err",t)}),Ut.watch(t=>{e.postMessage(t)})}xn(()=>K(Ki,{}),document.querySelector("#app"));Le(["click"]);
