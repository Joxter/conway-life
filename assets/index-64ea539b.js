(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const ln=(e,t)=>e===t,sn=Symbol("solid-track"),Qe={equals:ln};let hr=br;const fe=1,Ze=2,mr={owned:null,cleanups:null,context:null,owner:null};var C=null;let wt=null,O=null,T=null,ie=null,lt=0;function Ye(e,t){const r=O,n=C,o=e.length===0,l=t===void 0?n:t,i=o?mr:{owned:null,cleanups:null,context:l?l.context:null,owner:l},s=o?e:()=>e(()=>re(()=>st(i)));C=i,O=null;try{return Ne(s,!0)}finally{O=r,C=n}}function zt(e,t){t=t?Object.assign({},Qe,t):Qe;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),yr(r,o));return[gr.bind(r),n]}function B(e,t,r){const n=Mt(e,t,!1,fe);He(n)}function un(e,t,r){hr=gn;const n=Mt(e,t,!1,fe);(!r||!r.render)&&(n.user=!0),ie?ie.push(n):He(n)}function Pe(e,t,r){r=r?Object.assign({},Qe,r):Qe;const n=Mt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,He(n),gr.bind(n)}function an(e){return Ne(e,!1)}function re(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function cn(e){un(()=>re(e))}function xt(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function fn(e,t){const r=Symbol("context");return{id:r,Provider:bn(r),defaultValue:e}}function dn(e){return C&&C.context&&C.context[e.id]!==void 0?C.context[e.id]:e.defaultValue}function pn(e){const t=Pe(e),r=Pe(()=>Et(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function gr(){if(this.sources&&this.state)if(this.state===fe)He(this);else{const e=T;T=null,Ne(()=>tt(this),!1),T=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function yr(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Ne(()=>{for(let o=0;o<e.observers.length;o+=1){const l=e.observers[o],i=wt&&wt.running;i&&wt.disposed.has(l),(i?!l.tState:!l.state)&&(l.pure?T.push(l):ie.push(l),l.observers&&wr(l)),i||(l.state=fe)}if(T.length>1e6)throw T=[],new Error},!1)),t}function He(e){if(!e.fn)return;st(e);const t=C,r=O,n=lt;O=C=e,hn(e,e.value,n),O=r,C=t}function hn(e,t,r){let n;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(st),e.owned=null),e.updatedAt=r+1,$r(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?yr(e,n):e.value=n,e.updatedAt=r)}function Mt(e,t,r,n=fe,o){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:C?C.context:null,pure:r};return C===null||C!==mr&&(C.owned?C.owned.push(l):C.owned=[l]),l}function et(e){if(e.state===0)return;if(e.state===Ze)return tt(e);if(e.suspense&&re(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<lt);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===fe)He(e);else if(e.state===Ze){const n=T;T=null,Ne(()=>tt(e,t[0]),!1),T=n}}function Ne(e,t){if(T)return e();let r=!1;t||(T=[]),ie?r=!0:ie=[],lt++;try{const n=e();return mn(r),n}catch(n){r||(ie=null),T=null,$r(n)}}function mn(e){if(T&&(br(T),T=null),e)return;const t=ie;ie=null,t.length&&Ne(()=>hr(t),!1)}function br(e){for(let t=0;t<e.length;t++)et(e[t])}function gn(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:et(n)}for(t=0;t<r;t++)et(e[t])}function tt(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const o=n.state;o===fe?n!==t&&(!n.updatedAt||n.updatedAt<lt)&&et(n):o===Ze&&tt(n,t)}}}function wr(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ze,r.pure?T.push(r):ie.push(r),r.observers&&wr(r))}}function st(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const l=o.pop(),i=r.observerSlots.pop();n<o.length&&(l.sourceSlots[i]=n,o[n]=l,r.observerSlots[n]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)st(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function yn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function $r(e,t=C){throw yn(e)}function Et(e){if(typeof e=="function"&&!e.length)return Et(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Et(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function bn(e,t){return function(n){let o;return B(()=>o=re(()=>(C.context={...C.context,[e]:n.value},pn(()=>n.children))),void 0),o}}const wn=Symbol("fallback");function Yt(e){for(let t=0;t<e.length;t++)e[t]()}function $n(e,t,r={}){let n=[],o=[],l=[],i=0,s=t.length>1?[]:null;return xt(()=>Yt(l)),()=>{let p=e()||[],d,u;return p[sn],re(()=>{let m=p.length,a,c,f,g,w,y,b,$,S;if(m===0)i!==0&&(Yt(l),l=[],n=[],o=[],i=0,s&&(s=[])),r.fallback&&(n=[wn],o[0]=Ye(P=>(l[0]=P,r.fallback())),i=1);else if(i===0){for(o=new Array(m),u=0;u<m;u++)n[u]=p[u],o[u]=Ye(h);i=m}else{for(f=new Array(m),g=new Array(m),s&&(w=new Array(m)),y=0,b=Math.min(i,m);y<b&&n[y]===p[y];y++);for(b=i-1,$=m-1;b>=y&&$>=y&&n[b]===p[$];b--,$--)f[$]=o[b],g[$]=l[b],s&&(w[$]=s[b]);for(a=new Map,c=new Array($+1),u=$;u>=y;u--)S=p[u],d=a.get(S),c[u]=d===void 0?-1:d,a.set(S,u);for(d=y;d<=b;d++)S=n[d],u=a.get(S),u!==void 0&&u!==-1?(f[u]=o[d],g[u]=l[d],s&&(w[u]=s[d]),u=c[u],a.set(S,u)):l[d]();for(u=y;u<m;u++)u in f?(o[u]=f[u],l[u]=g[u],s&&(s[u]=w[u],s[u](u))):o[u]=Ye(h);o=o.slice(0,i=m),n=p.slice(0)}return o});function h(m){if(l[u]=m,s){const[a,c]=zt(u);return s[u]=c,t(p[u],a)}return t(p[u])}}}function U(e,t){return re(()=>e(t||{}))}const vn=e=>`Stale read from <${e}>.`;function Sn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Pe($n(()=>e.each,e.children,t||void 0))}function Kt(e){const t=e.keyed,r=Pe(()=>e.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return Pe(()=>{const n=r();if(n){const o=e.children;return typeof o=="function"&&o.length>0?re(()=>o(t?n:()=>{if(!re(r))throw vn("Show");return e.when})):o}return e.fallback},void 0,void 0)}function _n(e,t,r){let n=r.length,o=t.length,l=n,i=0,s=0,p=t[o-1].nextSibling,d=null;for(;i<o||s<l;){if(t[i]===r[s]){i++,s++;continue}for(;t[o-1]===r[l-1];)o--,l--;if(o===i){const u=l<n?s?r[s-1].nextSibling:r[l-s]:p;for(;s<l;)e.insertBefore(r[s++],u)}else if(l===s)for(;i<o;)(!d||!d.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[l-1]&&r[s]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(r[s++],t[i++].nextSibling),e.insertBefore(r[--l],u),t[o]=r[l]}else{if(!d){d=new Map;let h=s;for(;h<l;)d.set(r[h],h++)}const u=d.get(t[i]);if(u!=null)if(s<u&&u<l){let h=i,m=1,a;for(;++h<o&&h<l&&!((a=d.get(t[h]))==null||a!==u+m);)m++;if(m>u-s){const c=t[i];for(;s<u;)e.insertBefore(r[s++],c)}else e.replaceChild(r[s++],t[i++])}else i++;else t[i++].remove()}}}const Gt="_$DX_DELEGATE";function kn(e,t,r,n={}){let o;return Ye(l=>{o=l,t===document?e():k(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function D(e,t,r){let n;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:i.content.firstChild},l=t?()=>re(()=>document.importNode(n||(n=o()),!0)):()=>(n||(n=o())).cloneNode(!0);return l.cloneNode=l,l}function Te(e,t=window.document){const r=t[Gt]||(t[Gt]=new Set);for(let n=0,o=e.length;n<o;n++){const l=e[n];r.has(l)||(r.add(l),t.addEventListener(l,xn))}}function Jt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Le(e,t){t==null?e.removeAttribute("class"):e.className=t}function ee(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=l=>o.call(e,r[1],l))}else e.addEventListener(t,r)}function Qt(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let l,i;for(l=0,i=o.length;l<i;l++){const s=o[l];!s||s==="undefined"||t[s]||(Zt(e,s,!1),delete r[s])}for(l=0,i=n.length;l<i;l++){const s=n[l],p=!!t[s];!s||s==="undefined"||r[s]===p||!p||(Zt(e,s,!0),r[s]=p)}return r}function Pn(e,t,r){return re(()=>e(t,r))}function k(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return rt(e,t,n,r);B(o=>rt(e,t(),o,r),n)}function Zt(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,l=n.length;o<l;o++)e.classList.toggle(n[o],r)}function xn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(o!==void 0?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function rt(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const l=typeof t,i=n!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),i){let s=r[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),r=$e(e,r,n,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||l==="boolean")r=$e(e,r,n);else{if(l==="function")return B(()=>{let s=t();for(;typeof s=="function";)s=s();r=rt(e,s,r,n)}),()=>r;if(Array.isArray(t)){const s=[],p=r&&Array.isArray(r);if(Ct(s,t,r,o))return B(()=>r=rt(e,s,r,n,!0)),()=>r;if(s.length===0){if(r=$e(e,r,n),i)return r}else p?r.length===0?er(e,s,n):_n(e,r,s):(r&&$e(e),er(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=$e(e,r,n,t);$e(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function Ct(e,t,r,n){let o=!1;for(let l=0,i=t.length;l<i;l++){let s=t[l],p=r&&r[l],d;if(!(s==null||s===!0||s===!1))if((d=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))o=Ct(e,s,p)||o;else if(d==="function")if(n){for(;typeof s=="function";)s=s();o=Ct(e,Array.isArray(s)?s:[s],Array.isArray(p)?p:[p])||o}else e.push(s),o=!0;else{const u=String(s);p&&p.nodeType===3&&p.data===u?e.push(p):e.push(document.createTextNode(u))}}return o}function er(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function $e(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let l=!1;for(let i=t.length-1;i>=0;i--){const s=t[i];if(o!==s){const p=s.parentNode===e;!l&&!i?p?e.replaceChild(o,s):e.insertBefore(o,r):p&&s.remove()}else l=!0}}else e.insertBefore(o,r);return[o]}function ut(e,t){for(let r in e)t(e[r],r)}function F(e,t){e.forEach(t)}function M(e,t){if(!e)throw Error(t)}function le({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:l,child:i=o||l,scope:s={},meta:p={},family:d={type:"regular"},regional:u}={}){let h=je(n),m=je(d.links),a=je(d.owners),c=[];F(e,g=>g&&Q(c,g));let f={id:Nn(),seq:c,next:je(i),meta:p,scope:s,family:{type:d.type||"crosslink",links:m,owners:a}};return F(m,g=>Q(at(g),f)),F(a,g=>Q(ct(g),f)),F(h,g=>Q(g.next,f)),u&&ke&&Ce(Fe(ke),[f]),f}function ce(e,t,r){let n,o=Z,l=null,i=E;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(l=e.stack),i=pe(e)||i,e=e.target),i&&E&&i!==E&&(E=null),Array.isArray(e))for(let c=0;c<e.length;c++)de("pure",o,H(e[c]),l,t[c],i,n);else de("pure",o,H(e),l,t,i,n);if(r&&!Ve)return;let s,p,d,u,h,m,a={isRoot:Ve,currentPage:Z,scope:E,isWatch:Ge,isPure:Je};Ve=0;e:for(;u=Fn();){let{idx:c,stack:f,type:g}=u;d=f.node,Z=h=f.page,E=pe(f),h?m=h.reg:E&&(m=E.reg);let w=!!h,y=!!E,b={fail:0,scope:d.scope};s=p=0;for(let $=c;$<d.seq.length&&!s;$++){let S=d.seq[$];if(S.order){let{priority:P,barrierID:x}=S.order,R=x?h?`${h.fullID}_${x}`:x:0;if($!==c||g!==P){x?vt.has(R)||(vt.add(R),Rt($,f,P,x)):Rt($,f,P);continue e}x&&vt.delete(R)}switch(S.type){case"mov":{let x,R=S.data;switch(R.from){case he:x=Fe(f);break;case"a":case"b":x=f[R.from];break;case"value":x=R.store;break;case"store":if(m&&!m[R.store.id])if(w){let bt=Tr(h,R.store.id);f.page=h=bt,bt?m=bt.reg:y?(Oe(E,R.store,0,1,R.softRead),m=E.reg):m=void 0}else y&&Oe(E,R.store,0,1,R.softRead);x=Ie(m&&m[R.store.id]||R.store)}switch(R.to){case he:f.value=x;break;case"a":case"b":f[R.to]=x;break;case"store":Bn(h,E,d,R.target).current=x}break}case"compute":let P=S.data;if(P.fn){Ge=z(d,"op")==="watch",Je=P.pure;let x=P.safe?(0,P.fn)(Fe(f),b.scope,f):qn(b,P.fn,f);P.filter?p=!x:f.value=x,Ge=a.isWatch,Je=a.isPure}}s=b.fail||p}if(!s){let $=Fe(f),S=pe(f);if(F(d.next,P=>{de("child",h,P,f,$,S)}),S){z(d,"needFxCounter")&&de("child",h,S.fxCount,f,$,S),z(d,"storeChange")&&de("child",h,S.storeChange,f,$,S),z(d,"warnSerialize")&&de("child",h,S.warnSerializeNode,f,$,S);let P=S.additionalLinks[d.id];P&&F(P,x=>{de("child",h,x,f,$,S)})}}}Ve=a.isRoot,Z=a.currentPage,E=pe(a)}function vr(e,t="combine"){let r=t+"(",n="",o=0;return ut(e,l=>{o<25&&(l!=null&&(r+=n,r+=me(l)?Ft(l).fullName:l.toString()),o+=1,n=", ")}),r+")"}function Sr(e,t){let r,n,o=e;if(t){let l=Ft(t);e.length===0?(r=l.path,n=l.fullName):(r=l.path.concat([e]),n=l.fullName.length===0?e:l.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:o,fullName:n,path:r}}function We(e,t){let r=t?e:e[0];Rr(r);let n=r.or,o=r.and;if(o){let l=t?o:o[0];if(ne(l)&&"and"in l){let i=We(o,t);e=i[0],n={...n,...i[1]}}else e=o}return[e,n]}function X(e,...t){let r=Or();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function v(e,t){let r=Re({or:t,and:typeof e=="string"?{name:e}:e}),n=(i,...s)=>(ge(!z(n,"derived"),"call of derived event","createEvent"),ge(!Je,"unit call from pure function","operators like sample"),Z?((p,d,u,h)=>{let m=Z,a=null;if(d)for(a=Z;a&&a.template!==d;)a=se(a);ir(a);let c=p.create(u,h);return ir(m),c})(n,o,i,s):n.create(i,s)),o=Or(),l=Object.assign(n,{graphite:le({meta:jr(r.actualOp||"event",n,r),regional:1}),create:i=>(ce({target:n,params:i,scope:E}),i),watch:i=>zr(n,i),map:i=>St(n,xe,i,[oe()]),filter:i=>St(n,"filter",i.fn?i:i.fn,[oe(It,1)]),filterMap:i=>St(n,"filterMap",i,[oe(),te(s=>!q(s),1)]),prepend(i){let s=v("* → "+n.shortName,{parent:se(n)});return X("eventPrepend",H(s)),we(s,n,[oe()],"prepend",i),Mr(n,s),s}});return r!=null&&r.domain&&r.domain.hooks.event(l),J(l,"id",l.graphite.id),Ar(l.graphite),l}function tr(e,t,r,n){return ot(r,t,"first argument"),M(I(n),"second argument should be a function"),ge(!z(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),F(Array.isArray(r)?r:[r],o=>{e.off(o),nt(e).set(o,Lr(Fr(o,e,"on",Mn,n)))}),e}function _(e,t){let r=Re(t),n=Ae(e),o=v({named:"updates",derived:1});X("storeBase",n);let l=n.id,i={subscribers:new Map,updates:o,defaultState:e,stateRef:n,getState(){let a,c=n;if(Z){let f=Z;for(;f&&!f.reg[l];)f=se(f);f&&(a=f)}return!a&&E&&(Oe(E,n,1),a=E),a&&(c=a.reg[l]),Ie(c)},setState:a=>ce({target:i,params:a,defer:1,scope:E}),reset:(...a)=>(F(a,c=>tr(i,".reset",c,()=>i.defaultState)),i),on:(a,c)=>tr(i,".on",a,c),off(a){let c=nt(i).get(a);return c&&(c(),nt(i).delete(a)),i},map(a,c){let f,g;ne(a)&&(f=a,a=a.fn),ge(q(c),"second argument of store.map","updateFilter");let w=i.getState();q(w)||(g=a(w,c));let y=_(g,{name:`${i.shortName} → *`,derived:1,and:f}),b=Fr(i,y,xe,At,a);return Ot(Y(y),{type:xe,fn:a,from:n}),Y(y).noInit=1,X("storeMap",n,b),y},watch(a,c){if(!c||!me(a)){let f=zr(i,a);return X("storeWatch",n,a)||a(i.getState()),f}return M(I(c),"second argument should be a function"),a.watch(f=>c(i.getState(),f))}},s=jr("store",i,r),p=i.defaultConfig.updateFilter;i.graphite=le({scope:{state:n,fn:p},node:[te((a,c,f)=>(f.scope&&!f.scope.reg[n.id]&&(f.b=1),a)),ye(n),te((a,c,{a:f,b:g})=>!q(a)&&(a!==f||g),1),p&&oe(At,1),V({from:he,target:n})],child:o,meta:{...s,defaultState:e},regional:1}),J(i,"id",i.graphite.id),J(i,"rootStateRefId",l);let d=z(i,"serialize"),u=z(i,"derived"),h=d==="ignore",m=z(i,"sid");return m&&(J(i,"storeChange",1),n.sid=m),m||h||u||J(i,"warnSerialize",1),M(u||!q(e),"current state can't be undefined, use null instead"),Ce(i,[o]),r!=null&&r.domain&&r.domain.hooks.store(i),u||(i.reinit=v({named:"reinit"}),i.reset(i.reinit)),n.meta=i.graphite.meta,Ar(i.graphite),i}function ue(...e){let t,r,n;[e,n]=We(e);let o,l,i,s=e[e.length-1];if(I(s)?(r=e.slice(0,-1),t=s):r=e,r.length===1){let p=r[0];K(p)||(o=p,l=1)}if(!l&&(o=r,t)){i=1;let p=t;t=d=>p(...d)}return M(ne(o),"shape should be an object"),Hn(Array.isArray(o),!i,o,n,t)}function _r(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}function jt(e,t={}){let r=Re(I(e)?{handler:e}:e,t),n=v(I(e)?{handler:e}:e,{...t,actualOp:"effect"}),o=H(n);J(o,"op",n.kind="effect"),n.use=a=>(M(I(a),".use argument should be a function"),u.scope.handler=a,n),n.use.getCurrent=()=>u.scope.handler;let l=n.finally=v({named:"finally",derived:1}),i=n.done=l.filterMap({named:"done",fn({status:a,params:c,result:f}){if(a==="done")return{params:c,result:f}}}),s=n.fail=l.filterMap({named:"fail",fn({status:a,params:c,error:f}){if(a==="fail")return{params:c,error:f}}}),p=n.doneData=i.map({named:"doneData",fn:({result:a})=>a}),d=n.failData=s.map({named:"failData",fn:({error:a})=>a}),u=le({scope:{handler:n.defaultConfig.handler||(()=>M(0,`no handler used in ${n.getType()}`))},node:[te((a,c,f)=>{let g=c.handler,w=pe(f);if(w){let y=w.handlers.unitMap.get(n)||w.handlers.sidMap[n.sid];y&&(g=y)}return a.handler=g,a},0,1),te(({params:a,req:c,handler:f,args:g=[a]},w,y)=>{let b=Br(y),$=it(a,c,1,l,y,b),S=it(a,c,0,l,y,b),[P,x]=Ir(f,S,g);P&&(ne(x)&&I(x.then)?x.then($,S):$(x))},0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=u,Q(o.seq,te((a,{runner:c},f)=>{let g=se(f)?{params:a,req:{rs(w){},rj(w){}}}:a;return f.meta||(f.meta={fxID:Tn()}),ce({target:c,params:g,defer:1,scope:pe(f),meta:f.meta}),g.params},0,1)),n.create=a=>{let c=_r(),f={params:a,req:c};if(E&&!Ge){let g=E;c.req.finally(()=>{In(g)}).catch(()=>{})}return ce({target:n,params:f,scope:E}),c.req};let h=n.inFlight=_(0,{serialize:"ignore",named:(z(n,"name")||n.graphite.id)+".inFlight"}).on(n,a=>a+1).on(l,a=>a-1).map({fn:a=>a,named:"inFlight"});J(l,"needFxCounter","dec"),J(n,"needFxCounter",1);let m=n.pending=h.map({fn:a=>a>0,named:"pending"});return Ce(n,[l,i,s,p,d,m,h]),r!=null&&r.domain&&r.domain.hooks.effect(n),n}function rr(e){let t;[e,t]=We(e,1);let{source:r,effect:n,mapParams:o}=e,l=jt(e,t);J(l,"attached",1);let i,{runner:s}=H(l).scope,p=te((u,h,m)=>{let a,{params:c,req:f,handler:g}=u,w=l.finally,y=Br(m),b=it(c,f,0,w,m,y),$=m.a,S=Ee(g),P=1;if(o?[P,a]=Ir(o,b,[c,$]):a=r&&S?$:c,P){if(!S)return u.args=[$,a],1;ce({target:g,params:{params:a,req:{rs:it(c,f,1,w,m,y),rj:b}},page:m.page,defer:1,meta:m.meta})}},1,1);if(r){let u;K(r)?(u=r,Ce(u,[l])):(u=ue(r),Ce(l,[u])),i=[ye(Y(u)),p]}else i=[p];s.seq.splice(1,0,...i),l.use(n);let d=se(n);return d&&(Object.assign(Ft(l),Sr(l.shortName,d)),l.defaultConfig.parent=d),Mr(n,l,"effect"),l}function kr(e,t){ot(e,"merge","first argument");let r=v({name:vr(e,"merge"),derived:1,and:t});return we(e,r,[],"merge"),r}function Pr(e,t){let r=0;return F(Un,n=>{n in e&&(M(e[n]!=null,Dr(t,n)),r=1)}),r}function A(...e){let t,r,n,o,[[l,i,s],p]=We(e),d=1;return q(i)&&ne(l)&&Pr(l,"sample")&&(i=l.clock,s=l.fn,d=!l.greedy,o=l.filter,t=l.target,r=l.name,n=l.sid,l=l.source),qr("sample",i,l,o,t,s,r,p,d,1,0,n)}function Me(...e){let[[t,r],n]=We(e);return r||(r=t,t=r.source),Pr(r,"guard"),qr("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function En(e,t,r){if(K(e))return ge(0,"restore($store)"),e;if(xr(e)||Ee(e)){let o=se(e),l=_(t,{parent:o,name:e.shortName,and:r});return we(Ee(e)?e.doneData:e,l),o&&o.hooks.store(l),l}let n=Array.isArray(e)?[]:{};return ut(e,(o,l)=>n[l]=K(o)?o:_(o,{name:l})),n}function Cn(e,{scope:t,safe:r}={}){M(t||E||r,"scopeBind cannot be called outside of forked .watch");let n=t||E;return Ee(e)?o=>{let l=_r();return ce({target:e,params:{params:o,req:l},scope:n}),l.req}:o=>(ce({target:e,params:o,scope:n}),o)}let An=typeof Symbol<"u"&&Symbol.observable||"@@observable",xe="map",he="stack",H=e=>e.graphite||e,at=e=>e.family.owners,ct=e=>e.family.links,Y=e=>e.stateRef,Fe=e=>e.value,nt=e=>e.subscribers,se=e=>e.parent,pe=e=>e.scope,z=(e,t)=>H(e).meta[t],J=(e,t,r)=>H(e).meta[t]=r,Ft=e=>e.compositeName,me=e=>(I(e)||ne(e))&&"kind"in e;const Ue=e=>t=>me(t)&&t.kind===e;let K=Ue("store"),xr=Ue("event"),Ee=Ue("effect"),Er=Ue("domain"),On=Ue("scope");var _e={__proto__:null,unit:me,store:K,event:xr,effect:Ee,domain:Er,scope:On,attached:e=>Ee(e)&&z(e,"attached")==1};let Ke=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},Q=(e,t)=>e.push(t),ge=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ft=()=>{let e=0;return()=>""+ ++e};let Rn=ft(),Cr=ft(),Nn=ft(),Tn=ft(),ke=null,Ar=e=>{},Or=()=>ke,Ln=e=>(e&&ke&&ke.sidRoot&&(e=`${ke.sidRoot}|${e}`),e),Ce=(e,t)=>{let r=H(e);F(t,n=>{let o=H(n);r.family.type!=="domain"&&(o.family.type="crosslink"),Q(at(o),r),Q(ct(r),o)})},je=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(H),ne=e=>typeof e=="object"&&e!==null,I=e=>typeof e=="function",q=e=>e===void 0,Rr=e=>M(ne(e)||I(e),"expect first argument be an object");const nr=(e,t,r,n)=>M(!(!ne(e)&&!I(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let ot=(e,t,r)=>{Array.isArray(e)?F(e,(n,o)=>nr(n,t,`${o} item of ${r}`,"")):nr(e,t,r," or array of units")},zn=(e,t,r="target")=>F(je(t),n=>ge(!z(n,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore")),At=(e,{fn:t},{a:r})=>t(e,r),Mn=(e,{fn:t},{a:r})=>t(r,e),It=(e,{fn:t})=>t(e);const Nr=(e,t,r,n)=>{let o={id:Cr(),type:e,data:t};return r&&(o.order={priority:r},n&&(o.order.barrierID=++jn)),o};let jn=0,V=({from:e="store",store:t,target:r,to:n=r?"store":he,batch:o,priority:l})=>Nr("mov",{from:e,store:t,to:n,target:r},l,o),Be=({fn:e,batch:t,priority:r,safe:n=0,filter:o=0,pure:l=0})=>Nr("compute",{fn:e,safe:n,filter:o,pure:l},r,t),Bt=({fn:e})=>Be({fn:e,priority:"effect"}),te=(e,t,r)=>Be({fn:e,safe:1,filter:t,priority:r&&"effect"}),ye=(e,t,r)=>V({store:e,to:t?he:"a",priority:r&&"sampler",batch:1}),oe=(e=It,t)=>Be({fn:e,pure:1,filter:t}),$t={mov:V,compute:Be,filter:({fn:e,pure:t})=>Be({fn:e,filter:1,pure:t}),run:Bt},Ae=e=>({id:Cr(),current:e}),Ie=({current:e})=>e,Ot=(e,t)=>{e.before||(e.before=[]),Q(e.before,t)},Se=null;const Dt=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Nt(e.v.type)>Nt(t.v.type))&&(r=e,e=t,t=r),r=Dt(e.r,t),e.r=e.l,e.l=r,e},qt=[];let or=0;for(;or<6;)Q(qt,{first:null,last:null,size:0}),or+=1;const Fn=()=>{for(let e=0;e<6;e++){let t=qt[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=Se.v;return Se=Dt(Se.l,Se.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},de=(e,t,r,n,o,l,i)=>Rt(0,{a:null,b:null,node:r,parent:n,value:o,page:t,scope:l,meta:i},e),Rt=(e,t,r,n=0)=>{let o=Nt(r),l=qt[o],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};o===3||o===4?Se=Dt(Se,i):(l.size===0?l.first=i:l.last.r=i,l.last=i),l.size+=1},Nt=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},vt=new Set;let E,Ve=1,Ge=0,Je=0,Z=null,In=e=>{E=e},ir=e=>{Z=e};const Tr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=se(e);if(e)return e}return null};let Bn=(e,t,r,n,o)=>{let l=Tr(e,n.id);return l?l.reg[n.id]:t?(Oe(t,n,o),t.reg[n.id]):n};const Dn=e=>e;let Oe=(e,t,r,n,o)=>{var l;let i=e.reg,s=t.sid,p=t==null||(l=t.meta)===null||l===void 0?void 0:l.serialize,d=e.fromSerialize&&p!=="ignore"&&p?.read||Dn;if(i[t.id])return;let u={id:t.id,current:t.current,meta:t.meta};if(u.id in e.values.idMap)u.current=e.values.idMap[u.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap))u.current=d(e.values.sidMap[s]);else if(t.before&&!o){let h=0,m=r||!t.noInit||n;F(t.before,a=>{switch(a.type){case xe:{let c=a.from;if(c||a.fn){c&&Oe(e,c,r,n);let f=c&&i[c.id].current;m&&(u.current=a.fn?a.fn(f):f)}break}case"field":h||(h=1,u.current=Array.isArray(u.current)?[...u.current]:{...u.current}),Oe(e,a.from,r,n),m&&(u.current[a.field]=i[i[a.from.id].id].current)}})}s&&(e.sidIdMap[s]=t.id),i[t.id]=u};const qn=(e,t,r)=>{try{return t(Fe(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let Re=(e,t={})=>(ne(e)&&(Re(e.or,t),ut(e,(r,n)=>{q(r)||n==="or"||n==="and"||(t[n]=r)}),Re(e.and,t)),t);const lr=(e,t)=>{Ke(e.next,t),Ke(at(e),t),Ke(ct(e),t)},Tt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let o=ct(e);for(;n=o.pop();)lr(n,e),(t||r&&z(e,"op")!=="sample"||n.family.type==="crosslink")&&Tt(n,t,z(n,"op")!=="on"&&r);for(o=at(e);n=o.pop();)lr(n,e),r&&n.family.type==="crosslink"&&Tt(n,t,z(n,"op")!=="on"&&r)},ze=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),K(e))ze(nt(e));else if(Er(e)){r=1;let n=e.history;ze(n.events),ze(n.effects),ze(n.stores),ze(n.domains)}Tt(H(e),!!t,r)},Lr=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},we=(e,t,r,n,o)=>le({node:r,parent:e,child:t,scope:{fn:o},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),zr=(e,t)=>(M(I(t),".watch argument should be a function"),Lr(le({scope:{fn:t},node:[Bt({fn:It})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Mr=(e,t,r="event")=>{se(e)&&se(e).hooks[r](t)},jr=(e,t,r)=>{let n=Re(r),o=e==="domain",l=Rn(),{sid:i=null,named:s=null,domain:p=null,parent:d=p}=n,u=s||n.name||(o?"":l),h=Sr(u,d),m={op:t.kind=e,name:t.shortName=u,sid:t.sid=Ln(i),named:s,unitId:t.id=l,serialize:n.serialize,derived:n.derived,config:n};return t.parent=d,t.compositeName=h,t.defaultConfig=n,t.thru=a=>(ge(0,"thru","js pipe"),a(t)),t.getType=()=>h.fullName,!o&&(t.subscribe=a=>(Rr(a),t.watch(I(a)?a:c=>a.next&&a.next(c))),t[An]=()=>t),m};const St=(e,t,r,n)=>{let o;ne(r)&&(o=r,r=r.fn);let l=v({name:`${e.shortName} → *`,derived:1,and:o});return we(e,l,n,t,r),l},Fr=(e,t,r,n,o)=>{let l=Y(t),i=V({store:l,to:"a",priority:"read"});r===xe&&(i.data.softRead=1);let s=[i,oe(n)];return X("storeOnMap",l,s,K(e)&&Y(e)),we(e,t,s,r,o)},Hn=(e,t,r,n,o)=>{let l=e?c=>[...c]:c=>({...c}),i=e?[]:{},s=l(i),p=Ae(s),d=Ae(1);p.type=e?"list":"shape",p.noInit=1,X("combineBase",p,d);let u=_(s,{name:vr(r),derived:1,and:n}),h=Y(u);h.noInit=1,J(u,"isCombine",1);let m=ye(p);m.order={priority:"barrier"};let a=[te((c,f,g)=>(g.scope&&!g.scope.reg[p.id]&&(g.c=1),c)),m,V({store:d,to:"b"}),te((c,{key:f},g)=>{if(g.c||c!==g.a[f])return t&&g.b&&(g.a=l(g.a)),g.a[f]=c,1},1),V({from:"a",target:p}),V({from:"value",store:0,target:d}),V({from:"value",store:1,target:d,priority:"barrier",batch:1}),ye(p,1),o&&oe()];return ut(r,(c,f)=>{if(!K(c))return M(!me(c)&&!q(c),`combine expects a store in a field ${f}`),void(s[f]=i[f]=c);i[f]=c.defaultState,s[f]=c.getState();let g=we(c,u,a,"combine",o);g.scope.key=f;let w=Y(c);Ot(p,{type:"field",field:f,from:w}),X("combineField",w,g)}),u.defaultShape=r,Ot(h,{type:xe,from:p,fn:o}),u.defaultState=o?h.current=o(s):i,u};let Ir=(e,t,r)=>{try{return[1,e(...r)]}catch(n){return t(n),[0,null]}},Br=e=>{let t=pe(e),r={ref:t};return t&&Q(t.activeEffects,r),r},it=(e,t,r,n,o,l)=>i=>{l.ref&&Ke(l.ref.activeEffects,l),ce({target:[n,Wn],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:o.page,scope:l.ref,meta:o.meta})};const Wn=le({node:[Bt({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Un=["source","clock","target"],Dr=(e,t)=>e+`: ${t} should be defined`;let qr=(e,t,r,n,o,l,i,s,p,d,u,h)=>{let m=!!o;M(!q(r)||!q(t),Dr(e,"either source or clock"));let a=0;q(r)?a=1:me(r)||(r=ue(r)),q(t)?t=r:(ot(t,e,"clock"),Array.isArray(t)&&(t=kr(t))),a&&(r=t),s||i||(i=r.shortName);let c="none";(u||n)&&(me(n)?c="unit":(M(I(n),"`filter` should be function or unit"),c="fn")),o?(ot(o,e,"target"),zn(e,o)):c==="none"&&d&&K(r)&&K(t)?o=_(l?l(Ie(Y(r)),Ie(Y(t))):Ie(Y(r)),{name:i,sid:h,or:s}):(o=v({name:i,derived:1,or:s}),X("sampleTarget",H(o)));let f=Ae(),g=[];if(c==="unit"){let[$,S]=sr(n,o,t,f,e);g=[..._t(S),..._t($)]}let[w,y]=sr(r,o,t,f,e),b=we(t,o,[X("sampleSourceLoader"),V({from:he,target:f}),..._t(y),ye(w,1,p),...g,ye(f),c==="fn"&&oe(($,S,{a:P})=>n($,P),1),l&&oe(At),X("sampleSourceUpward",m)],e,l);return Ce(r,[b]),Object.assign(b.meta,s,{joint:1}),o};const _t=e=>[ye(e),te((t,r,{a:n})=>n,1)],sr=(e,t,r,n,o)=>{let l=K(e),i=l?Y(e):Ae(),s=Ae(l);return l||le({parent:e,node:[V({from:he,target:i}),V({from:"value",store:1,target:s})],family:{owners:[e,t,r],links:t},meta:{op:o},regional:1}),X("sampleSource",s,i,n),[i,s]};function Hr(){return{width:window.visualViewport?.width||600,height:window.visualViewport?.height||400}}function ur(e,t,r){return{x:t.x-e.col*r,y:t.y-e.row*r}}function Vn(e){let t=0,r=0,n=0;return e.size===0?{col:t,row:r}:(e.forEach((o,l)=>{n+=o.size,o.forEach((i,s)=>{t+=l,r+=s})}),{col:Math.round(t/n),row:Math.round(r/n)})}function Wr(e,t){try{let r=localStorage.getItem(e);return r===null?t:r}catch(r){return console.error(r),t}}function Ur(e,t){try{localStorage.setItem(e,t)}catch(r){console.error(r)}}function Xn(){return{currentBp:_(null)}}const ve=Hr();function Yn(e){const t="cellSize",r=[1,100];let n=+Wr(t,"10")||10;const o=_({size:n,prevSize:n}),l=_({width:ve.width,height:ve.height}),i=o.map(({size:u},h)=>({height:Math.ceil(ve.height/u),width:Math.ceil(ve.width/u),prevHeight:h&&h.height||Math.ceil(ve.height/u),prevWidth:h&&h.width||Math.ceil(ve.width/u)})),s=v(),p=v();return o.on(p,({size:u})=>({size:Math.max(r[0],u-1),prevSize:u})).on(s,({size:u})=>({size:Math.max(r[0],u+1),prevSize:u})),o.watch(u=>{Ur(t,String(u.size))}),{options:r,$cellSize:o,$fieldSize:i,plus:s,minus:p,$viewPortSize:l}}function Kn(){const e=v(),t=v();v();const r=v(),n=v(),o=v(),l=_(null);l.on(e,(s,p)=>p).on(r,()=>null);const i=_(null);return i.on(o,(s,p)=>p).on([r],()=>null),{$hovered:l,$dragDelta:i,onHover:e,onPointerDown:t,onPointerLeave:r,onDrag:o,onPointerClick:n}}function Vr(e){var{timeout:t,start:r,stop:n,leading:o=!1,trailing:l=!1}=e,i=r??v({name:"setup",sid:"-ajedhm"}),s=n??v({name:"teardown",sid:"-ryi8gr"}),p=v({name:"tick",sid:"-cw8a02"}),d=_(!1,{name:"$isRunning",sid:"-5gspmy"}),u=Gn(t),h=d.map(y=>!y),m=v({name:"saveTimeout",sid:"satd6r"}),a=_(null,{name:"$timeoutId",sid:"hehxq7"}).on(m,(y,b)=>{var{timeoutId:$}=b;return $}),c=_(()=>{},{name:"$rejecter",sid:"-sc3eh9"}).on(m,(y,b)=>{var{reject:$}=b;return $}),f=rr({and:{source:{timeout:u,running:d},effect:y=>{var{timeout:b,running:$}=y;return $?new Promise((S,P)=>{var x=setTimeout(S,b);m({timeoutId:x,reject:P})}):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=rr({and:{source:{timeoutId:a,rejecter:c},effect:y=>{var{timeoutId:b,rejecter:$}=y;$(),b&&clearTimeout(b)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if(Me({and:[{clock:i,source:u,filter:h,target:f}],or:{sid:"-us95i7"}}),o){var w=Me({and:[{clock:i,filter:h}],or:{name:"onReady",sid:"farho0"}});A({and:[{clock:w,target:p}],or:{sid:"-ubrbnn"}})}return A({and:[{clock:i,fn:()=>!0,target:d}],or:{sid:"-ua3xxa"}}),Me({and:[{clock:f.done,source:u,filter:d,target:f}],or:{sid:"6lcmx8"}}),Me({and:[{clock:f.done,filter:d,target:p.prepend(()=>{})}],or:{sid:"6p772r"}}),l&&A({and:[{clock:s,target:p}],or:{sid:"75p0xb"}}),d.on(s,()=>!1),A({and:[{clock:s,target:g}],or:{sid:"7ln232"}}),{tick:p,isRunning:d,"@@trigger":()=>({setup:i,teardown:s,fired:p})}}function Gn(e){if(_e.store(e,{sid:"8i2x6t"}))return e;if(typeof e=="number")return _(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}function ar(e){var{source:t,timeout:r,target:n=v({name:"target",sid:"r328r6"},{name:"target",sid:"r328r6"})}=e;if(!_e.unit(t))throw new TypeError("source must be unit from effector");var o=Jn(r),l=jt(d=>new Promise(u=>setTimeout(u,d)),{name:"timerFx",sid:"-pyjx8k"}),i=_(null,{and:{serialize:"ignore"},name:"$payload",sid:"hinjft"}).on(t,(d,u)=>u),s=v({name:"triggerTick",sid:"-sf8sou"}),p=_(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"-m0cqc"}).on(s,()=>!1).on(n,()=>!0);return Me({and:[{clock:t,filter:p,target:s}],or:{sid:"-hzhj9b"}}),A({and:[{source:o,clock:s,target:l}],or:{sid:"-hkn38k"}}),A({and:[{source:i,clock:l.done,target:n}],or:{sid:"-hhcboe"}}),n}function Jn(e){if(_e.store(e,{sid:"-h0ap6r"}))return e;if(typeof e=="number"){if(e<0||!Number.isFinite(e))throw new Error('timeout must be positive number or zero. Received: "'.concat(e,'"'));return _(e,{and:{name:"$timeout"},sid:"-h97n10"})}throw new TypeError('timeout parameter should be number or Store. "'.concat(typeof e,'" was passed'))}function Qn(e,t,r){const n=_(0),o=_({prev:0,delta:0}).reset(t),l=v(),i=v(),s=ar({source:l,timeout:100}),p=ar({source:r,timeout:300}),d=Vr({timeout:1e3,start:i});n.on(s,(m,a)=>a),A({source:{stepsPerSec:o,steps:e},clock:d.tick,fn:({stepsPerSec:m,steps:a})=>({prev:a,delta:a-m.prev}),target:o});const u=[];i(),h();function h(){window.requestAnimationFrame(()=>{const m=performance.now();for(;u.length>0&&u[0]<=m-1e3;)u.shift();u.push(m),h()}),l(u.length)}return{$fps:n,$stepsPerSec:o.map(m=>m.delta),$time:En(p,0)}}function Zn(e,t){const r="expectedStepsPerSec";let n=+Wr(r,"10")||10;const o=v(),l=v(),i=v(),s=v(),p=v(),d=v(),u=_(!1),h=_(0),m=[1,200],a=_(n),c=a.map(b=>1e3/b),f=v(),g=v(),w=_(null),y=Vr({timeout:c,start:l,stop:kr([s,i,d])});return A({clock:[y.tick,l,p],filter:ue(u,t,(b,$)=>b&&!$),target:o}),A({clock:p,target:o}),A({source:e,clock:l,fn:b=>new Map(b),target:w}),u.on(l,()=>!0).on([i,s],()=>!1).reset(d),a.on(f,b=>{if(b===1)return 5;let $=b+5;return $>m[1]?m[1]:$}).on(g,b=>{let $=b-5;return $<1?1:$}),w.on(d,()=>null),h.on(o,b=>b+1).on(i,()=>0).reset(d),a.watch(b=>{Ur(r,String(b))}),{$currentStep:h,$expectedStepsPerSec:a,$isRunning:u,$startFauna:w,start:l,stop:i,pause:s,incExpectedStepsPerSec:f,decExpectedStepsPerSec:g,speedRange:m,gameTick:o,reset:d,oneStep:p}}var De={},Xr={},dt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNone=e.isSome=e.None=e.Some=e.OptionType=void 0,e.OptionType={Some:Symbol(":some"),None:Symbol(":none")};function t(i){return typeof i>"u"?n():r(i)}e.Some=t,e.None=n();function r(i){return{type:e.OptionType.Some,isSome(){return!0},isNone(){return!1},match(s){return s.some(i)},map(s){return r(s(i))},andThen(s){return s(i)},or(s){return this},and(s){return s},unwrapOr(s){return i},unwrap(){return i}}}function n(){return{type:e.OptionType.None,isSome(){return!1},isNone(){return!0},match(i){const{none:s}=i;return typeof s=="function"?s():s},map(i){return n()},andThen(i){return n()},or(i){return i},and(i){return n()},unwrapOr(i){if(i==null)throw new Error("Cannot call unwrapOr with a missing value.");return i},unwrap(){throw new ReferenceError("Trying to unwrap None.")}}}function o(i){return i.isSome()}e.isSome=o;function l(i){return i.isNone()}e.isNone=l})(dt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRight=e.isLeft=e.Right=e.Left=e.EitherType=void 0;const t=dt;e.EitherType={Left:Symbol(":left"),Right:Symbol(":right")};function r(i){return{type:e.EitherType.Left,isLeft(){return!0},isRight(){return!1},left(){return(0,t.Some)(i)},leftAndThen(s){return s(i)},right(){return t.None},rightAndThen(s){return r(i)},unwrap(){return i},unwrapLeft(){return i},unwrapLeftOr(s){return i},unwrapLeftOrElse(s){return i},unwrapRight(){throw new ReferenceError("Cannot unwrap Right value of Either.Left")},unwrapRightOr(s){return s},unwrapRightOrElse(s){return s(i)},match(s){return s.left(i)},map(s){return r(s(i))},mapLeft(s){return r(s(i))},mapRight(s){return r(i)}}}e.Left=r;function n(i){return{type:e.EitherType.Right,isLeft(){return!1},isRight(){return!0},left(){return t.None},leftAndThen(s){return n(i)},right(){return(0,t.Some)(i)},rightAndThen(s){return s(i)},unwrap(){return i},unwrapLeft(){throw new ReferenceError("Cannot unwrap Left value of Either.Right")},unwrapLeftOr(s){return s},unwrapLeftOrElse(s){return s(i)},unwrapRight(){return i},unwrapRightOr(s){return i},unwrapRightOrElse(s){return i},match(s){return s.right(i)},map(s){return n(s(i))},mapLeft(s){return n(i)},mapRight(s){return n(s(i))}}}e.Right=n;function o(i){return i.isLeft()}e.isLeft=o;function l(i){return i.isRight()}e.isRight=l})(Xr);var Yr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isErr=e.isOk=e.Err=e.Ok=e.ResultType=void 0;const t=dt;e.ResultType={Ok:Symbol(":ok"),Err:Symbol(":err")};function r(i){return{type:e.ResultType.Ok,isOk(){return!0},isErr(){return!1},ok(){return(0,t.Some)(i)},err(){return t.None},unwrap(){return i},unwrapOr(s){return i},unwrapOrElse(s){return i},unwrapErr(){throw new ReferenceError("Cannot unwrap Err value of Result.Ok")},match(s){return s.ok(i)},map(s){return r(s(i))},mapErr(s){return r(i)},andThen(s){return s(i)},orElse(s){return r(i)}}}e.Ok=r;function n(i){return{type:e.ResultType.Err,isOk(){return!1},isErr(){return!0},ok(){return t.None},err(){return(0,t.Some)(i)},unwrap(){throw new ReferenceError("Cannot unwrap Ok value of Result.Err")},unwrapOr(s){return s},unwrapOrElse(s){return s(i)},unwrapErr(){return i},match(s){return s.err(i)},map(s){return n(i)},mapErr(s){return n(s(i))},andThen(s){return n(i)},orElse(s){return s(i)}}}e.Err=n;function o(i){return i.isOk()}e.isOk=o;function l(i){return i.isErr()}e.isErr=l})(Yr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ok=e.isOk=e.isErr=e.Err=e.Some=e.None=e.isSome=e.isNone=e.Right=e.Left=e.isRight=e.isLeft=void 0;var t=Xr;Object.defineProperty(e,"isLeft",{enumerable:!0,get:function(){return t.isLeft}}),Object.defineProperty(e,"isRight",{enumerable:!0,get:function(){return t.isRight}}),Object.defineProperty(e,"Left",{enumerable:!0,get:function(){return t.Left}}),Object.defineProperty(e,"Right",{enumerable:!0,get:function(){return t.Right}});var r=dt;Object.defineProperty(e,"isNone",{enumerable:!0,get:function(){return r.isNone}}),Object.defineProperty(e,"isSome",{enumerable:!0,get:function(){return r.isSome}}),Object.defineProperty(e,"None",{enumerable:!0,get:function(){return r.None}}),Object.defineProperty(e,"Some",{enumerable:!0,get:function(){return r.Some}});var n=Yr;Object.defineProperty(e,"Err",{enumerable:!0,get:function(){return n.Err}}),Object.defineProperty(e,"isErr",{enumerable:!0,get:function(){return n.isErr}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"Ok",{enumerable:!0,get:function(){return n.Ok}})})(De);const eo="b",cr="o";function to(e){let t=ro(e);if(t.isNone())return[];let r=t.unwrap(),n=r.right-r.left+1,o=r.bottom-r.top+1,l=Array(o).fill(0).map(()=>Array(n).fill(0));for(let[i,s]of e.entries())for(let[p,d]of s.entries())l[p-r.top][i-r.left]=1;return l}function Ht(e){let t=new Map;const r="b",n="o",o="$";let l="",i=0,s=0;for(let p=0;p<e.length;p++){let d=e[p];if(!(d===`
`||d==="!"))if(d.charCodeAt(0)>=48&&d.charCodeAt(0)<=57)l+=d;else{let u=+l||1;if(d===r)s+=u;else if(d===n)for(let h=0;h<u;h++)t.has(s)||t.set(s,new Map),t.get(s).set(i,1),s++;else if(d===o)i+=u,s=0;else return De.None;l=""}}return De.Some(t)}function ro(e){let t=1/0,r=-1/0,n=1/0,o=-1/0;for(let[l,i]of e.entries())for(let[s,p]of i.entries())l<n&&(n=l),l>o&&(o=l),s<t&&(t=s),s>r&&(r=s);return Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(o)?De.Some({top:t,bottom:r,left:n,right:o}):De.None}function Kr(e){let t=to(e);return no(t.map(n=>r(n)).join("$"))+"!";function r(n){let o="",l=n[0],i=1;for(let s=1;s<n.length;s++){let p=n[s];if(l===p){i++;continue}i>1&&(o+=i),o+=l===0?eo:cr,l=p,i=1}return l===1&&(i>1&&(o+=i),o+=cr),o}}function no(e){let t="",r=0;for(let n=0;n<e.length;n++){let o=e[n];o!="$"?(r===1&&(t+="$"),r>1&&(t+=r+"$"),t+=o,r=0):r++}return t}const L=Kn(),N=Yn(L.$hovered.map(e=>!!e));Xn();const W=_({fauna:Ht("8bo$7b3o$5b3ob2o$4bo2b2ob2o$4b2o4bo$4b4o2bo$7b3o$8bobo$b2o7b2o$ob2o5b2o$o3bo$b2obo$2b2o!").unwrap(),time:0,size:0}),oo=_([]),Gr=_(!1),Wt=v(),pt=v();Gr.on(Wt,()=>!0).on(pt,()=>!1);const j=Zn(W.map(e=>e.fauna),Gr),kt=Qn(j.$currentStep,j.reset,pt.map(e=>e.time)),G=_({x:0,y:0}),io=v(),Ut=v(),Vt=v();A({source:[G,L.$hovered],clock:N.$cellSize,fn:([e,t],{size:r,prevSize:n})=>{if(t){let o={col:(t.x-e.x)/n,row:(t.y-e.y)/n};return ur(o,t,r)}else{let o=Hr(),l={x:o.width/2,y:o.height/2},i={col:(l.x-e.x)/n,row:(l.y-e.y)/n};return ur(i,l,r)}},target:G});const Jr=ue(W,G,N.$cellSize,N.$viewPortSize,({fauna:e},t,{size:r},n)=>{const o=[];return e.forEach((l,i)=>{l.forEach((s,p)=>{const d=i*r+t.x,u=p*r+t.y;d>=0&&d<n.width&&u>=0&&u<n.height&&o.push([d,u])})}),o}),lo=ue(Jr,W,(e,t)=>({fieldCellsAmount:e.length,faunaCellsAmount:t.size})),so=ue(oo,N.$fieldSize,N.$cellSize,G,(e,{width:t,height:r},{size:n},o)=>{const l=[];return e.forEach(({col:i,row:s,label:p})=>{const d=i+o.x/n,u=s+o.y/n;d>=0&&d<t&&u>=0&&u<r&&l.push({col:d,row:u,label:p})}),l}),uo=ue(Jr,N.$cellSize,(e,t)=>({size:t,field:e})),ao=ue(L.$hovered,N.$cellSize,G,(e,{size:t},r)=>{if(e){const n=Math.floor((e.x-r.x)/t),o=Math.floor((e.y-r.y)/t),l=(n*t+r.x).toFixed(0),i=(o*t+r.y).toFixed(0);return[{x:l,y:i}]}return[]}),co=ue(so,N.$cellSize,(e,{size:t})=>e.map(({row:r,col:n,label:o})=>({y:r*t+"px",x:n*t+"px",label:o})));A({source:W,clock:j.gameTick,fn:e=>e.fauna,target:Wt});W.on(pt,(e,t)=>t).reset(Vt);const Qr=_({x:0,y:0});A({source:G,clock:L.onPointerDown,target:Qr});A({source:Qr,clock:L.onDrag,fn:(e,{from:t,to:r})=>({x:e.x+r.x-t.x,y:e.y+r.y-t.y}),target:G});G.reset(io);G.watch(console.log);A({source:{faunaData:W,fieldSize:N.$fieldSize,cellSize:N.$cellSize},clock:Ut,fn:({faunaData:e,fieldSize:t,cellSize:r})=>{const n=Vn(e.fauna);return{x:(t.width/2-n.col)*r.size,y:(t.height/2-n.row)*r.size}},target:G});A({source:{faunaData:W,screenOffsetXY:G,cellSize:N.$cellSize},clock:L.onPointerClick,fn:({faunaData:e,screenOffsetXY:t,cellSize:{size:r}},n)=>{const o=new Map(e.fauna),l=Math.floor((n.x-t.x)/r),i=Math.floor((n.y-t.y)/r);return o.has(l)||o.set(l,new Map),o.get(l).has(i)?o.get(l).delete(i):o.get(l).set(i,1),{...e,fauna:o}},target:W});const ht=_(""),Zr=v(),Xt=v(),mt=v();v();v();ht.on(Zr,(e,t)=>t);const gt=_(po()||[]),en=v(),tn=v(),rn=v(),yt=v(),nn=v();gt.on(en,(e,t)=>{let r=0;for(;e.find(n=>n.name===`save #${r}`);)r++;return[...e,{rle:Kr(t),name:`save #${r}`,removed:!1}]}).on(tn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!0}:r)).on(rn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!1}:r));A({source:gt,target:jt(e=>{fo("history",e)})});function fo(e,t){let r=t.filter(n=>!n.removed).map(({name:n,rle:o})=>({rle:o,name:n}));localStorage.setItem(e,JSON.stringify(r))}function po(){try{return(JSON.parse(localStorage.getItem("history")||"null")||[]).map(({rle:r,name:n})=>({rle:r,name:n,removed:!1}))}catch(e){return console.error(e),[]}}A({source:W,clock:nn,fn:e=>e.fauna,target:en});A({source:gt,clock:yt,fn:(e,t)=>{const r=e.find(n=>n.name===t).rle;return{fauna:Ht(r).unwrapOr(new Map),time:0,size:0}},target:W});A({clock:[yt,Vt,Xt,mt],target:j.reset});A({source:W,clock:Xt,fn:({fauna:e})=>Kr(e),target:ht});A({source:ht,clock:mt,fn:e=>({fauna:Ht(e).unwrapOr(new Map),time:0,size:0}),target:W});A({clock:[yt,mt],target:Ut});const fr="#5583e5",ho="_field_2r2xy_1",mo="_cell_2r2xy_17",go="_on1_2r2xy_25",yo="_on2_2r2xy_28",bo="_hoveredCell_2r2xy_32",wo="_heartMode_2r2xy_36",$o="_label_2r2xy_44",Xe={field:ho,cell:mo,on1:go,on2:yo,hoveredCell:bo,heartMode:wo,label:$o};function be(e,t){var r;return((n,o)=>{let l=!_e.unit(n)&&typeof n=="object",i={};n&&"@@unitShape"in n?typeof n["@@unitShape"]=="function"?i=n["@@unitShape"]():Pt("expect @@unitShape to be a function"):i=l?n:{unit:n};let s=Array.isArray(i),p=Object.entries(i),d=s?[]:{},u=[],h={},m={};for(let[c,f]of p)if(_e.store(f))if(h[f.graphite.id]){let g=h[f.graphite.id];d[c]=d[g],m[c]=d[g]}else{u.push(f),h[f.graphite.id]=c;let[g,w]=zt(dr(f,o));d[c]=g,m[c]=w}else _e.unit(f)||Pt("expected useUnit argument to be a unit"),d[c]=o?Cn(f,{scope:o}):f;let a=[$t.compute({priority:"effect"}),$t.compute({priority:"sampler",batch:1}),$t.run({fn:()=>{an(()=>{for(let c of u)m[h[c.graphite.id]](()=>dr(c,o))})}})];if(o){let c=le({node:a}),f=o.additionalLinks,g=[];u.forEach(w=>{let y=w.graphite.id,b=f[y]||[];f[y]=b,b.push(c),g.push(b)}),xt(()=>{g.forEach(w=>{let y=w.indexOf(c);y!==-1&&w.splice(y,1)}),Lt(c)})}else{let c=le({node:a,parent:u,family:{owners:u}});xt(()=>{Lt(c)})}return l?d:d.unit})(e,((n=1)=>{let o=dn(vo);return n&&!o&&Pt("No scope found, consider adding <Provider> to app root"),o})((r=t?.forceScope)!==null&&r!==void 0?r:0))}let Pt=e=>{throw Error(e)};const dr=(e,t)=>t?t.getState(e):e.getState();let vo=fn(null);const So=D("<div><div><div>isTouchDevice: </div><div>d</div></div><canvas>"),_o=D("<div>) <!> "),pr=D("<div>");let ae="ontouchstart"in window||navigator.maxTouchPoints>0;function ko(){let[e,t,r]=be([ao,co,N.$cellSize]),n,o=null,l=null;cn(()=>{requestAnimationFrame(u);function u(){if(!n){console.warn("no canvas");return}let{size:{size:h},field:m}=uo.getState();const a=n.getContext("2d");if(!a){console.warn("no context");return}let{width:c,height:f}=n.getBoundingClientRect();a.clearRect(0,0,c,f),a.fillStyle=fr,a.beginPath(),h>10?m.forEach(g=>{a.rect(g[0]+1,g[1]+1,h-1,h-1)}):m.forEach(g=>{a.rect(g[0],g[1],h,h)}),a.fill(),requestAnimationFrame(u)}});let i=0,[s,p]=zt([]),d=()=>{let u=s(),h=null,m=[];return u.forEach(a=>{h===a?m[m.length-1][1]++:(m.push([a,1]),h=a)}),m};return(()=>{const u=So(),h=u.firstChild,m=h.firstChild;m.firstChild;const a=h.nextSibling;return u.style.setProperty("--color1",fr),h.style.setProperty("position","absolute"),h.style.setProperty("z-index","2"),h.style.setProperty("bottom","90px"),h.style.setProperty("right","50px"),h.style.setProperty("height","80vh"),h.style.setProperty("display","grid"),h.style.setProperty("width","150px"),h.style.setProperty("font-size","12px"),h.style.setProperty("line-height","1"),h.style.setProperty("align-content","end"),h.style.setProperty("pointer-events","none"),h.style.setProperty("overflow","hidden"),k(h,()=>d().map(([c,f],g)=>(()=>{const w=_o(),y=w.firstChild,b=y.nextSibling;return b.nextSibling,k(w,g,y),k(w,f,b),k(w,c,null),w})()),m),k(m,()=>String(ae),null),Pn(c=>n=c,a),a.addEventListener("wheel",c=>{i+=c.deltaY,i>20&&(N.minus(),i=0),i<-20&&(N.plus(),i=0)}),a.$$mouseup=c=>{ae||(o&&!l&&L.onPointerClick(o),o=null,l=null)},a.addEventListener("mouseleave",()=>{ae||(L.onPointerLeave(),o&&!l&&L.onPointerClick(o),o=null,l=null)}),a.$$mousemove=c=>{ae||(o?(l={x:c.clientX,y:c.clientY},L.onDrag({from:o,to:l})):L.onHover({x:c.clientX,y:c.clientY}))},a.$$mousedown=c=>{ae||(L.onPointerDown({x:c.clientX,y:c.clientY}),o={x:c.clientX,y:c.clientY},l=null)},a.$$touchend=c=>{ae&&(o&&!l&&L.onPointerClick(o),o=null,l=null)},a.$$touchmove=c=>{ae&&(c.touches.length!==1&&(console.warn("onTouchMove ERROR"),o=null,l=null),o&&(l={x:c.touches[0].clientX,y:c.touches[0].clientY},L.onDrag({from:o,to:l})))},a.$$touchstart=c=>{ae&&c.touches.length===1&&(L.onPointerDown({x:c.touches[0].clientX,y:c.touches[0].clientY}),o={x:c.touches[0].clientX,y:c.touches[0].clientY},l=null)},k(u,()=>e().map(c=>(()=>{const f=pr();return B(g=>{const w=c.x+"px",y=c.y+"px",b={[Xe.cell]:!0,[Xe.hoveredCell]:!0};return w!==g._v$5&&((g._v$5=w)!=null?f.style.setProperty("left",w):f.style.removeProperty("left")),y!==g._v$6&&((g._v$6=y)!=null?f.style.setProperty("top",y):f.style.removeProperty("top")),g._v$7=Qt(f,b,g._v$7),g},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),f})()),null),k(u,()=>t().map(c=>(()=>{const f=pr();return k(f,()=>c.label),B(g=>{const w=c.x,y=c.y,b={[Xe.label]:!0};return w!==g._v$8&&((g._v$8=w)!=null?f.style.setProperty("left",w):f.style.removeProperty("left")),y!==g._v$9&&((g._v$9=y)!=null?f.style.setProperty("top",y):f.style.removeProperty("top")),g._v$10=Qt(f,b,g._v$10),g},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),f})()),null),B(c=>{const f=Xe.field,g=r().size+"px",w=window.innerWidth,y=document.body.offsetHeight;return f!==c._v$&&Le(u,c._v$=f),g!==c._v$2&&((c._v$2=g)!=null?u.style.setProperty("--cellSize",g):u.style.removeProperty("--cellSize")),w!==c._v$3&&Jt(a,"width",c._v$3=w),y!==c._v$4&&Jt(a,"height",c._v$4=y),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()}Te(["touchstart","touchmove","touchend","mousedown","mousemove","mouseup"]);const Po="_roundBox_hgest_1",xo="_history_hgest_9",Eo="_colorBtn_hgest_15",Co="_currentColor_hgest_22",Ao="_arrowBtn_hgest_26",Oo="_whiteBox_hgest_54",qe={roundBox:Po,history:xo,colorBtn:Eo,currentColor:Co,arrowBtn:Ao,whiteBox:Oo},Ro=D("<div><button>-</button><button>+");function on(e){return(()=>{const t=Ro(),r=t.firstChild,n=r.nextSibling;return ee(r,"click",e.onMinusClicked,!0),k(t,()=>` ${e.value} `,n),ee(n,"click",e.onPlusClicked,!0),B(o=>{const l=e.class,i=e.value<=e.range[0],s=e.value>=e.range[1];return l!==o._v$&&Le(t,o._v$=l),i!==o._v$2&&(r.disabled=o._v$2=i),s!==o._v$3&&(n.disabled=o._v$3=s),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}Te(["click"]);const No=D("<div><button>to center</button><div>");function To(){const[e]=be([N.$cellSize]);return(()=>{const t=No(),r=t.firstChild,n=r.nextSibling;return ee(r,"click",Ut,!0),n.style.setProperty("position","absolute"),n.style.setProperty("right","150px"),n.style.setProperty("bottom","20px"),n.style.setProperty("z-index","1"),k(n,U(on,{get value(){return e().size},get onPlusClicked(){return N.plus},get onMinusClicked(){return N.minus},get range(){return N.options},get class(){return qe.roundBox}})),B(()=>Le(r,qe.arrowBtn)),t})()}Te(["click"]);const Lo=D("<button>STOP"),zo=D("<button>START"),Mo=D("<p><button>Step</button>timer: ");function jo(){let[e,t]=be([j.$isRunning,j.$currentStep]);return(()=>{const r=Mo(),n=r.firstChild;return n.nextSibling,r.style.setProperty("display","flex"),r.style.setProperty("gap","4px"),r.style.setProperty("position","absolute"),ee(n,"click",j.oneStep,!0),k(r,U(Kt,{get when(){return e()},get children(){const o=Lo();return ee(o,"click",j.stop,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#de4040"),o.style.setProperty("border","0"),o}}),null),k(r,U(Kt,{get when(){return!e()},get children(){const o=zo();return ee(o,"click",j.start,!0),o.style.setProperty("color","#f8f8f8"),o.style.setProperty("background-color","#50c40e"),o.style.setProperty("border","0"),o}}),null),k(r,()=>`steps: ${t()}`,null),B(()=>Le(r,qe.whiteBox)),r})()}Te(["click"]);const Fo=D("<div><span>FPS: </span><span>STEPS PER SEC: </span><span>EXPECTED STEPS:</span><span>CALC TIME: <!> msec</span><span>CELLS: </span><span>CELLS ON SCREEN: ");function Io(){const[e,t,r]=be([kt.$stepsPerSec,kt.$time,kt.$fps]),[n,o]=be([lo,j.$expectedStepsPerSec]);return(()=>{const l=Fo(),i=l.firstChild;i.firstChild;const s=i.nextSibling;s.firstChild;const p=s.nextSibling,d=p.nextSibling,u=d.firstChild,h=u.nextSibling;h.nextSibling;const m=d.nextSibling;m.firstChild;const a=m.nextSibling;return a.firstChild,l.style.setProperty("position","absolute"),l.style.setProperty("display","grid"),l.style.setProperty("top","10px"),l.style.setProperty("right","10px"),k(i,r,null),k(s,e,null),k(l,U(on,{get value(){return o()},get onPlusClicked(){return j.incExpectedStepsPerSec},get onMinusClicked(){return j.decExpectedStepsPerSec},get range(){return j.speedRange}}),d),k(d,t,h),k(m,()=>n().faunaCellsAmount,null),k(a,()=>n().fieldCellsAmount,null),B(()=>Le(l,qe.whiteBox)),l})()}const Bo=D("<div><p>History: </p><button>Save"),Do=D("<div><button>"),qo=D("<button>x");function Ho(){let[e]=be([gt]);return(()=>{const t=Bo(),r=t.firstChild,n=r.nextSibling;return r.style.setProperty("margin","0"),ee(n,"click",nn,!0),n.style.setProperty("margin-right","20px"),k(t,U(Sn,{get each(){return e()},children:o=>(()=>{const l=Do(),i=l.firstChild;return i.$$click=()=>{o.removed?rn(o.name):yt(o.name)},k(i,()=>o.removed?`restore ${o.name}`:o.name),k(l,(()=>{const s=Pe(()=>!!o.removed);return()=>s()?null:(()=>{const p=qo();return p.$$click=()=>{tn(o.name)},p})()})(),null),l})()}),null),B(()=>Le(t,qe.history)),t})()}Te(["click"]);const Wo=D("<div><div><h1>Game of Life</h1></div><button>Reset</button><div><button>Export</button><button>Import</button><br><textarea>");function Uo(){let[e]=be([ht]);return(()=>{const t=Wo(),r=t.firstChild;r.firstChild;const n=r.nextSibling,o=n.nextSibling,l=o.firstChild,i=l.nextSibling,s=i.nextSibling,p=s.nextSibling;return k(t,U(To,{}),r),k(t,U(ko,{}),r),r.style.setProperty("position","absolute"),r.style.setProperty("width","100%"),r.style.setProperty("background-color","rgba(255,255,255, 0.9)"),r.style.setProperty("border-bottom","1px solid #ccc"),k(r,U(Ho,{}),null),k(r,U(jo,{}),null),k(t,U(Io,{}),n),ee(n,"click",Vt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","20px"),n.style.setProperty("left","20px"),o.style.setProperty("position","absolute"),o.style.setProperty("bottom","50px"),o.style.setProperty("left","20px"),ee(l,"click",Xt,!0),ee(i,"click",mt,!0),p.addEventListener("change",d=>Zr(d.target.value)),p.style.setProperty("font-size","8px"),p.style.setProperty("width","100%"),p.style.setProperty("height","100px"),p.style.setProperty("line-height","1"),B(()=>p.value=e()),t})()}Vo();function Vo(){const e=new Worker("./webworkerGo.js");e.addEventListener("message",t=>{pt(t.data)}),e.addEventListener("error",t=>{console.log("main.error err",t)}),Wt.watch(t=>{e.postMessage(t)})}kn(()=>U(Uo,{}),document.querySelector("#app"));Te(["click"]);
