(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();const an=(e,t)=>e===t,un=Symbol("solid-track"),Xe={equals:an};let gr=wr;const fe=1,Ye=2,yr={owned:null,cleanups:null,context:null,owner:null};var A=null;let vt=null,O=null,L=null,le=null,lt=0;function Ke(e,t){const r=O,n=A,i=e.length===0,l=t===void 0?n:t,o=i?yr:{owned:null,cleanups:null,context:l?l.context:null,owner:l},s=i?e:()=>e(()=>ie(()=>st(o)));A=o,O=null;try{return Te(s,!0)}finally{O=r,A=n}}function Mt(e,t){t=t?Object.assign({},Xe,t):Xe;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),vr(r,i));return[br.bind(r),n]}function I(e,t,r){const n=jt(e,t,!1,fe);He(n)}function cn(e,t,r){gr=bn;const n=jt(e,t,!1,fe);(!r||!r.render)&&(n.user=!0),le?le.push(n):He(n)}function Pe(e,t,r){r=r?Object.assign({},Xe,r):Xe;const n=jt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,He(n),br.bind(n)}function fn(e){return Te(e,!1)}function ie(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function dn(e){cn(()=>ie(e))}function xt(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function pn(e,t){const r=Symbol("context");return{id:r,Provider:wn(r),defaultValue:e}}function hn(e){return A&&A.context&&A.context[e.id]!==void 0?A.context[e.id]:e.defaultValue}function mn(e){const t=Pe(e),r=Pe(()=>Ct(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function br(){if(this.sources&&this.state)if(this.state===fe)He(this);else{const e=L;L=null,Te(()=>et(this),!1),L=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function vr(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Te(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],o=vt&&vt.running;o&&vt.disposed.has(l),(o?!l.tState:!l.state)&&(l.pure?L.push(l):le.push(l),l.observers&&$r(l)),o||(l.state=fe)}if(L.length>1e6)throw L=[],new Error},!1)),t}function He(e){if(!e.fn)return;st(e);const t=A,r=O,n=lt;O=A=e,gn(e,e.value,n),O=r,A=t}function gn(e,t,r){let n;try{n=e.fn(t)}catch(i){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(st),e.owned=null),e.updatedAt=r+1,Sr(i)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?vr(e,n):e.value=n,e.updatedAt=r)}function jt(e,t,r,n=fe,i){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:r};return A===null||A!==yr&&(A.owned?A.owned.push(l):A.owned=[l]),l}function Ze(e){if(e.state===0)return;if(e.state===Ye)return et(e);if(e.suspense&&ie(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<lt);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===fe)He(e);else if(e.state===Ye){const n=L;L=null,Te(()=>et(e,t[0]),!1),L=n}}function Te(e,t){if(L)return e();let r=!1;t||(L=[]),le?r=!0:le=[],lt++;try{const n=e();return yn(r),n}catch(n){r||(le=null),L=null,Sr(n)}}function yn(e){if(L&&(wr(L),L=null),e)return;const t=le;le=null,t.length&&Te(()=>gr(t),!1)}function wr(e){for(let t=0;t<e.length;t++)Ze(e[t])}function bn(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Ze(n)}for(t=0;t<r;t++)Ze(e[t])}function et(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===fe?n!==t&&(!n.updatedAt||n.updatedAt<lt)&&Ze(n):i===Ye&&et(n,t)}}}function $r(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ye,r.pure?L.push(r):le.push(r),r.observers&&$r(r))}}function st(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const l=i.pop(),o=r.observerSlots.pop();n<i.length&&(l.sourceSlots[o]=n,i[n]=l,r.observerSlots[n]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)st(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function vn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Sr(e,t=A){throw vn(e)}function Ct(e){if(typeof e=="function"&&!e.length)return Ct(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ct(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function wn(e,t){return function(n){let i;return I(()=>i=ie(()=>(A.context={...A.context,[e]:n.value},mn(()=>n.children))),void 0),i}}const $n=Symbol("fallback");function Jt(e){for(let t=0;t<e.length;t++)e[t]()}function Sn(e,t,r={}){let n=[],i=[],l=[],o=0,s=t.length>1?[]:null;return xt(()=>Jt(l)),()=>{let p=e()||[],f,u;return p[un],ie(()=>{let h=p.length,c,d,a,g,w,b,y,v,S;if(h===0)o!==0&&(Jt(l),l=[],n=[],i=[],o=0,s&&(s=[])),r.fallback&&(n=[$n],i[0]=Ke(_=>(l[0]=_,r.fallback())),o=1);else if(o===0){for(i=new Array(h),u=0;u<h;u++)n[u]=p[u],i[u]=Ke(m);o=h}else{for(a=new Array(h),g=new Array(h),s&&(w=new Array(h)),b=0,y=Math.min(o,h);b<y&&n[b]===p[b];b++);for(y=o-1,v=h-1;y>=b&&v>=b&&n[y]===p[v];y--,v--)a[v]=i[y],g[v]=l[y],s&&(w[v]=s[y]);for(c=new Map,d=new Array(v+1),u=v;u>=b;u--)S=p[u],f=c.get(S),d[u]=f===void 0?-1:f,c.set(S,u);for(f=b;f<=y;f++)S=n[f],u=c.get(S),u!==void 0&&u!==-1?(a[u]=i[f],g[u]=l[f],s&&(w[u]=s[f]),u=d[u],c.set(S,u)):l[f]();for(u=b;u<h;u++)u in a?(i[u]=a[u],l[u]=g[u],s&&(s[u]=w[u],s[u](u))):i[u]=Ke(m);i=i.slice(0,o=h),n=p.slice(0)}return i});function m(h){if(l[u]=h,s){const[c,d]=Mt(u);return s[u]=d,t(p[u],c)}return t(p[u])}}}function K(e,t){return ie(()=>e(t||{}))}const _n=e=>`Stale read from <${e}>.`;function kn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Pe(Sn(()=>e.each,e.children,t||void 0))}function Qt(e){const t=e.keyed,r=Pe(()=>e.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return Pe(()=>{const n=r();if(n){const i=e.children;return typeof i=="function"&&i.length>0?ie(()=>i(t?n:()=>{if(!ie(r))throw _n("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Pn(e,t,r){let n=r.length,i=t.length,l=n,o=0,s=0,p=t[i-1].nextSibling,f=null;for(;o<i||s<l;){if(t[o]===r[s]){o++,s++;continue}for(;t[i-1]===r[l-1];)i--,l--;if(i===o){const u=l<n?s?r[s-1].nextSibling:r[l-s]:p;for(;s<l;)e.insertBefore(r[s++],u)}else if(l===s)for(;o<i;)(!f||!f.has(t[o]))&&t[o].remove(),o++;else if(t[o]===r[l-1]&&r[s]===t[i-1]){const u=t[--i].nextSibling;e.insertBefore(r[s++],t[o++].nextSibling),e.insertBefore(r[--l],u),t[i]=r[l]}else{if(!f){f=new Map;let m=s;for(;m<l;)f.set(r[m],m++)}const u=f.get(t[o]);if(u!=null)if(s<u&&u<l){let m=o,h=1,c;for(;++m<i&&m<l&&!((c=f.get(t[m]))==null||c!==u+h);)h++;if(h>u-s){const d=t[o];for(;s<u;)e.insertBefore(r[s++],d)}else e.replaceChild(r[s++],t[o++])}else o++;else t[o++].remove()}}}const Xt="_$DX_DELEGATE";function En(e,t,r,n={}){let i;return Ke(l=>{i=l,t===document?e():x(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function H(e,t,r){let n;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,r?o.content.firstChild.firstChild:o.content.firstChild},l=t?()=>ie(()=>document.importNode(n||(n=i()),!0)):()=>(n||(n=i())).cloneNode(!0);return l.cloneNode=l,l}function Ne(e,t=window.document){const r=t[Xt]||(t[Xt]=new Set);for(let n=0,i=e.length;n<i;n++){const l=e[n];r.has(l)||(r.add(l),t.addEventListener(l,Cn))}}function Yt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Le(e,t){t==null?e.removeAttribute("class"):e.className=t}function te(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const i=r[0];e.addEventListener(t,r[0]=l=>i.call(e,r[1],l))}else e.addEventListener(t,r)}function Zt(e,t,r={}){const n=Object.keys(t||{}),i=Object.keys(r);let l,o;for(l=0,o=i.length;l<o;l++){const s=i[l];!s||s==="undefined"||t[s]||(er(e,s,!1),delete r[s])}for(l=0,o=n.length;l<o;l++){const s=n[l],p=!!t[s];!s||s==="undefined"||r[s]===p||!p||(er(e,s,!0),r[s]=p)}return r}function xn(e,t,r){return ie(()=>e(t,r))}function x(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return tt(e,t,n,r);I(i=>tt(e,t(),i,r),n)}function er(e,t,r){const n=t.trim().split(/\s+/);for(let i=0,l=n.length;i<l;i++)e.classList.toggle(n[i],r)}function Cn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const i=r[`${t}Data`];if(i!==void 0?n.call(r,i,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function tt(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const l=typeof t,o=n!==void 0;if(e=o&&r[0]&&r[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),o){let s=r[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),r=we(e,r,n,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||l==="boolean")r=we(e,r,n);else{if(l==="function")return I(()=>{let s=t();for(;typeof s=="function";)s=s();r=tt(e,s,r,n)}),()=>r;if(Array.isArray(t)){const s=[],p=r&&Array.isArray(r);if(At(s,t,r,i))return I(()=>r=tt(e,s,r,n,!0)),()=>r;if(s.length===0){if(r=we(e,r,n),o)return r}else p?r.length===0?tr(e,s,n):Pn(e,r,s):(r&&we(e),tr(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(o)return r=we(e,r,n,t);we(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function At(e,t,r,n){let i=!1;for(let l=0,o=t.length;l<o;l++){let s=t[l],p=r&&r[l],f;if(!(s==null||s===!0||s===!1))if((f=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))i=At(e,s,p)||i;else if(f==="function")if(n){for(;typeof s=="function";)s=s();i=At(e,Array.isArray(s)?s:[s],Array.isArray(p)?p:[p])||i}else e.push(s),i=!0;else{const u=String(s);p&&p.nodeType===3&&p.data===u?e.push(p):e.push(document.createTextNode(u))}}return i}function tr(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function we(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let l=!1;for(let o=t.length-1;o>=0;o--){const s=t[o];if(i!==s){const p=s.parentNode===e;!l&&!o?p?e.replaceChild(i,s):e.insertBefore(i,r):p&&s.remove()}else l=!0}}else e.insertBefore(i,r);return[i]}function me(e,t){for(let r in e)t(e[r],r)}function F(e,t){e.forEach(t)}function N(e,t){if(!e)throw Error(t)}function oe({node:e=[],from:t,source:r,parent:n=t||r,to:i,target:l,child:o=i||l,scope:s={},meta:p={},family:f={type:"regular"},regional:u}={}){let m=Fe(n),h=Fe(f.links),c=Fe(f.owners),d=[];F(e,g=>g&&G(d,g));let a={id:Mn(),seq:d,next:Fe(o),meta:p,scope:s,family:{type:f.type||"crosslink",links:h,owners:c}};return F(h,g=>G(at(g),a)),F(c,g=>G(ut(g),a)),F(m,g=>G(g.next,a)),u&&ke&&Ce(Ie(ke),[a]),a}function se(e,t,r){let n,i=ee,l=null,o=C;if(e.target&&(t=e.params,r=e.defer,n=e.meta,i="page"in e?e.page:i,e.stack&&(l=e.stack),o=he(e)||o,e=e.target),o&&C&&o!==C&&(C=null),Array.isArray(e))for(let d=0;d<e.length;d++)pe("pure",i,V(e[d]),l,t[d],o,n);else pe("pure",i,V(e),l,t,o,n);if(r&&!Ve)return;let s,p,f,u,m,h,c={isRoot:Ve,currentPage:ee,scope:C,isWatch:Je,isPure:Qe};Ve=0;e:for(;u=Bn();){let{idx:d,stack:a,type:g}=u;f=a.node,ee=m=a.page,C=he(a),m?h=m.reg:C&&(h=C.reg);let w=!!m,b=!!C,y={fail:0,scope:f.scope};s=p=0;for(let v=d;v<f.seq.length&&!s;v++){let S=f.seq[v];if(S.order){let{priority:_,barrierID:P}=S.order,R=P?m?`${m.fullID}_${P}`:P:0;if(v!==d||g!==_){P?$t.has(R)||($t.add(R),Rt(v,a,_,P)):Rt(v,a,_);continue e}P&&$t.delete(R)}switch(S.type){case"mov":{let P,R=S.data;switch(R.from){case ge:P=Ie(a);break;case"a":case"b":P=a[R.from];break;case"value":P=R.store;break;case"store":if(h&&!h[R.store.id])if(w){let bt=jr(m,R.store.id);a.page=m=bt,bt?h=bt.reg:b?(Oe(C,R.store,0,1,R.softRead),h=C.reg):h=void 0}else b&&Oe(C,R.store,0,1,R.softRead);P=Be(h&&h[R.store.id]||R.store)}switch(R.to){case ge:a.value=P;break;case"a":case"b":a[R.to]=P;break;case"store":Dn(m,C,f,R.target).current=P}break}case"compute":let _=S.data;if(_.fn){Je=M(f,"op")==="watch",Qe=_.pure;let P=_.safe?(0,_.fn)(Ie(a),y.scope,a):Un(y,_.fn,a);_.filter?p=!P:a.value=P,Je=c.isWatch,Qe=c.isPure}}s=y.fail||p}if(!s){let v=Ie(a),S=he(a);if(F(f.next,_=>{pe("child",m,_,a,v,S)}),S){M(f,"needFxCounter")&&pe("child",m,S.fxCount,a,v,S),M(f,"storeChange")&&pe("child",m,S.storeChange,a,v,S),M(f,"warnSerialize")&&pe("child",m,S.warnSerializeNode,a,v,S);let _=S.additionalLinks[f.id];_&&F(_,P=>{pe("child",m,P,a,v,S)})}}}Ve=c.isRoot,ee=c.currentPage,C=he(c)}function _r(e,t="combine"){let r=t+"(",n="",i=0;return me(e,l=>{i<25&&(l!=null&&(r+=n,r+=re(l)?Ft(l).fullName:l.toString()),i+=1,n=", ")}),r+")"}function kr(e,t){let r,n,i=e;if(t){let l=Ft(t);e.length===0?(r=l.path,n=l.fullName):(r=l.path.concat([e]),n=l.fullName.length===0?e:l.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:i,fullName:n,path:r}}function Me(e,t){let r=t?e:e[0];Nr(r);let n=r.or,i=r.and;if(i){let l=t?i:i[0];if(X(l)&&"and"in l){let o=Me(i,t);e=o[0],n={...n,...o[1]}}else e=i}return[e,n]}function B(e,...t){let r=Tr();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function $(e,t){let r=Re({or:t,and:typeof e=="string"?{name:e}:e}),n=(o,...s)=>(ye(!M(n,"derived"),"call of derived event","createEvent"),ye(!Qe,"unit call from pure function","operators like sample"),ee?((p,f,u,m)=>{let h=ee,c=null;if(f)for(c=ee;c&&c.template!==f;)c=ae(c);sr(c);let d=p.create(u,m);return sr(h),d})(n,i,o,s):n.create(o,s)),i=Tr(),l=Object.assign(n,{graphite:oe({meta:Br(r.actualOp||"event",n,r),regional:1}),create:o=>(se({target:n,params:o,scope:C}),o),watch:o=>Fr(n,o),map:o=>St(n,Ee,o,[Z()]),filter:o=>St(n,"filter",o.fn?o:o.fn,[Z(It,1)]),filterMap:o=>St(n,"filterMap",o,[Z(),Q(s=>!U(s),1)]),prepend(o){let s=$("* → "+n.shortName,{parent:ae(n)});return B("eventPrepend",V(s)),de(s,n,[Z()],"prepend",o),Ir(n,s),s}});return r!=null&&r.domain&&r.domain.hooks.event(l),Y(l,"id",l.graphite.id),Rr(l.graphite),l}function rr(e,t,r,n){return nt(r,t,"first argument"),N(j(n),"second argument should be a function"),ye(!M(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),F(Array.isArray(r)?r:[r],i=>{e.off(i),rt(e).set(i,zr(qr(i,e,"on",Fn,n)))}),e}function k(e,t){let r=Re(t),n=be(e),i=$({named:"updates",derived:1});B("storeBase",n);let l=n.id,o={subscribers:new Map,updates:i,defaultState:e,stateRef:n,getState(){let c,d=n;if(ee){let a=ee;for(;a&&!a.reg[l];)a=ae(a);a&&(c=a)}return!c&&C&&(Oe(C,n,1),c=C),c&&(d=c.reg[l]),Be(d)},setState:c=>se({target:o,params:c,defer:1,scope:C}),reset:(...c)=>(F(c,d=>rr(o,".reset",d,()=>o.defaultState)),o),on:(c,d)=>rr(o,".on",c,d),off(c){let d=rt(o).get(c);return d&&(d(),rt(o).delete(c)),o},map(c,d){let a,g;X(c)&&(a=c,c=c.fn),ye(U(d),"second argument of store.map","updateFilter");let w=o.getState();U(w)||(g=c(w,d));let b=k(g,{name:`${o.shortName} → *`,derived:1,and:a}),y=qr(o,b,Ee,Ot,c);return it(q(b),{type:Ee,fn:c,from:n}),q(b).noInit=1,B("storeMap",n,y),b},watch(c,d){if(!d||!re(c)){let a=Fr(o,c);return B("storeWatch",n,c)||c(o.getState()),a}return N(j(d),"second argument should be a function"),c.watch(a=>d(o.getState(),a))}},s=Br("store",o,r),p=o.defaultConfig.updateFilter;o.graphite=oe({scope:{state:n,fn:p},node:[Q((c,d,a)=>(a.scope&&!a.scope.reg[n.id]&&(a.b=1),c)),ne(n),Q((c,d,{a,b:g})=>!U(c)&&(c!==a||g),1),p&&Z(Ot,1),J({from:ge,target:n})],child:i,meta:{...s,defaultState:e},regional:1}),Y(o,"id",o.graphite.id),Y(o,"rootStateRefId",l);let f=M(o,"serialize"),u=M(o,"derived"),m=f==="ignore",h=M(o,"sid");return h&&(Y(o,"storeChange",1),n.sid=h),h||m||u||Y(o,"warnSerialize",1),N(u||!U(e),"current state can't be undefined, use null instead"),Ce(o,[i]),r!=null&&r.domain&&r.domain.hooks.store(o),u||(o.reinit=$({named:"reinit"}),o.reset(o.reinit)),n.meta=o.graphite.meta,Rr(o.graphite),o}function ce(...e){let t,r,n;[e,n]=Me(e);let i,l,o,s=e[e.length-1];if(j(s)?(r=e.slice(0,-1),t=s):r=e,r.length===1){let p=r[0];D(p)||(i=p,l=1)}if(!l&&(i=r,t)){o=1;let p=t;t=f=>p(...f)}return N(X(i),"shape should be an object"),Vn(Array.isArray(i),!o,i,n,t)}function Pr(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}function zt(e,t={}){let r=Re(j(e)?{handler:e}:e,t),n=$(j(e)?{handler:e}:e,{...t,actualOp:"effect"}),i=V(n);Y(i,"op",n.kind="effect"),n.use=c=>(N(j(c),".use argument should be a function"),u.scope.handler=c,n),n.use.getCurrent=()=>u.scope.handler;let l=n.finally=$({named:"finally",derived:1}),o=n.done=l.filterMap({named:"done",fn({status:c,params:d,result:a}){if(c==="done")return{params:d,result:a}}}),s=n.fail=l.filterMap({named:"fail",fn({status:c,params:d,error:a}){if(c==="fail")return{params:d,error:a}}}),p=n.doneData=o.map({named:"doneData",fn:({result:c})=>c}),f=n.failData=s.map({named:"failData",fn:({error:c})=>c}),u=oe({scope:{handler:n.defaultConfig.handler||(()=>N(0,`no handler used in ${n.getType()}`))},node:[Q((c,d,a)=>{let g=d.handler,w=he(a);if(w){let b=w.handlers.unitMap.get(n)||w.handlers.sidMap[n.sid];b&&(g=b)}return c.handler=g,c},0,1),Q(({params:c,req:d,handler:a,args:g=[c]},w,b)=>{let y=Hr(b),v=ot(c,d,1,l,b,y),S=ot(c,d,0,l,b,y),[_,P]=Dr(a,S,g);_&&(X(P)&&j(P.then)?P.then(v,S):v(P))},0,1)],meta:{op:"fx",fx:"runner"}});i.scope.runner=u,G(i.seq,Q((c,{runner:d},a)=>{let g=ae(a)?{params:c,req:{rs(w){},rj(w){}}}:c;return a.meta||(a.meta={fxID:jn()}),se({target:d,params:g,defer:1,scope:he(a),meta:a.meta}),g.params},0,1)),n.create=c=>{let d=Pr(),a={params:c,req:d};if(C&&!Je){let g=C;d.req.finally(()=>{qn(g)}).catch(()=>{})}return se({target:n,params:a,scope:C}),d.req};let m=n.inFlight=k(0,{serialize:"ignore",named:(M(n,"name")||n.graphite.id)+".inFlight"}).on(n,c=>c+1).on(l,c=>c-1).map({fn:c=>c,named:"inFlight"});Y(l,"needFxCounter","dec"),Y(n,"needFxCounter",1);let h=n.pending=m.map({fn:c=>c>0,named:"pending"});return Ce(n,[l,o,s,p,f,h,m]),r!=null&&r.domain&&r.domain.hooks.effect(n),n}function nr(e){let t;[e,t]=Me(e,1);let{source:r,effect:n,mapParams:i}=e,l=zt(e,t);Y(l,"attached",1);let o,{runner:s}=V(l).scope,p=Q((u,m,h)=>{let c,{params:d,req:a,handler:g}=u,w=l.finally,b=Hr(h),y=ot(d,a,0,w,h,b),v=h.a,S=xe(g),_=1;if(i?[_,c]=Dr(i,y,[d,v]):c=r&&S?v:d,_){if(!S)return u.args=[v,c],1;se({target:g,params:{params:c,req:{rs:ot(d,a,1,w,h,b),rj:y}},page:h.page,defer:1,meta:h.meta})}},1,1);if(r){let u;D(r)?(u=r,Ce(u,[l])):(u=ce(r),Ce(l,[u])),o=[ne(q(u)),p]}else o=[p];s.seq.splice(1,0,...o),l.use(n);let f=ae(n);return f&&(Object.assign(Ft(l),kr(l.shortName,f)),l.defaultConfig.parent=f),Ir(n,l,"effect"),l}function Er(e,t){nt(e,"merge","first argument");let r=$({name:_r(e,"merge"),derived:1,and:t});return de(e,r,[],"merge"),r}function xr(e,t){let r=0;return F(Kn,n=>{n in e&&(N(e[n]!=null,Ur(t,n)),r=1)}),r}function E(...e){let t,r,n,i,[[l,o,s],p]=Me(e),f=1;return U(o)&&X(l)&&xr(l,"sample")&&(o=l.clock,s=l.fn,f=!l.greedy,i=l.filter,t=l.target,r=l.name,n=l.sid,l=l.source),Ht("sample",o,l,i,t,s,r,p,f,1,0,n)}function ze(...e){let[[t,r],n]=Me(e);return r||(r=t,t=r.source),xr(r,"guard"),Ht("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function An(e,t,r){if(D(e))return ye(0,"restore($store)"),e;if(Cr(e)||xe(e)){let i=ae(e),l=k(t,{parent:i,name:e.shortName,and:r});return de(xe(e)?e.doneData:e,l),i&&i.hooks.store(l),l}let n=Array.isArray(e)?[]:{};return me(e,(i,l)=>n[l]=D(i)?i:k(i,{name:l})),n}function On(...e){let t,r,n="split",[[i,l],o]=Me(e),s=!l;s&&(t=i.cases,l=i.match,r=i.clock,i=i.source);let p=D(l),f=!re(l)&&j(l),u=!p&&!f&&X(l);N(re(i),"source must be a unit"),t||(t={}),s?me(t,(a,g)=>Lr(n,a,`cases.${g}`)):(N(u,"match should be an object"),me(l,(a,g)=>t[g]=$({derived:1,named:`cases.${g}`,and:o})),t.__=$({derived:1,named:"cases.__",and:o}));let m,h=new Set([].concat(i,r||[],Object.values(t))),c=Object.keys(p||f?t:l);if(p||f)p&&h.add(l),m=[p&&ne(q(l),0,1),Ae({safe:p,filter:1,pure:!p,fn(a,g,w){let b=String(p?w.a:l(a));kt(g,ir(c,b)?b:"__",a,w)}})];else if(u){let a=be({});a.type="shape";let g,w=[];me(l,(b,y)=>{if(re(b)){g=1,G(w,y),h.add(b);let v=de(b,[],[ne(a),Q((S,_,{a:P})=>P[y]=S)]);if(D(b)){a.current[y]=b.getState();let S=q(b);it(a,{from:S,field:y,type:"field"}),B("splitMatchStore",S,v)}}}),g&&B("splitBase",a),m=[g&&ne(a,0,1),Z((b,y,v)=>{for(let S=0;S<c.length;S++){let _=c[S];if(ir(w,_)?v.a[_]:l[_](b))return void kt(y,_,b,v)}kt(y,"__",b,v)},1)]}else N(0,"expect match to be unit, function or object");let d=oe({meta:{op:n},parent:r?[]:i,scope:t,node:m,family:{owners:Array.from(h)},regional:1});if(r&&Ht(n,r,i,null,d,null,n,o,0,0,0),!s)return t}function Rn(e,{scope:t,safe:r}={}){N(t||C||r,"scopeBind cannot be called outside of forked .watch");let n=t||C;return xe(e)?i=>{let l=Pr();return se({target:e,params:{params:i,req:l},scope:n}),l.req}:i=>(se({target:e,params:i,scope:n}),i)}let Tn=typeof Symbol<"u"&&Symbol.observable||"@@observable",Ee="map",ge="stack",V=e=>e.graphite||e,at=e=>e.family.owners,ut=e=>e.family.links,q=e=>e.stateRef,Ie=e=>e.value,rt=e=>e.subscribers,ae=e=>e.parent,he=e=>e.scope,M=(e,t)=>V(e).meta[t],Y=(e,t,r)=>V(e).meta[t]=r,Ft=e=>e.compositeName,re=e=>(j(e)||X(e))&&"kind"in e;const Ue=e=>t=>re(t)&&t.kind===e;let D=Ue("store"),Cr=Ue("event"),xe=Ue("effect"),Ar=Ue("domain"),Nn=Ue("scope");var _e={__proto__:null,unit:re,store:D,event:Cr,effect:xe,domain:Ar,scope:Nn,attached:e=>xe(e)&&M(e,"attached")==1};let ir=(e,t)=>e.includes(t),Ge=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},G=(e,t)=>e.push(t),ye=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ct=()=>{let e=0;return()=>""+ ++e};let Ln=ct(),Or=ct(),Mn=ct(),jn=ct(),ke=null,Rr=e=>{},Tr=()=>ke,zn=e=>(e&&ke&&ke.sidRoot&&(e=`${ke.sidRoot}|${e}`),e),Ce=(e,t)=>{let r=V(e);F(t,n=>{let i=V(n);r.family.type!=="domain"&&(i.family.type="crosslink"),G(at(i),r),G(ut(r),i)})},Fe=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(V),X=e=>typeof e=="object"&&e!==null,j=e=>typeof e=="function",U=e=>e===void 0,Nr=e=>N(X(e)||j(e),"expect first argument be an object");const or=(e,t,r,n)=>N(!(!X(e)&&!j(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let nt=(e,t,r)=>{Array.isArray(e)?F(e,(n,i)=>or(n,t,`${i} item of ${r}`,"")):or(e,t,r," or array of units")},Lr=(e,t,r="target")=>F(Fe(t),n=>ye(!M(n,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore")),Ot=(e,{fn:t},{a:r})=>t(e,r),Fn=(e,{fn:t},{a:r})=>t(r,e),It=(e,{fn:t})=>t(e);const Mr=(e,t,r,n)=>{let i={id:Or(),type:e,data:t};return r&&(i.order={priority:r},n&&(i.order.barrierID=++In)),i};let In=0,J=({from:e="store",store:t,target:r,to:n=r?"store":ge,batch:i,priority:l})=>Mr("mov",{from:e,store:t,to:n,target:r},l,i),Ae=({fn:e,batch:t,priority:r,safe:n=0,filter:i=0,pure:l=0})=>Mr("compute",{fn:e,safe:n,filter:i,pure:l},r,t),Bt=({fn:e})=>Ae({fn:e,priority:"effect"}),Q=(e,t,r)=>Ae({fn:e,safe:1,filter:t,priority:r&&"effect"}),ne=(e,t,r)=>J({store:e,to:t?ge:"a",priority:r&&"sampler",batch:1}),Z=(e=It,t)=>Ae({fn:e,pure:1,filter:t}),wt={mov:J,compute:Ae,filter:({fn:e,pure:t})=>Ae({fn:e,filter:1,pure:t}),run:Bt},be=e=>({id:Or(),current:e}),Be=({current:e})=>e,it=(e,t)=>{e.before||(e.before=[]),G(e.before,t)},Se=null;const qt=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Tt(e.v.type)>Tt(t.v.type))&&(r=e,e=t,t=r),r=qt(e.r,t),e.r=e.l,e.l=r,e},Dt=[];let lr=0;for(;lr<6;)G(Dt,{first:null,last:null,size:0}),lr+=1;const Bn=()=>{for(let e=0;e<6;e++){let t=Dt[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=Se.v;return Se=qt(Se.l,Se.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},pe=(e,t,r,n,i,l,o)=>Rt(0,{a:null,b:null,node:r,parent:n,value:i,page:t,scope:l,meta:o},e),Rt=(e,t,r,n=0)=>{let i=Tt(r),l=Dt[i],o={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};i===3||i===4?Se=qt(Se,o):(l.size===0?l.first=o:l.last.r=o,l.last=o),l.size+=1},Tt=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},$t=new Set;let C,Ve=1,Je=0,Qe=0,ee=null,qn=e=>{C=e},sr=e=>{ee=e};const jr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ae(e);if(e)return e}return null};let Dn=(e,t,r,n,i)=>{let l=jr(e,n.id);return l?l.reg[n.id]:t?(Oe(t,n,i),t.reg[n.id]):n};const Hn=e=>e;let Oe=(e,t,r,n,i)=>{var l;let o=e.reg,s=t.sid,p=t==null||(l=t.meta)===null||l===void 0?void 0:l.serialize,f=e.fromSerialize&&p!=="ignore"&&p?.read||Hn;if(o[t.id])return;let u={id:t.id,current:t.current,meta:t.meta};if(u.id in e.values.idMap)u.current=e.values.idMap[u.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap))u.current=f(e.values.sidMap[s]);else if(t.before&&!i){let m=0,h=r||!t.noInit||n;F(t.before,c=>{switch(c.type){case Ee:{let d=c.from;if(d||c.fn){d&&Oe(e,d,r,n);let a=d&&o[d.id].current;h&&(u.current=c.fn?c.fn(a):a)}break}case"field":m||(m=1,u.current=Array.isArray(u.current)?[...u.current]:{...u.current}),Oe(e,c.from,r,n),h&&(u.current[c.field]=o[o[c.from.id].id].current)}})}s&&(e.sidIdMap[s]=t.id),o[t.id]=u};const Un=(e,t,r)=>{try{return t(Ie(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let Re=(e,t={})=>(X(e)&&(Re(e.or,t),me(e,(r,n)=>{U(r)||n==="or"||n==="and"||(t[n]=r)}),Re(e.and,t)),t);const ar=(e,t)=>{Ge(e.next,t),Ge(at(e),t),Ge(ut(e),t)},Nt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let i=ut(e);for(;n=i.pop();)ar(n,e),(t||r&&M(e,"op")!=="sample"||n.family.type==="crosslink")&&Nt(n,t,M(n,"op")!=="on"&&r);for(i=at(e);n=i.pop();)ar(n,e),r&&n.family.type==="crosslink"&&Nt(n,t,M(n,"op")!=="on"&&r)},je=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),D(e))je(rt(e));else if(Ar(e)){r=1;let n=e.history;je(n.events),je(n.effects),je(n.stores),je(n.domains)}Nt(V(e),!!t,r)},zr=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},de=(e,t,r,n,i)=>oe({node:r,parent:e,child:t,scope:{fn:i},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),Fr=(e,t)=>(N(j(t),".watch argument should be a function"),zr(oe({scope:{fn:t},node:[Bt({fn:It})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Ir=(e,t,r="event")=>{ae(e)&&ae(e).hooks[r](t)},Br=(e,t,r)=>{let n=Re(r),i=e==="domain",l=Ln(),{sid:o=null,named:s=null,domain:p=null,parent:f=p}=n,u=s||n.name||(i?"":l),m=kr(u,f),h={op:t.kind=e,name:t.shortName=u,sid:t.sid=zn(o),named:s,unitId:t.id=l,serialize:n.serialize,derived:n.derived,config:n};return t.parent=f,t.compositeName=m,t.defaultConfig=n,t.thru=c=>(ye(0,"thru","js pipe"),c(t)),t.getType=()=>m.fullName,!i&&(t.subscribe=c=>(Nr(c),t.watch(j(c)?c:d=>c.next&&c.next(d))),t[Tn]=()=>t),h};const St=(e,t,r,n)=>{let i;X(r)&&(i=r,r=r.fn);let l=$({name:`${e.shortName} → *`,derived:1,and:i});return de(e,l,n,t,r),l},qr=(e,t,r,n,i)=>{let l=q(t),o=J({store:l,to:"a",priority:"read"});r===Ee&&(o.data.softRead=1);let s=[o,Z(n)];return B("storeOnMap",l,s,D(e)&&q(e)),de(e,t,s,r,i)},Vn=(e,t,r,n,i)=>{let l=e?d=>[...d]:d=>({...d}),o=e?[]:{},s=l(o),p=be(s),f=be(1);p.type=e?"list":"shape",p.noInit=1,B("combineBase",p,f);let u=k(s,{name:_r(r),derived:1,and:n}),m=q(u);m.noInit=1,Y(u,"isCombine",1);let h=ne(p);h.order={priority:"barrier"};let c=[Q((d,a,g)=>(g.scope&&!g.scope.reg[p.id]&&(g.c=1),d)),h,J({store:f,to:"b"}),Q((d,{key:a},g)=>{if(g.c||d!==g.a[a])return t&&g.b&&(g.a=l(g.a)),g.a[a]=d,1},1),J({from:"a",target:p}),J({from:"value",store:0,target:f}),J({from:"value",store:1,target:f,priority:"barrier",batch:1}),ne(p,1),i&&Z()];return me(r,(d,a)=>{if(!D(d))return N(!re(d)&&!U(d),`combine expects a store in a field ${a}`),void(s[a]=o[a]=d);o[a]=d.defaultState,s[a]=d.getState();let g=de(d,u,c,"combine",i);g.scope.key=a;let w=q(d);it(p,{type:"field",field:a,from:w}),B("combineField",w,g)}),u.defaultShape=r,it(m,{type:Ee,from:p,fn:i}),u.defaultState=i?m.current=i(s):o,u};let Dr=(e,t,r)=>{try{return[1,e(...r)]}catch(n){return t(n),[0,null]}},Hr=e=>{let t=he(e),r={ref:t};return t&&G(t.activeEffects,r),r},ot=(e,t,r,n,i,l)=>o=>{l.ref&&Ge(l.ref.activeEffects,l),se({target:[n,Wn],params:[r?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:r?t.rs:t.rj}],defer:1,page:i.page,scope:l.ref,meta:i.meta})};const Wn=oe({node:[Bt({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Kn=["source","clock","target"],Ur=(e,t)=>e+`: ${t} should be defined`;let Ht=(e,t,r,n,i,l,o,s,p,f,u,m)=>{let h=!!i;N(!U(r)||!U(t),Ur(e,"either source or clock"));let c=0;U(r)?c=1:re(r)||(r=ce(r)),U(t)?t=r:(nt(t,e,"clock"),Array.isArray(t)&&(t=Er(t))),c&&(r=t),s||o||(o=r.shortName);let d="none";(u||n)&&(re(n)?d="unit":(N(j(n),"`filter` should be function or unit"),d="fn")),i?(nt(i,e,"target"),Lr(e,i)):d==="none"&&f&&D(r)&&D(t)?i=k(l?l(Be(q(r)),Be(q(t))):Be(q(r)),{name:o,sid:m,or:s}):(i=$({name:o,derived:1,or:s}),B("sampleTarget",V(i)));let a=be(),g=[];if(d==="unit"){let[v,S]=ur(n,i,t,a,e);g=[..._t(S),..._t(v)]}let[w,b]=ur(r,i,t,a,e),y=de(t,i,[B("sampleSourceLoader"),J({from:ge,target:a}),..._t(b),ne(w,1,p),...g,ne(a),d==="fn"&&Z((v,S,{a:_})=>n(v,_),1),l&&Z(Ot),B("sampleSourceUpward",h)],e,l);return Ce(r,[y]),Object.assign(y.meta,s,{joint:1}),i};const _t=e=>[ne(e),Q((t,r,{a:n})=>n,1)],ur=(e,t,r,n,i)=>{let l=D(e),o=l?q(e):be(),s=be(l);return l||oe({parent:e,node:[J({from:ge,target:o}),J({from:"value",store:1,target:s})],family:{owners:[e,t,r],links:t},meta:{op:i},regional:1}),B("sampleSource",s,o,n),[o,s]},kt=(e,t,r,n)=>{let i=e[t];i&&se({target:i,params:Array.isArray(i)?i.map(()=>r):r,defer:1,stack:n})};function Ut(){return{width:window.visualViewport?.width||600,height:window.visualViewport?.height||400}}function cr(e,t,r){return{x:t.x-e.col*r,y:t.y-e.row*r}}function Gn(e){let t=new Map;return e.forEach(({col:r,row:n})=>{t.has(r)||t.set(r,new Map),t.get(r).set(n,1)}),t}function Jn(e){let t=0,r=0,n=0;return e.size===0?{col:t,row:r}:(e.forEach((i,l)=>{n+=i.size,i.forEach((o,s)=>{t+=l,r+=s})}),{col:Math.round(t/n),row:Math.round(r/n)})}function Vr(e,t){try{let r=localStorage.getItem(e);return r===null?t:r}catch(r){return console.error(r),t}}function Wr(e,t){try{localStorage.setItem(e,t)}catch(r){console.error(r)}}function Qn(){return{currentBp:k(null)}}const $e=Ut();function Xn(e){const t="cellSize",r=[1,100];let n=+Vr(t,"10")||10;const i=k({size:n,prevSize:n}),l=k({width:$e.width,height:$e.height}),o=i.map(({size:m},h)=>({height:Math.ceil($e.height/m),width:Math.ceil($e.width/m),prevHeight:h&&h.height||Math.ceil($e.height/m),prevWidth:h&&h.width||Math.ceil($e.width/m)})),s=$(),p=$();let f=0;return document.addEventListener("wheel",m=>{f+=m.deltaY,f>20&&(p(),f=0),f<-20&&(s(),f=0)}),i.on(E({clock:p,filter:e}),({size:m})=>({size:Math.max(r[0],m-1),prevSize:m})).on(E({clock:s,filter:e}),({size:m})=>({size:Math.max(r[0],m+1),prevSize:m})),i.watch(m=>{Wr(t,String(m.size))}),{options:r,$cellSize:i,$fieldSize:o,plus:s,minus:p,$viewPortSize:l}}function Yn(){const e=$(),t=$(),r=k(null);return r.on(t,()=>null).on(e,(i,l)=>l),{$hoveredXY:r,fieldMouseLeaved:t,fieldMouseMoved:e}}function Zn(e,t){const r=k(null),n=k(null),i=k(null),l=$(),o=$(),s=$(),p=$(),f=$(),u=$(),m=$();function h(){}const c=e.map(a=>a!==null),d=e.map(a=>a==null);return i.on(l,()=>Date.now()),E({source:t,clock:l,filter:c,target:r}),E({source:e,clock:l,filter:c,target:n}),E({source:{currentHovered:e,initHovered:n,startTime:i},clock:o,filter:a=>(console.log("1111",!!a.initHovered,!!a.currentHovered,!!a.startTime),!!a.initHovered&&!!a.currentHovered&&!!a.startTime),fn:({currentHovered:a,initHovered:g,startTime:w})=>({start:a,finish:g}),target:s}),E({source:{currentHovered:e,initFocus:r,initHovered:n},clock:e,filter:a=>(console.log("222",!!a.initHovered,!!a.initFocus,!!a.currentHovered),!!a.initHovered&&!!a.initFocus&&!!a.currentHovered),fn:({currentHovered:a,initHovered:g,initFocus:w})=>({x:w.x+(a.x-g.x),y:w.y+(a.y-g.y)}),target:m}),On({source:s,match:a=>a.start.x===a.finish.x&&a.start.y===a.finish.y?"click":"dragEnd",cases:{click:f,dragEnd:u}}),E({clock:f,fn:a=>({coords:a.start}),target:p}),r.reset(s,d),n.reset(s,d),i.reset(s,d),{focusMoved:m,initEvents:h,clicked:p,onMUp:o,onMDown:l}}function Kr(e){var{timeout:t,start:r,stop:n,leading:i=!1,trailing:l=!1}=e,o=r??$({name:"setup",sid:"-ajedhm"}),s=n??$({name:"teardown",sid:"-ryi8gr"}),p=$({name:"tick",sid:"-cw8a02"}),f=k(!1,{name:"$isRunning",sid:"-5gspmy"}),u=ei(t),m=f.map(b=>!b),h=$({name:"saveTimeout",sid:"satd6r"}),c=k(null,{name:"$timeoutId",sid:"hehxq7"}).on(h,(b,y)=>{var{timeoutId:v}=y;return v}),d=k(()=>{},{name:"$rejecter",sid:"-sc3eh9"}).on(h,(b,y)=>{var{reject:v}=y;return v}),a=nr({and:{source:{timeout:u,running:f},effect:b=>{var{timeout:y,running:v}=b;return v?new Promise((S,_)=>{var P=setTimeout(S,y);h({timeoutId:P,reject:_})}):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),g=nr({and:{source:{timeoutId:c,rejecter:d},effect:b=>{var{timeoutId:y,rejecter:v}=b;v(),y&&clearTimeout(y)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if(ze({and:[{clock:o,source:u,filter:m,target:a}],or:{sid:"-us95i7"}}),i){var w=ze({and:[{clock:o,filter:m}],or:{name:"onReady",sid:"farho0"}});E({and:[{clock:w,target:p}],or:{sid:"-ubrbnn"}})}return E({and:[{clock:o,fn:()=>!0,target:f}],or:{sid:"-ua3xxa"}}),ze({and:[{clock:a.done,source:u,filter:f,target:a}],or:{sid:"6lcmx8"}}),ze({and:[{clock:a.done,filter:f,target:p.prepend(()=>{})}],or:{sid:"6p772r"}}),l&&E({and:[{clock:s,target:p}],or:{sid:"75p0xb"}}),f.on(s,()=>!1),E({and:[{clock:s,target:g}],or:{sid:"7ln232"}}),{tick:p,isRunning:f,"@@trigger":()=>({setup:o,teardown:s,fired:p})}}function ei(e){if(_e.store(e,{sid:"8i2x6t"}))return e;if(typeof e=="number")return k(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}function fr(e){var{source:t,timeout:r,target:n=$({name:"target",sid:"r328r6"},{name:"target",sid:"r328r6"})}=e;if(!_e.unit(t))throw new TypeError("source must be unit from effector");var i=ti(r),l=zt(f=>new Promise(u=>setTimeout(u,f)),{name:"timerFx",sid:"-pyjx8k"}),o=k(null,{and:{serialize:"ignore"},name:"$payload",sid:"hinjft"}).on(t,(f,u)=>u),s=$({name:"triggerTick",sid:"-sf8sou"}),p=k(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"-m0cqc"}).on(s,()=>!1).on(n,()=>!0);return ze({and:[{clock:t,filter:p,target:s}],or:{sid:"-hzhj9b"}}),E({and:[{source:i,clock:s,target:l}],or:{sid:"-hkn38k"}}),E({and:[{source:o,clock:l.done,target:n}],or:{sid:"-hhcboe"}}),n}function ti(e){if(_e.store(e,{sid:"-h0ap6r"}))return e;if(typeof e=="number"){if(e<0||!Number.isFinite(e))throw new Error('timeout must be positive number or zero. Received: "'.concat(e,'"'));return k(e,{and:{name:"$timeout"},sid:"-h97n10"})}throw new TypeError('timeout parameter should be number or Store. "'.concat(typeof e,'" was passed'))}function ri(e,t,r){const n=k(0),i=k({prev:0,delta:0}).reset(t),l=$(),o=$(),s=fr({source:l,timeout:100}),p=fr({source:r,timeout:300}),f=Kr({timeout:1e3,start:o});n.on(s,(h,c)=>c),E({source:{stepsPerSec:i,steps:e},clock:f.tick,fn:({stepsPerSec:h,steps:c})=>({prev:c,delta:c-h.prev}),target:i});const u=[];o(),m();function m(){window.requestAnimationFrame(()=>{const h=performance.now();for(;u.length>0&&u[0]<=h-1e3;)u.shift();u.push(h),m()}),l(u.length)}return{$fps:n,$stepsPerSec:i.map(h=>h.delta),$time:An(p,0)}}function ni(e,t){const r="expectedStepsPerSec";let n=+Vr(r,"10")||10;const i=$(),l=$(),o=$(),s=$(),p=$(),f=$(),u=k(!1),m=k(0),h=[1,200],c=k(n),d=c.map(y=>1e3/y),a=$(),g=$(),w=k(null),b=Kr({timeout:d,start:l,stop:Er([s,o,f])});return E({clock:[b.tick,l,p],filter:ce(u,t,(y,v)=>y&&!v),target:i}),E({clock:p,target:i}),E({source:e,clock:l,fn:y=>new Map(y),target:w}),u.on(l,()=>!0).on([o,s],()=>!1).reset(f),c.on(a,y=>{if(y===1)return 5;let v=y+5;return v>h[1]?h[1]:v}).on(g,y=>{let v=y-5;return v<1?1:v}),w.on(f,()=>null),m.on(i,y=>y+1).on(o,()=>0).reset(f),c.watch(y=>{Wr(r,String(y))}),{$currentStep:m,$expectedStepsPerSec:c,$isRunning:u,$startFauna:w,start:l,stop:o,pause:s,incExpectedStepsPerSec:a,decExpectedStepsPerSec:g,speedRange:h,gameTick:i,reset:f,oneStep:p}}const ft=Yn(),T=Xn(ft.$hoveredXY.map(e=>!!e));Qn();const W=k({fauna:Gn([]),time:0,size:0}),ii=k([]),Gr=k(!1),Vt=$(),dt=$();Gr.on(Vt,()=>!0).on(dt,()=>!1);const z=ni(W.map(e=>e.fauna),Gr),Pt=ri(z.$currentStep,z.reset,dt.map(e=>e.time)),ue=k({x:0,y:0}),oi=$(),Wt=$(),Kt=$(),Jr=Zn(ft.$hoveredXY,ue);E({source:[ue,ft.$hoveredXY],clock:T.$cellSize,fn:([e,t],{size:r,prevSize:n})=>{if(t){let i={col:(t.x-e.x)/n,row:(t.y-e.y)/n};return cr(i,t,r)}else{let i=Ut(),l={x:i.width/2,y:i.height/2},o={col:(l.x-e.x)/n,row:(l.y-e.y)/n};return cr(o,l,r)}},target:ue});const Qr=ce(W,ue,T.$cellSize,T.$viewPortSize,({fauna:e},t,{size:r},n)=>{const i=[];return e.forEach((l,o)=>{l.forEach((s,p)=>{const f=o*r+t.x,u=p*r+t.y;f>=0&&f<n.width&&u>=0&&u<n.height&&i.push([f,u])})}),i}),li=ce(Qr,W,(e,t)=>({fieldCellsAmount:e.length,faunaCellsAmount:t.size})),si=ce(ii,T.$fieldSize,T.$cellSize,ue,(e,{width:t,height:r},{size:n},i)=>{const l=[];return e.forEach(({col:o,row:s,label:p})=>{const f=o+i.x/n,u=s+i.y/n;f>=0&&f<t&&u>=0&&u<r&&l.push({col:f,row:u,label:p})}),l}),ai=ce(Qr,T.$cellSize,(e,t)=>({size:t,field:e})),ui=ce(ft.$hoveredXY,T.$cellSize,ue,(e,{size:t},r)=>{if(e){const n=Math.floor((e.x-r.x)/t),i=Math.floor((e.y-r.y)/t),l=(n*t+r.x).toFixed(0),o=(i*t+r.y).toFixed(0);return[{x:l,y:o}]}return[]}),ci=ce(si,T.$cellSize,(e,{size:t})=>e.map(({row:r,col:n,label:i})=>({y:r*t+"px",x:n*t+"px",label:i})));E({source:W,clock:z.gameTick,fn:e=>e.fauna,target:Vt});W.on(dt,(e,t)=>t).reset(Kt);ue.on(Jr.focusMoved,(e,t)=>t).reset(oi);E({source:{faunaData:W,fieldSize:T.$fieldSize,cellSize:T.$cellSize},clock:Wt,fn:({faunaData:e,fieldSize:t,cellSize:r})=>{const n=Jn(e.fauna);return{x:(t.width/2-n.col)*r.size,y:(t.height/2-n.row)*r.size}},target:ue});E({source:{faunaData:W,screenOffsetXY:ue,cellSize:T.$cellSize},clock:Jr.clicked,fn:({faunaData:e,screenOffsetXY:t,cellSize:{size:r}},{coords:n})=>{const i=new Map(e.fauna),l=Math.floor((n.x-t.x)/r),o=Math.floor((n.y-t.y)/r);return i.has(l)||i.set(l,new Map),i.get(l).has(o)?i.get(l).delete(o):i.get(l).set(o,1),{...e,fauna:i}},target:W});const pt=k(""),Xr=$(),Gt=$(),ht=$();$();$();pt.on(Xr,(e,t)=>t);var qe={},Yr={},mt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNone=e.isSome=e.None=e.Some=e.OptionType=void 0,e.OptionType={Some:Symbol(":some"),None:Symbol(":none")};function t(o){return typeof o>"u"?n():r(o)}e.Some=t,e.None=n();function r(o){return{type:e.OptionType.Some,isSome(){return!0},isNone(){return!1},match(s){return s.some(o)},map(s){return r(s(o))},andThen(s){return s(o)},or(s){return this},and(s){return s},unwrapOr(s){return o},unwrap(){return o}}}function n(){return{type:e.OptionType.None,isSome(){return!1},isNone(){return!0},match(o){const{none:s}=o;return typeof s=="function"?s():s},map(o){return n()},andThen(o){return n()},or(o){return o},and(o){return n()},unwrapOr(o){if(o==null)throw new Error("Cannot call unwrapOr with a missing value.");return o},unwrap(){throw new ReferenceError("Trying to unwrap None.")}}}function i(o){return o.isSome()}e.isSome=i;function l(o){return o.isNone()}e.isNone=l})(mt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRight=e.isLeft=e.Right=e.Left=e.EitherType=void 0;const t=mt;e.EitherType={Left:Symbol(":left"),Right:Symbol(":right")};function r(o){return{type:e.EitherType.Left,isLeft(){return!0},isRight(){return!1},left(){return(0,t.Some)(o)},leftAndThen(s){return s(o)},right(){return t.None},rightAndThen(s){return r(o)},unwrap(){return o},unwrapLeft(){return o},unwrapLeftOr(s){return o},unwrapLeftOrElse(s){return o},unwrapRight(){throw new ReferenceError("Cannot unwrap Right value of Either.Left")},unwrapRightOr(s){return s},unwrapRightOrElse(s){return s(o)},match(s){return s.left(o)},map(s){return r(s(o))},mapLeft(s){return r(s(o))},mapRight(s){return r(o)}}}e.Left=r;function n(o){return{type:e.EitherType.Right,isLeft(){return!1},isRight(){return!0},left(){return t.None},leftAndThen(s){return n(o)},right(){return(0,t.Some)(o)},rightAndThen(s){return s(o)},unwrap(){return o},unwrapLeft(){throw new ReferenceError("Cannot unwrap Left value of Either.Right")},unwrapLeftOr(s){return s},unwrapLeftOrElse(s){return s(o)},unwrapRight(){return o},unwrapRightOr(s){return o},unwrapRightOrElse(s){return o},match(s){return s.right(o)},map(s){return n(s(o))},mapLeft(s){return n(o)},mapRight(s){return n(s(o))}}}e.Right=n;function i(o){return o.isLeft()}e.isLeft=i;function l(o){return o.isRight()}e.isRight=l})(Yr);var Zr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isErr=e.isOk=e.Err=e.Ok=e.ResultType=void 0;const t=mt;e.ResultType={Ok:Symbol(":ok"),Err:Symbol(":err")};function r(o){return{type:e.ResultType.Ok,isOk(){return!0},isErr(){return!1},ok(){return(0,t.Some)(o)},err(){return t.None},unwrap(){return o},unwrapOr(s){return o},unwrapOrElse(s){return o},unwrapErr(){throw new ReferenceError("Cannot unwrap Err value of Result.Ok")},match(s){return s.ok(o)},map(s){return r(s(o))},mapErr(s){return r(o)},andThen(s){return s(o)},orElse(s){return r(o)}}}e.Ok=r;function n(o){return{type:e.ResultType.Err,isOk(){return!1},isErr(){return!0},ok(){return t.None},err(){return(0,t.Some)(o)},unwrap(){throw new ReferenceError("Cannot unwrap Ok value of Result.Err")},unwrapOr(s){return s},unwrapOrElse(s){return s(o)},unwrapErr(){return o},match(s){return s.err(o)},map(s){return n(o)},mapErr(s){return n(s(o))},andThen(s){return n(o)},orElse(s){return s(o)}}}e.Err=n;function i(o){return o.isOk()}e.isOk=i;function l(o){return o.isErr()}e.isErr=l})(Zr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Ok=e.isOk=e.isErr=e.Err=e.Some=e.None=e.isSome=e.isNone=e.Right=e.Left=e.isRight=e.isLeft=void 0;var t=Yr;Object.defineProperty(e,"isLeft",{enumerable:!0,get:function(){return t.isLeft}}),Object.defineProperty(e,"isRight",{enumerable:!0,get:function(){return t.isRight}}),Object.defineProperty(e,"Left",{enumerable:!0,get:function(){return t.Left}}),Object.defineProperty(e,"Right",{enumerable:!0,get:function(){return t.Right}});var r=mt;Object.defineProperty(e,"isNone",{enumerable:!0,get:function(){return r.isNone}}),Object.defineProperty(e,"isSome",{enumerable:!0,get:function(){return r.isSome}}),Object.defineProperty(e,"None",{enumerable:!0,get:function(){return r.None}}),Object.defineProperty(e,"Some",{enumerable:!0,get:function(){return r.Some}});var n=Zr;Object.defineProperty(e,"Err",{enumerable:!0,get:function(){return n.Err}}),Object.defineProperty(e,"isErr",{enumerable:!0,get:function(){return n.isErr}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"Ok",{enumerable:!0,get:function(){return n.Ok}})})(qe);const fi="b",dr="o";function di(e){let t=pi(e);if(t.isNone())return[];let r=t.unwrap(),n=r.right-r.left+1,i=r.bottom-r.top+1,l=Array(i).fill(0).map(()=>Array(n).fill(0));for(let[o,s]of e.entries())for(let[p,f]of s.entries())l[p-r.top][o-r.left]=1;return l}function en(e){let t=new Map;const r="b",n="o",i="$";let l="",o=0,s=0;for(let p=0;p<e.length;p++){let f=e[p];if(!(f===`
`||f==="!"))if(f.charCodeAt(0)>=48&&f.charCodeAt(0)<=57)l+=f;else{let u=+l||1;if(f===r)s+=u;else if(f===n)for(let m=0;m<u;m++)t.has(s)||t.set(s,new Map),t.get(s).set(o,1),s++;else if(f===i)o+=u,s=0;else return qe.None;l=""}}return qe.Some(t)}function pi(e){let t=1/0,r=-1/0,n=1/0,i=-1/0;for(let[l,o]of e.entries())for(let[s,p]of o.entries())l<n&&(n=l),l>i&&(i=l),s<t&&(t=s),s>r&&(r=s);return Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)?qe.Some({top:t,bottom:r,left:n,right:i}):qe.None}function tn(e){let t=di(e);return hi(t.map(n=>r(n)).join("$"))+"!";function r(n){let i="",l=n[0],o=1;for(let s=1;s<n.length;s++){let p=n[s];if(l===p){o++;continue}o>1&&(i+=o),i+=l===0?fi:dr,l=p,o=1}return l===1&&(o>1&&(i+=o),i+=dr),i}}function hi(e){let t="",r=0;for(let n=0;n<e.length;n++){let i=e[n];i!="$"?(r===1&&(t+="$"),r>1&&(t+=r+"$"),t+=i,r=0):r++}return t}const gt=k(gi()||[]),rn=$(),nn=$(),on=$(),yt=$(),ln=$();gt.on(rn,(e,t)=>{let r=0;for(;e.find(n=>n.name===`save #${r}`);)r++;return[...e,{rle:tn(t),name:`save #${r}`,removed:!1}]}).on(nn,(e,t)=>e.map(r=>r.name===t?{...r,removed:!0}:r)).on(on,(e,t)=>e.map(r=>r.name===t?{...r,removed:!1}:r));E({source:gt,target:zt(e=>{mi("history",e)})});function mi(e,t){let r=t.filter(n=>!n.removed).map(({name:n,rle:i})=>({rle:i,name:n}));localStorage.setItem(e,JSON.stringify(r))}function gi(){try{return(JSON.parse(localStorage.getItem("history")||"null")||[]).map(({rle:r,name:n})=>({rle:r,name:n,removed:!1}))}catch(e){return console.error(e),[]}}E({source:W,clock:ln,fn:e=>e.fauna,target:rn});E({source:gt,clock:yt,fn:(e,t)=>{const r=e.find(n=>n.name===t).rle;return{fauna:en(r).unwrapOr(new Map),time:0,size:0}},target:W});E({clock:[yt,Kt,Gt,ht],target:z.reset});E({source:W,clock:Gt,fn:({fauna:e})=>tn(e),target:pt});E({source:pt,clock:ht,fn:e=>({fauna:en(e).unwrapOr(new Map),time:0,size:0}),target:W});E({clock:[yt,ht],target:Wt});const pr="#5583e5",yi="_field_2r2xy_1",bi="_cell_2r2xy_17",vi="_on1_2r2xy_25",wi="_on2_2r2xy_28",$i="_hoveredCell_2r2xy_32",Si="_heartMode_2r2xy_36",_i="_label_2r2xy_44",We={field:yi,cell:bi,on1:vi,on2:wi,hoveredCell:$i,heartMode:Si,label:_i};function ve(e,t){var r;return((n,i)=>{let l=!_e.unit(n)&&typeof n=="object",o={};n&&"@@unitShape"in n?typeof n["@@unitShape"]=="function"?o=n["@@unitShape"]():Et("expect @@unitShape to be a function"):o=l?n:{unit:n};let s=Array.isArray(o),p=Object.entries(o),f=s?[]:{},u=[],m={},h={};for(let[d,a]of p)if(_e.store(a))if(m[a.graphite.id]){let g=m[a.graphite.id];f[d]=f[g],h[d]=f[g]}else{u.push(a),m[a.graphite.id]=d;let[g,w]=Mt(hr(a,i));f[d]=g,h[d]=w}else _e.unit(a)||Et("expected useUnit argument to be a unit"),f[d]=i?Rn(a,{scope:i}):a;let c=[wt.compute({priority:"effect"}),wt.compute({priority:"sampler",batch:1}),wt.run({fn:()=>{fn(()=>{for(let d of u)h[m[d.graphite.id]](()=>hr(d,i))})}})];if(i){let d=oe({node:c}),a=i.additionalLinks,g=[];u.forEach(w=>{let b=w.graphite.id,y=a[b]||[];a[b]=y,y.push(d),g.push(y)}),xt(()=>{g.forEach(w=>{let b=w.indexOf(d);b!==-1&&w.splice(b,1)}),Lt(d)})}else{let d=oe({node:c,parent:u,family:{owners:u}});xt(()=>{Lt(d)})}return l?f:f.unit})(e,((n=1)=>{let i=hn(ki);return n&&!i&&Et("No scope found, consider adding <Provider> to app root"),i})((r=t?.forceScope)!==null&&r!==void 0?r:0))}let Et=e=>{throw Error(e)};const hr=(e,t)=>t?t.getState(e):e.getState();let ki=pn(null);const Pi=H("<div><div></div><canvas>"),Ei=H("<div>) <!> "),mr=H("<div>");function xi(){let e=Ut(),[t,r,n]=ve([ui,ci,T.$cellSize]),i;dn(()=>{requestAnimationFrame(f);function f(){if(!i){console.warn("no canvas");return}let{size:{size:u},field:m}=ai.getState();const h=i.getContext("2d");if(!h){console.warn("no context");return}let{width:c,height:d}=i.getBoundingClientRect();h.clearRect(0,0,c,d),h.fillStyle=pr,h.beginPath(),u>10?m.forEach(a=>{h.rect(a[0]+1,a[1]+1,u-1,u-1)}):m.forEach(a=>{h.rect(a[0],a[1],u,u)}),h.fill(),requestAnimationFrame(f)}});let l=0,[o,s]=Mt([]),p=()=>{let f=o(),u=null,m=[];return f.forEach(h=>{u===h?m[m.length-1][1]++:(m.push([h,1]),u=h)}),m};return(()=>{const f=Pi(),u=f.firstChild,m=u.nextSibling;return f.style.setProperty("--color1",pr),u.style.setProperty("position","absolute"),u.style.setProperty("bottom","90px"),u.style.setProperty("right","50px"),u.style.setProperty("height","80vh"),u.style.setProperty("display","grid"),u.style.setProperty("width","150px"),u.style.setProperty("font-size","12px"),u.style.setProperty("line-height","1"),u.style.setProperty("align-content","end"),u.style.setProperty("pointer-events","none"),u.style.setProperty("overflow","hidden"),x(u,()=>p().map(([h,c],d)=>(()=>{const a=Ei(),g=a.firstChild,w=g.nextSibling;return w.nextSibling,x(a,d,g),x(a,c,w),x(a,h,null),a})())),xn(h=>i=h,m),m.addEventListener("wheel",h=>{l+=h.deltaY,l>20&&(T.minus(),l=0),l<-20&&(T.plus(),l=0)}),m.addEventListener("pointerleave",()=>s([...o(),"onPointerLeave"])),m.$$pointermove=()=>s([...o(),"onPointerMove"]),m.$$pointerup=()=>s([...o(),"onPointerUp"]),m.$$pointerdown=()=>s([...o(),"onPointerDown"]),m.addEventListener("pointerenter",()=>s([...o(),"onPointerEnter"])),m.$$pointerout=()=>s([...o(),"onPointerOut"]),m.addEventListener("pointercancel",()=>s([...o(),"onPointerCancel"])),m.$$pointerover=()=>s([...o(),"onPointerOver"]),x(f,()=>t().map(h=>(()=>{const c=mr();return I(d=>{const a=h.x+"px",g=h.y+"px",w={[We.cell]:!0,[We.hoveredCell]:!0};return a!==d._v$5&&((d._v$5=a)!=null?c.style.setProperty("left",a):c.style.removeProperty("left")),g!==d._v$6&&((d._v$6=g)!=null?c.style.setProperty("top",g):c.style.removeProperty("top")),d._v$7=Zt(c,w,d._v$7),d},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),c})()),null),x(f,()=>r().map(h=>(()=>{const c=mr();return x(c,()=>h.label),I(d=>{const a=h.x,g=h.y,w={[We.label]:!0};return a!==d._v$8&&((d._v$8=a)!=null?c.style.setProperty("left",a):c.style.removeProperty("left")),g!==d._v$9&&((d._v$9=g)!=null?c.style.setProperty("top",g):c.style.removeProperty("top")),d._v$10=Zt(c,w,d._v$10),d},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),c})()),null),I(h=>{const c=We.field,d=n().size+"px",a=e.width,g=e.height;return c!==h._v$&&Le(f,h._v$=c),d!==h._v$2&&((h._v$2=d)!=null?f.style.setProperty("--cellSize",d):f.style.removeProperty("--cellSize")),a!==h._v$3&&Yt(m,"width",h._v$3=a),g!==h._v$4&&Yt(m,"height",h._v$4=g),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),f})()}Ne(["pointerover","pointerout","pointerdown","pointerup","pointermove"]);const Ci="_roundBox_hgest_1",Ai="_history_hgest_9",Oi="_colorBtn_hgest_15",Ri="_currentColor_hgest_22",Ti="_arrowBtn_hgest_26",Ni="_whiteBox_hgest_54",De={roundBox:Ci,history:Ai,colorBtn:Oi,currentColor:Ri,arrowBtn:Ti,whiteBox:Ni},Li=H("<div><button>-</button><button>+");function sn(e){return(()=>{const t=Li(),r=t.firstChild,n=r.nextSibling;return te(r,"click",e.onMinusClicked,!0),x(t,()=>` ${e.value} `,n),te(n,"click",e.onPlusClicked,!0),I(i=>{const l=e.class,o=e.value<=e.range[0],s=e.value>=e.range[1];return l!==i._v$&&Le(t,i._v$=l),o!==i._v$2&&(r.disabled=i._v$2=o),s!==i._v$3&&(n.disabled=i._v$3=s),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}Ne(["click"]);const Mi=H("<div><button>to center</button><div>");function ji(){const[e]=ve([T.$cellSize]);return(()=>{const t=Mi(),r=t.firstChild,n=r.nextSibling;return te(r,"click",Wt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("right","150px"),n.style.setProperty("bottom","20px"),n.style.setProperty("z-index","1"),x(n,K(sn,{get value(){return e().size},get onPlusClicked(){return T.plus},get onMinusClicked(){return T.minus},get range(){return T.options},get class(){return De.roundBox}})),I(()=>Le(r,De.arrowBtn)),t})()}Ne(["click"]);const zi=H("<button>STOP"),Fi=H("<button>START"),Ii=H("<p><button>Step</button>timer: ");function Bi(){let[e,t]=ve([z.$isRunning,z.$currentStep]);return(()=>{const r=Ii(),n=r.firstChild;return n.nextSibling,r.style.setProperty("display","flex"),r.style.setProperty("gap","4px"),r.style.setProperty("position","absolute"),te(n,"click",z.oneStep,!0),x(r,K(Qt,{get when(){return e()},get children(){const i=zi();return te(i,"click",z.stop,!0),i.style.setProperty("color","#f8f8f8"),i.style.setProperty("background-color","#de4040"),i.style.setProperty("border","0"),i}}),null),x(r,K(Qt,{get when(){return!e()},get children(){const i=Fi();return te(i,"click",z.start,!0),i.style.setProperty("color","#f8f8f8"),i.style.setProperty("background-color","#50c40e"),i.style.setProperty("border","0"),i}}),null),x(r,()=>`steps: ${t()}`,null),I(()=>Le(r,De.whiteBox)),r})()}Ne(["click"]);const qi=H("<div><span>FPS: </span><span>STEPS PER SEC: </span><span>EXPECTED STEPS:</span><span>CALC TIME: <!> msec</span><span>CELLS: </span><span>CELLS ON SCREEN: ");function Di(){const[e,t,r]=ve([Pt.$stepsPerSec,Pt.$time,Pt.$fps]),[n,i]=ve([li,z.$expectedStepsPerSec]);return(()=>{const l=qi(),o=l.firstChild;o.firstChild;const s=o.nextSibling;s.firstChild;const p=s.nextSibling,f=p.nextSibling,u=f.firstChild,m=u.nextSibling;m.nextSibling;const h=f.nextSibling;h.firstChild;const c=h.nextSibling;return c.firstChild,l.style.setProperty("position","absolute"),l.style.setProperty("display","grid"),l.style.setProperty("top","10px"),l.style.setProperty("right","10px"),x(o,r,null),x(s,e,null),x(l,K(sn,{get value(){return i()},get onPlusClicked(){return z.incExpectedStepsPerSec},get onMinusClicked(){return z.decExpectedStepsPerSec},get range(){return z.speedRange}}),f),x(f,t,m),x(h,()=>n().faunaCellsAmount,null),x(c,()=>n().fieldCellsAmount,null),I(()=>Le(l,De.whiteBox)),l})()}const Hi=H("<div><p>History: </p><button>Save"),Ui=H("<div><button>"),Vi=H("<button>x");function Wi(){let[e]=ve([gt]);return(()=>{const t=Hi(),r=t.firstChild,n=r.nextSibling;return r.style.setProperty("margin","0"),te(n,"click",ln,!0),n.style.setProperty("margin-right","20px"),x(t,K(kn,{get each(){return e()},children:i=>(()=>{const l=Ui(),o=l.firstChild;return o.$$click=()=>{i.removed?on(i.name):yt(i.name)},x(o,()=>i.removed?`restore ${i.name}`:i.name),x(l,(()=>{const s=Pe(()=>!!i.removed);return()=>s()?null:(()=>{const p=Vi();return p.$$click=()=>{nn(i.name)},p})()})(),null),l})()}),null),I(()=>Le(t,De.history)),t})()}Ne(["click"]);const Ki=H("<div><div><h1>Game of Life</h1></div><button>Reset</button><div><button>Export</button><button>Import</button><br><textarea>");function Gi(){let[e]=ve([pt]);return(()=>{const t=Ki(),r=t.firstChild;r.firstChild;const n=r.nextSibling,i=n.nextSibling,l=i.firstChild,o=l.nextSibling,s=o.nextSibling,p=s.nextSibling;return x(t,K(ji,{}),r),x(t,K(xi,{}),r),r.style.setProperty("position","absolute"),r.style.setProperty("width","100%"),r.style.setProperty("background-color","rgba(255,255,255, 0.9)"),r.style.setProperty("border-bottom","1px solid #ccc"),x(r,K(Wi,{}),null),x(r,K(Bi,{}),null),x(t,K(Di,{}),n),te(n,"click",Kt,!0),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","20px"),n.style.setProperty("left","20px"),i.style.setProperty("position","absolute"),i.style.setProperty("bottom","50px"),i.style.setProperty("left","20px"),te(l,"click",Gt,!0),te(o,"click",ht,!0),p.addEventListener("change",f=>Xr(f.target.value)),p.style.setProperty("font-size","8px"),p.style.setProperty("width","100%"),p.style.setProperty("height","100px"),p.style.setProperty("line-height","1"),I(()=>p.value=e()),t})()}Ji();function Ji(){const e=new Worker("./webworkerGo.js");e.addEventListener("message",t=>{dt(t.data)}),e.addEventListener("error",t=>{console.log("main.error err",t)}),Vt.watch(t=>{e.postMessage(t)})}En(()=>K(Gi,{}),document.querySelector("#app"));Ne(["click"]);
